exports.id=5096,exports.ids=[5096],exports.modules={28332:(u,g)=>{"use strict";let S=-8,R=-4,D=0,C=1,E=1,T=2,A=5,B=1024,I=2048,P=8192,W=0,L=4,U=8,M=12,$=12,H=16,Q="undefined"!=typeof BigUint64Array,G=Symbol(),Y=1024;function getStringImpl(u,g){let S=new Uint32Array(u),D=new Uint16Array(u);var C=S[g+R>>>2]>>>1,E=g>>>1;if(C<=Y)return String.fromCharCode.apply(String,D.subarray(E,E+C));let T=[];do{let u=D[E+Y-1],g=u>=55296&&u<56320?Y-1:Y;T.push(String.fromCharCode.apply(String,D.subarray(E,E+=g))),C-=g}while(C>Y);return T.join("")+String.fromCharCode.apply(String,D.subarray(E,E+C))}function preInstantiate(u){let g={};function getString(u,g){return u?getStringImpl(u.buffer,g):"<yet unknown>"}let S=u.env=u.env||{};return S.abort=S.abort||function(u,R,D,C){let E=g.memory||S.memory;throw Error("abort: "+getString(E,u)+" at "+getString(E,R)+":"+D+":"+C)},S.trace=S.trace||function(u,R){let D=g.memory||S.memory;console.log("trace: "+getString(D,u)+(R?" ":"")+Array.prototype.slice.call(arguments,2,2+R).join(", "))},u.Math=u.Math||Math,u.Date=u.Date||Date,g}function postInstantiate(u,g){let G=g.exports,Y=G.memory,X=G.table,K=G.__alloc,J=G.__retain,Z=G.__rtti_base||-1;function getInfo(u){let g=new Uint32Array(Y.buffer),S=g[Z>>>2];if((u>>>=0)>=S)throw Error("invalid id: "+u);return g[(Z+4>>>2)+2*u]}function getBase(u){let g=new Uint32Array(Y.buffer),S=g[Z>>>2];if((u>>>=0)>=S)throw Error("invalid id: "+u);return g[(Z+4>>>2)+2*u+1]}function getValueAlign(u){return 31-Math.clz32(u>>>A&31)}function __allocString(u){let g=u.length,S=K(g<<1,C),R=new Uint16Array(Y.buffer);for(var D=0,E=S>>>1;D<g;++D)R[E+D]=u.charCodeAt(D);return S}function __getString(u){let g=Y.buffer,R=new Uint32Array(g)[u+S>>>2];if(R!==C)throw Error("not a string: "+u);return getStringImpl(g,u)}function getView(u,g,S){let R=Y.buffer;if(S)switch(u){case 2:return new Float32Array(R);case 3:return new Float64Array(R)}else switch(u){case 0:return new(g?Int8Array:Uint8Array)(R);case 1:return new(g?Int16Array:Uint16Array)(R);case 2:return new(g?Int32Array:Uint32Array)(R);case 3:return new(g?BigInt64Array:BigUint64Array)(R)}throw Error("unsupported align: "+u)}function __allocArray(u,g){let S=getInfo(u);if(!(S&(E|T)))throw Error("not an array: "+u+" @ "+S);let R=getValueAlign(S),C=g.length,A=K(C<<R,D),Q=K(S&T?H:M,u),G=new Uint32Array(Y.buffer);G[Q+W>>>2]=J(A),G[Q+L>>>2]=A,G[Q+U>>>2]=C<<R,S&T&&(G[Q+$>>>2]=C);let X=getView(R,S&B,S&I);if(S&P)for(let u=0;u<C;++u)X[(A>>>R)+u]=J(g[u]);else X.set(g,A>>>R);return Q}function __getArrayView(u){let g=new Uint32Array(Y.buffer),D=g[u+S>>>2],C=getInfo(D);if(!(C&E))throw Error("not an array: "+D);let A=getValueAlign(C);var P=g[u+L>>>2];let W=C&T?g[u+$>>>2]:g[P+R>>>2]>>>A;return getView(A,C&B,C&I).subarray(P>>>=A,P+W)}function __getArray(u){let g=__getArrayView(u),S=g.length,R=Array(S);for(let u=0;u<S;u++)R[u]=g[u];return R}function __getArrayBuffer(u){let g=Y.buffer,S=new Uint32Array(g)[u+R>>>2];return g.slice(u,u+S)}function getTypedArray(u,g,S){return new u(getTypedArrayView(u,g,S))}function getTypedArrayView(u,g,S){let D=Y.buffer,C=new Uint32Array(D),E=C[S+L>>>2];return new u(D,E,C[E+R>>>2]>>>g)}function __instanceof(u,g){let R=new Uint32Array(Y.buffer);var D=R[u+S>>>2];if(D<=R[Z>>>2])do if(D==g)return!0;while(D=getBase(D));return!1}return u.__allocString=__allocString,u.__getString=__getString,u.__allocArray=__allocArray,u.__getArrayView=__getArrayView,u.__getArray=__getArray,u.__getArrayBuffer=__getArrayBuffer,u.__getInt8Array=getTypedArray.bind(null,Int8Array,0),u.__getInt8ArrayView=getTypedArrayView.bind(null,Int8Array,0),u.__getUint8Array=getTypedArray.bind(null,Uint8Array,0),u.__getUint8ArrayView=getTypedArrayView.bind(null,Uint8Array,0),u.__getUint8ClampedArray=getTypedArray.bind(null,Uint8ClampedArray,0),u.__getUint8ClampedArrayView=getTypedArrayView.bind(null,Uint8ClampedArray,0),u.__getInt16Array=getTypedArray.bind(null,Int16Array,1),u.__getInt16ArrayView=getTypedArrayView.bind(null,Int16Array,1),u.__getUint16Array=getTypedArray.bind(null,Uint16Array,1),u.__getUint16ArrayView=getTypedArrayView.bind(null,Uint16Array,1),u.__getInt32Array=getTypedArray.bind(null,Int32Array,2),u.__getInt32ArrayView=getTypedArrayView.bind(null,Int32Array,2),u.__getUint32Array=getTypedArray.bind(null,Uint32Array,2),u.__getUint32ArrayView=getTypedArrayView.bind(null,Uint32Array,2),Q&&(u.__getInt64Array=getTypedArray.bind(null,BigInt64Array,3),u.__getInt64ArrayView=getTypedArrayView.bind(null,BigInt64Array,3),u.__getUint64Array=getTypedArray.bind(null,BigUint64Array,3),u.__getUint64ArrayView=getTypedArrayView.bind(null,BigUint64Array,3)),u.__getFloat32Array=getTypedArray.bind(null,Float32Array,2),u.__getFloat32ArrayView=getTypedArrayView.bind(null,Float32Array,2),u.__getFloat64Array=getTypedArray.bind(null,Float64Array,3),u.__getFloat64ArrayView=getTypedArrayView.bind(null,Float64Array,3),u.__instanceof=__instanceof,u.memory=u.memory||Y,u.table=u.table||X,demangle(G,u)}function isResponse(u){return"undefined"!=typeof Response&&u instanceof Response}async function instantiate(u,g){return isResponse(u=await u)?instantiateStreaming(u,g):postInstantiate(preInstantiate(g||(g={})),await WebAssembly.instantiate(u instanceof WebAssembly.Module?u:await WebAssembly.compile(u),g))}function instantiateSync(u,g){return postInstantiate(preInstantiate(g||(g={})),new WebAssembly.Instance(u instanceof WebAssembly.Module?u:new WebAssembly.Module(u),g))}async function instantiateStreaming(u,g){return WebAssembly.instantiateStreaming?postInstantiate(preInstantiate(g||(g={})),(await WebAssembly.instantiateStreaming(u,g)).instance):instantiate(isResponse(u=await u)?u.arrayBuffer():u,g)}function demangle(u,g){var S=g?Object.create(g):{},R=u.__argumentsLength?function(g){u.__argumentsLength.value=g}:u.__setArgumentsLength||u.__setargc||function(){};for(let g in u){if(!Object.prototype.hasOwnProperty.call(u,g))continue;let D=u[g],C=g.split("."),E=S;for(;C.length>1;){let u=C.shift();Object.prototype.hasOwnProperty.call(E,u)||(E[u]={}),E=E[u]}let T=C[0],A=T.indexOf("#");if(A>=0){let S=T.substring(0,A),C=E[S];if(void 0===C||!C.prototype){let ctor=function(...u){return ctor.wrap(ctor.prototype.constructor(0,...u))};ctor.prototype={valueOf:function(){return this[G]}},ctor.wrap=function(u){return Object.create(ctor.prototype,{[G]:{value:u,writable:!1}})},C&&Object.getOwnPropertyNames(C).forEach(u=>Object.defineProperty(ctor,u,Object.getOwnPropertyDescriptor(C,u))),E[S]=ctor}if(T=T.substring(A+1),E=E[S].prototype,/^(get|set):/.test(T)){if(!Object.prototype.hasOwnProperty.call(E,T=T.substring(4))){let S=u[g.replace("set:","get:")],R=u[g.replace("get:","set:")];Object.defineProperty(E,T,{get:function(){return S(this[G])},set:function(u){R(this[G],u)},enumerable:!0})}}else"constructor"===T?(E[T]=(...u)=>(R(u.length),D(...u))).original=D:(E[T]=function(...u){return R(u.length),D(this[G],...u)}).original=D}else/^(get|set):/.test(T)?Object.prototype.hasOwnProperty.call(E,T=T.substring(4))||Object.defineProperty(E,T,{get:u[g.replace("set:","get:")],set:u[g.replace("get:","set:")],enumerable:!0}):"function"==typeof D&&D!==R?(E[T]=(...u)=>(R(u.length),D(...u))).original=D:E[T]=D}return S}g.instantiate=instantiate,g.instantiateSync=instantiateSync,g.instantiateStreaming=instantiateStreaming,g.demangle=demangle},18670:u=>{"use strict";function asPromise(u,g){for(var S=Array(arguments.length-1),R=0,D=2,C=!0;D<arguments.length;)S[R++]=arguments[D++];return new Promise(function(D,E){S[R]=function(u){if(C){if(C=!1,u)E(u);else{for(var g=Array(arguments.length-1),S=0;S<g.length;)g[S++]=arguments[S];D.apply(null,g)}}};try{u.apply(g||null,S)}catch(u){C&&(C=!1,E(u))}})}u.exports=asPromise},36009:(u,g)=>{"use strict";var S=g;S.length=function(u){var g=u.length;if(!g)return 0;for(var S=0;--g%4>1&&"="===u.charAt(g);)++S;return Math.ceil(3*u.length)/4-S};for(var R=Array(64),D=Array(123),C=0;C<64;)D[R[C]=C<26?C+65:C<52?C+71:C<62?C-4:C-59|43]=C++;S.encode=function(u,g,S){for(var D,C=null,E=[],T=0,A=0;g<S;){var B=u[g++];switch(A){case 0:E[T++]=R[B>>2],D=(3&B)<<4,A=1;break;case 1:E[T++]=R[D|B>>4],D=(15&B)<<2,A=2;break;case 2:E[T++]=R[D|B>>6],E[T++]=R[63&B],A=0}T>8191&&((C||(C=[])).push(String.fromCharCode.apply(String,E)),T=0)}return(A&&(E[T++]=R[D],E[T++]=61,1===A&&(E[T++]=61)),C)?(T&&C.push(String.fromCharCode.apply(String,E.slice(0,T))),C.join("")):String.fromCharCode.apply(String,E.slice(0,T))};var E="invalid encoding";S.decode=function(u,g,S){for(var R,C=S,T=0,A=0;A<u.length;){var B=u.charCodeAt(A++);if(61===B&&T>1)break;if(void 0===(B=D[B]))throw Error(E);switch(T){case 0:R=B,T=1;break;case 1:g[S++]=R<<2|(48&B)>>4,R=B,T=2;break;case 2:g[S++]=(15&R)<<4|(60&B)>>2,R=B,T=3;break;case 3:g[S++]=(3&R)<<6|B,T=0}}if(1===T)throw Error(E);return S-C},S.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}},50107:u=>{"use strict";function EventEmitter(){this._listeners={}}u.exports=EventEmitter,EventEmitter.prototype.on=function(u,g,S){return(this._listeners[u]||(this._listeners[u]=[])).push({fn:g,ctx:S||this}),this},EventEmitter.prototype.off=function(u,g){if(void 0===u)this._listeners={};else if(void 0===g)this._listeners[u]=[];else for(var S=this._listeners[u],R=0;R<S.length;)S[R].fn===g?S.splice(R,1):++R;return this},EventEmitter.prototype.emit=function(u){var g=this._listeners[u];if(g){for(var S=[],R=1;R<arguments.length;)S.push(arguments[R++]);for(R=0;R<g.length;)g[R].fn.apply(g[R++].ctx,S)}return this}},71188:u=>{"use strict";function factory(u){return"undefined"!=typeof Float32Array?function(){var g=new Float32Array([-0]),S=new Uint8Array(g.buffer),R=128===S[3];function writeFloat_f32_cpy(u,R,D){g[0]=u,R[D]=S[0],R[D+1]=S[1],R[D+2]=S[2],R[D+3]=S[3]}function writeFloat_f32_rev(u,R,D){g[0]=u,R[D]=S[3],R[D+1]=S[2],R[D+2]=S[1],R[D+3]=S[0]}function readFloat_f32_cpy(u,R){return S[0]=u[R],S[1]=u[R+1],S[2]=u[R+2],S[3]=u[R+3],g[0]}function readFloat_f32_rev(u,R){return S[3]=u[R],S[2]=u[R+1],S[1]=u[R+2],S[0]=u[R+3],g[0]}u.writeFloatLE=R?writeFloat_f32_cpy:writeFloat_f32_rev,u.writeFloatBE=R?writeFloat_f32_rev:writeFloat_f32_cpy,u.readFloatLE=R?readFloat_f32_cpy:readFloat_f32_rev,u.readFloatBE=R?readFloat_f32_rev:readFloat_f32_cpy}():function(){function writeFloat_ieee754(u,g,S,R){var D=g<0?1:0;if(D&&(g=-g),0===g)u(1/g>0?0:2147483648,S,R);else if(isNaN(g))u(2143289344,S,R);else if(g>34028234663852886e22)u((D<<31|2139095040)>>>0,S,R);else if(g<11754943508222875e-54)u((D<<31|Math.round(g/1401298464324817e-60))>>>0,S,R);else{var C=Math.floor(Math.log(g)/Math.LN2),E=8388607&Math.round(g*Math.pow(2,-C)*8388608);u((D<<31|C+127<<23|E)>>>0,S,R)}}function readFloat_ieee754(u,g,S){var R=u(g,S),D=(R>>31)*2+1,C=R>>>23&255,E=8388607&R;return 255===C?E?NaN:D*(1/0):0===C?1401298464324817e-60*D*E:D*Math.pow(2,C-150)*(E+8388608)}u.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE),u.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE),u.readFloatLE=readFloat_ieee754.bind(null,readUintLE),u.readFloatBE=readFloat_ieee754.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var g=new Float64Array([-0]),S=new Uint8Array(g.buffer),R=128===S[7];function writeDouble_f64_cpy(u,R,D){g[0]=u,R[D]=S[0],R[D+1]=S[1],R[D+2]=S[2],R[D+3]=S[3],R[D+4]=S[4],R[D+5]=S[5],R[D+6]=S[6],R[D+7]=S[7]}function writeDouble_f64_rev(u,R,D){g[0]=u,R[D]=S[7],R[D+1]=S[6],R[D+2]=S[5],R[D+3]=S[4],R[D+4]=S[3],R[D+5]=S[2],R[D+6]=S[1],R[D+7]=S[0]}function readDouble_f64_cpy(u,R){return S[0]=u[R],S[1]=u[R+1],S[2]=u[R+2],S[3]=u[R+3],S[4]=u[R+4],S[5]=u[R+5],S[6]=u[R+6],S[7]=u[R+7],g[0]}function readDouble_f64_rev(u,R){return S[7]=u[R],S[6]=u[R+1],S[5]=u[R+2],S[4]=u[R+3],S[3]=u[R+4],S[2]=u[R+5],S[1]=u[R+6],S[0]=u[R+7],g[0]}u.writeDoubleLE=R?writeDouble_f64_cpy:writeDouble_f64_rev,u.writeDoubleBE=R?writeDouble_f64_rev:writeDouble_f64_cpy,u.readDoubleLE=R?readDouble_f64_cpy:readDouble_f64_rev,u.readDoubleBE=R?readDouble_f64_rev:readDouble_f64_cpy}():function(){function writeDouble_ieee754(u,g,S,R,D,C){var E,T=R<0?1:0;if(T&&(R=-R),0===R)u(0,D,C+g),u(1/R>0?0:2147483648,D,C+S);else if(isNaN(R))u(0,D,C+g),u(2146959360,D,C+S);else if(R>17976931348623157e292)u(0,D,C+g),u((T<<31|2146435072)>>>0,D,C+S);else if(R<22250738585072014e-324)u((E=R/5e-324)>>>0,D,C+g),u((T<<31|E/4294967296)>>>0,D,C+S);else{var A=Math.floor(Math.log(R)/Math.LN2);1024===A&&(A=1023),u(4503599627370496*(E=R*Math.pow(2,-A))>>>0,D,C+g),u((T<<31|A+1023<<20|1048576*E&1048575)>>>0,D,C+S)}}function readDouble_ieee754(u,g,S,R,D){var C=u(R,D+g),E=u(R,D+S),T=(E>>31)*2+1,A=E>>>20&2047,B=4294967296*(1048575&E)+C;return 2047===A?B?NaN:T*(1/0):0===A?5e-324*T*B:T*Math.pow(2,A-1075)*(B+4503599627370496)}u.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4),u.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0),u.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4),u.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)}(),u}function writeUintLE(u,g,S){g[S]=255&u,g[S+1]=u>>>8&255,g[S+2]=u>>>16&255,g[S+3]=u>>>24}function writeUintBE(u,g,S){g[S]=u>>>24,g[S+1]=u>>>16&255,g[S+2]=u>>>8&255,g[S+3]=255&u}function readUintLE(u,g){return(u[g]|u[g+1]<<8|u[g+2]<<16|u[g+3]<<24)>>>0}function readUintBE(u,g){return(u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3])>>>0}u.exports=factory(factory)},28031:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},14314:u=>{"use strict";function pool(u,g,S){var R=S||8192,D=R>>>1,C=null,E=R;return function(S){if(S<1||S>D)return u(S);E+S>R&&(C=u(R),E=0);var T=g.call(C,E,E+=S);return 7&E&&(E=(7|E)+1),T}}u.exports=pool},67148:(u,g)=>{"use strict";var S=g;S.length=function(u){for(var g=0,S=0,R=0;R<u.length;++R)(S=u.charCodeAt(R))<128?g+=1:S<2048?g+=2:(64512&S)==55296&&(64512&u.charCodeAt(R+1))==56320?(++R,g+=4):g+=3;return g},S.read=function(u,g,S){if(S-g<1)return"";for(var R,D=null,C=[],E=0;g<S;)(R=u[g++])<128?C[E++]=R:R>191&&R<224?C[E++]=(31&R)<<6|63&u[g++]:R>239&&R<365?(R=((7&R)<<18|(63&u[g++])<<12|(63&u[g++])<<6|63&u[g++])-65536,C[E++]=55296+(R>>10),C[E++]=56320+(1023&R)):C[E++]=(15&R)<<12|(63&u[g++])<<6|63&u[g++],E>8191&&((D||(D=[])).push(String.fromCharCode.apply(String,C)),E=0);return D?(E&&D.push(String.fromCharCode.apply(String,C.slice(0,E))),D.join("")):String.fromCharCode.apply(String,C.slice(0,E))},S.write=function(u,g,S){for(var R,D,C=S,E=0;E<u.length;++E)(R=u.charCodeAt(E))<128?g[S++]=R:(R<2048?g[S++]=R>>6|192:((64512&R)==55296&&(64512&(D=u.charCodeAt(E+1)))==56320?(R=65536+((1023&R)<<10)+(1023&D),++E,g[S++]=R>>18|240,g[S++]=R>>12&63|128):g[S++]=R>>12|224,g[S++]=R>>6&63|128),g[S++]=63&R|128);return S-C}},40126:u=>{"use strict";function balanced(u,g,S){u instanceof RegExp&&(u=maybeMatch(u,S)),g instanceof RegExp&&(g=maybeMatch(g,S));var R=range(u,g,S);return R&&{start:R[0],end:R[1],pre:S.slice(0,R[0]),body:S.slice(R[0]+u.length,R[1]),post:S.slice(R[1]+g.length)}}function maybeMatch(u,g){var S=g.match(u);return S?S[0]:null}function range(u,g,S){var R,D,C,E,T,A=S.indexOf(u),B=S.indexOf(g,A+1),I=A;if(A>=0&&B>0){if(u===g)return[A,B];for(R=[],C=S.length;I>=0&&!T;)I==A?(R.push(I),A=S.indexOf(u,I+1)):1==R.length?T=[R.pop(),B]:((D=R.pop())<C&&(C=D,E=B),B=S.indexOf(g,I+1)),I=A<B&&A>=0?A:B;R.length&&(T=[C,E])}return T}u.exports=balanced,balanced.range=range},31967:(u,g,S)=>{"use strict";let{Buffer:R}=S(14300),D=Symbol.for("BufferList");function BufferList(u){if(!(this instanceof BufferList))return new BufferList(u);BufferList._init.call(this,u)}BufferList._init=function(u){Object.defineProperty(this,D,{value:!0}),this._bufs=[],this.length=0,u&&this.append(u)},BufferList.prototype._new=function(u){return new BufferList(u)},BufferList.prototype._offset=function(u){if(0===u)return[0,0];let g=0;for(let S=0;S<this._bufs.length;S++){let R=g+this._bufs[S].length;if(u<R||S===this._bufs.length-1)return[S,u-g];g=R}},BufferList.prototype._reverseOffset=function(u){let g=u[0],S=u[1];for(let u=0;u<g;u++)S+=this._bufs[u].length;return S},BufferList.prototype.get=function(u){if(u>this.length||u<0)return;let g=this._offset(u);return this._bufs[g[0]][g[1]]},BufferList.prototype.slice=function(u,g){return"number"==typeof u&&u<0&&(u+=this.length),"number"==typeof g&&g<0&&(g+=this.length),this.copy(null,0,u,g)},BufferList.prototype.copy=function(u,g,S,D){if(("number"!=typeof S||S<0)&&(S=0),("number"!=typeof D||D>this.length)&&(D=this.length),S>=this.length||D<=0)return u||R.alloc(0);let C=!!u,E=this._offset(S),T=D-S,A=T,B=C&&g||0,I=E[1];if(0===S&&D===this.length){if(!C)return 1===this._bufs.length?this._bufs[0]:R.concat(this._bufs,this.length);for(let g=0;g<this._bufs.length;g++)this._bufs[g].copy(u,B),B+=this._bufs[g].length;return u}if(A<=this._bufs[E[0]].length-I)return C?this._bufs[E[0]].copy(u,g,I,I+A):this._bufs[E[0]].slice(I,I+A);C||(u=R.allocUnsafe(T));for(let g=E[0];g<this._bufs.length;g++){let S=this._bufs[g].length-I;if(A>S)this._bufs[g].copy(u,B,I),B+=S;else{this._bufs[g].copy(u,B,I,I+A),B+=S;break}A-=S,I&&(I=0)}return u.length>B?u.slice(0,B):u},BufferList.prototype.shallowSlice=function(u,g){if(u=u||0,g="number"!=typeof g?this.length:g,u<0&&(u+=this.length),g<0&&(g+=this.length),u===g)return this._new();let S=this._offset(u),R=this._offset(g),D=this._bufs.slice(S[0],R[0]+1);return 0===R[1]?D.pop():D[D.length-1]=D[D.length-1].slice(0,R[1]),0!==S[1]&&(D[0]=D[0].slice(S[1])),this._new(D)},BufferList.prototype.toString=function(u,g,S){return this.slice(g,S).toString(u)},BufferList.prototype.consume=function(u){if(Number.isNaN(u=Math.trunc(u))||u<=0)return this;for(;this._bufs.length;)if(u>=this._bufs[0].length)u-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(u),this.length-=u;break}return this},BufferList.prototype.duplicate=function(){let u=this._new();for(let g=0;g<this._bufs.length;g++)u.append(this._bufs[g]);return u},BufferList.prototype.append=function(u){if(null==u)return this;if(u.buffer)this._appendBuffer(R.from(u.buffer,u.byteOffset,u.byteLength));else if(Array.isArray(u))for(let g=0;g<u.length;g++)this.append(u[g]);else if(this._isBufferList(u))for(let g=0;g<u._bufs.length;g++)this.append(u._bufs[g]);else"number"==typeof u&&(u=u.toString()),this._appendBuffer(R.from(u));return this},BufferList.prototype._appendBuffer=function(u){this._bufs.push(u),this.length+=u.length},BufferList.prototype.indexOf=function(u,g,S){if(void 0===S&&"string"==typeof g&&(S=g,g=void 0),"function"==typeof u||Array.isArray(u))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof u?u=R.from([u]):"string"==typeof u?u=R.from(u,S):this._isBufferList(u)?u=u.slice():Array.isArray(u.buffer)?u=R.from(u.buffer,u.byteOffset,u.byteLength):R.isBuffer(u)||(u=R.from(u)),isNaN(g=Number(g||0))&&(g=0),g<0&&(g=this.length+g),g<0&&(g=0),0===u.length)return g>this.length?this.length:g;let D=this._offset(g),C=D[0],E=D[1];for(;C<this._bufs.length;C++){let g=this._bufs[C];for(;E<g.length;){let S=g.length-E;if(S>=u.length){let S=g.indexOf(u,E);if(-1!==S)return this._reverseOffset([C,S]);E=g.length-u.length+1}else{let g=this._reverseOffset([C,E]);if(this._match(g,u))return g;E++}}E=0}return -1},BufferList.prototype._match=function(u,g){if(this.length-u<g.length)return!1;for(let S=0;S<g.length;S++)if(this.get(u+S)!==g[S])return!1;return!0},function(){let u={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let g in u)!function(g){null===u[g]?BufferList.prototype[g]=function(u,S){return this.slice(u,u+S)[g](0,S)}:BufferList.prototype[g]=function(S=0){return this.slice(S,S+u[g])[g](0)}}(g)}(),BufferList.prototype._isBufferList=function(u){return u instanceof BufferList||BufferList.isBufferList(u)},BufferList.isBufferList=function(u){return null!=u&&u[D]},u.exports=BufferList},85146:(u,g,S)=>{"use strict";let R=S(94459);function blobToIt(u){return"function"==typeof u.stream?R(u.stream()):R(new Response(u).body)}u.exports=blobToIt},35680:(u,g,S)=>{var R=S(96168),D=S(40126);u.exports=expandTop;var C="\x00SLASH"+Math.random()+"\x00",E="\x00OPEN"+Math.random()+"\x00",T="\x00CLOSE"+Math.random()+"\x00",A="\x00COMMA"+Math.random()+"\x00",B="\x00PERIOD"+Math.random()+"\x00";function numeric(u){return parseInt(u,10)==u?parseInt(u,10):u.charCodeAt(0)}function escapeBraces(u){return u.split("\\\\").join(C).split("\\{").join(E).split("\\}").join(T).split("\\,").join(A).split("\\.").join(B)}function unescapeBraces(u){return u.split(C).join("\\").split(E).join("{").split(T).join("}").split(A).join(",").split(B).join(".")}function parseCommaParts(u){if(!u)return[""];var g=[],S=D("{","}",u);if(!S)return u.split(",");var R=S.pre,C=S.body,E=S.post,T=R.split(",");T[T.length-1]+="{"+C+"}";var A=parseCommaParts(E);return E.length&&(T[T.length-1]+=A.shift(),T.push.apply(T,A)),g.push.apply(g,T),g}function expandTop(u){return u?("{}"===u.substr(0,2)&&(u="\\{\\}"+u.substr(2)),expand(escapeBraces(u),!0).map(unescapeBraces)):[]}function embrace(u){return"{"+u+"}"}function isPadded(u){return/^-?0\d/.test(u)}function lte(u,g){return u<=g}function gte(u,g){return u>=g}function expand(u,g){var S=[],C=D("{","}",u);if(!C||/\$$/.test(C.pre))return[u];var E=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(C.body),A=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(C.body),B=E||A,I=C.body.indexOf(",")>=0;if(!B&&!I)return C.post.match(/,.*\}/)?expand(u=C.pre+"{"+C.body+T+C.post):[u];if(B)L=C.body.split(/\.\./);else if(1===(L=parseCommaParts(C.body)).length&&1===(L=expand(L[0],!1).map(embrace)).length){var P=C.post.length?expand(C.post,!1):[""];return P.map(function(u){return C.pre+L[0]+u})}var W=C.pre,P=C.post.length?expand(C.post,!1):[""];if(B){var L,U,M,$=numeric(L[0]),H=numeric(L[1]),Q=Math.max(L[0].length,L[1].length),G=3==L.length?Math.abs(numeric(L[2])):1,Y=lte;H<$&&(G*=-1,Y=gte);var X=L.some(isPadded);U=[];for(var K=$;Y(K,H);K+=G){if(A)"\\"===(M=String.fromCharCode(K))&&(M="");else if(M=String(K),X){var J=Q-M.length;if(J>0){var Z=Array(J+1).join("0");M=K<0?"-"+Z+M.slice(1):Z+M}}U.push(M)}}else U=R(L,function(u){return expand(u,!1)});for(var ee=0;ee<U.length;ee++)for(var et=0;et<P.length;et++){var en=W+U[ee]+P[et];(!g||B||en)&&S.push(en)}return S}},94459:u=>{"use strict";async function*browserReadableStreamToIt(u,g={}){let S=u.getReader();try{for(;;){let u=await S.read();if(u.done)return;yield u.value}}finally{!0!==g.preventCancel&&S.cancel(),S.releaseLock()}}u.exports=browserReadableStreamToIt},96168:u=>{u.exports=function(u,S){for(var R=[],D=0;D<u.length;D++){var C=S(u[D],D);g(C)?R.push.apply(R,C):R.push(C)}return R};var g=Array.isArray||function(u){return"[object Array]"===Object.prototype.toString.call(u)}},47255:u=>{"use strict";function dataUriToBuffer(u){if(!/^data:/i.test(u))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');u=u.replace(/\r?\n/g,"");let g=u.indexOf(",");if(-1===g||g<=4)throw TypeError("malformed data: URI");let S=u.substring(5,g).split(";"),R="",D=!1,C=S[0]||"text/plain",E=C;for(let u=1;u<S.length;u++)"base64"===S[u]?D=!0:(E+=`;${S[u]}`,0===S[u].indexOf("charset=")&&(R=S[u].substring(8)));S[0]||R.length||(E+=";charset=US-ASCII",R="US-ASCII");let T=D?"base64":"ascii",A=unescape(u.substring(g+1)),B=Buffer.from(A,T);return B.type=C,B.typeFull=E,B.charset=R,B}u.exports=dataUriToBuffer},17058:u=>{"use strict";function assign(u,g){for(let S in g)Object.defineProperty(u,S,{value:g[S],enumerable:!0,configurable:!0});return u}function createError(u,g,S){if(!u||"string"==typeof u)throw TypeError("Please pass an Error to err-code");S||(S={}),"object"==typeof g&&(S=g,g=""),g&&(S.code=g);try{return assign(u,S)}catch(R){S.message=u.message,S.stack=u.stack;let ErrClass=function(){};ErrClass.prototype=Object.create(Object.getPrototypeOf(u));let g=assign(new ErrClass,S);return g}}u.exports=createError},93394:u=>{"use strict";u.exports=clone;var g=Object.getPrototypeOf||function(u){return u.__proto__};function clone(u){if(null===u||"object"!=typeof u)return u;if(u instanceof Object)var S={__proto__:g(u)};else var S=Object.create(null);return Object.getOwnPropertyNames(u).forEach(function(g){Object.defineProperty(S,g,Object.getOwnPropertyDescriptor(u,g))}),S}},61055:(u,g,S)=>{var R,D,C,E=S(57147),T=S(58683),A=S(22569),B=S(93394),I=S(73837);function publishQueue(u,g){Object.defineProperty(u,R,{get:function(){return g}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(R=Symbol.for("graceful-fs.queue"),D=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",D="___graceful-fs.previous");var debug=function(){};function patch(u){T(u),u.gracefulify=patch,u.createReadStream=createReadStream,u.createWriteStream=createWriteStream;var g=u.readFile;function readFile(u,S,R){return"function"==typeof S&&(R=S,S=null),go$readFile(u,S,R);function go$readFile(u,S,R,D){return g(u,S,function(g){g&&("EMFILE"===g.code||"ENFILE"===g.code)?enqueue([go$readFile,[u,S,R],g,D||Date.now(),Date.now()]):"function"==typeof R&&R.apply(this,arguments)})}}u.readFile=readFile;var S=u.writeFile;function writeFile(u,g,R,D){return"function"==typeof R&&(D=R,R=null),go$writeFile(u,g,R,D);function go$writeFile(u,g,R,D,C){return S(u,g,R,function(S){S&&("EMFILE"===S.code||"ENFILE"===S.code)?enqueue([go$writeFile,[u,g,R,D],S,C||Date.now(),Date.now()]):"function"==typeof D&&D.apply(this,arguments)})}}u.writeFile=writeFile;var R=u.appendFile;function appendFile(u,g,S,D){return"function"==typeof S&&(D=S,S=null),go$appendFile(u,g,S,D);function go$appendFile(u,g,S,D,C){return R(u,g,S,function(R){R&&("EMFILE"===R.code||"ENFILE"===R.code)?enqueue([go$appendFile,[u,g,S,D],R,C||Date.now(),Date.now()]):"function"==typeof D&&D.apply(this,arguments)})}}R&&(u.appendFile=appendFile);var D=u.copyFile;function copyFile(u,g,S,R){return"function"==typeof S&&(R=S,S=0),go$copyFile(u,g,S,R);function go$copyFile(u,g,S,R,C){return D(u,g,S,function(D){D&&("EMFILE"===D.code||"ENFILE"===D.code)?enqueue([go$copyFile,[u,g,S,R],D,C||Date.now(),Date.now()]):"function"==typeof R&&R.apply(this,arguments)})}}D&&(u.copyFile=copyFile);var C=u.readdir;u.readdir=readdir;var E=/^v[0-5]\./;function readdir(u,g,S){"function"==typeof g&&(S=g,g=null);var R=E.test(process.version)?function(u,g,S,R){return C(u,fs$readdirCallback(u,g,S,R))}:function(u,g,S,R){return C(u,g,fs$readdirCallback(u,g,S,R))};return R(u,g,S);function fs$readdirCallback(u,g,S,D){return function(C,E){C&&("EMFILE"===C.code||"ENFILE"===C.code)?enqueue([R,[u,g,S],C,D||Date.now(),Date.now()]):(E&&E.sort&&E.sort(),"function"==typeof S&&S.call(this,C,E))}}}if("v0.8"===process.version.substr(0,4)){var B=A(u);ReadStream=B.ReadStream,WriteStream=B.WriteStream}var I=u.ReadStream;I&&(ReadStream.prototype=Object.create(I.prototype),ReadStream.prototype.open=ReadStream$open);var P=u.WriteStream;P&&(WriteStream.prototype=Object.create(P.prototype),WriteStream.prototype.open=WriteStream$open),Object.defineProperty(u,"ReadStream",{get:function(){return ReadStream},set:function(u){ReadStream=u},enumerable:!0,configurable:!0}),Object.defineProperty(u,"WriteStream",{get:function(){return WriteStream},set:function(u){WriteStream=u},enumerable:!0,configurable:!0});var W=ReadStream;Object.defineProperty(u,"FileReadStream",{get:function(){return W},set:function(u){W=u},enumerable:!0,configurable:!0});var L=WriteStream;function ReadStream(u,g){return this instanceof ReadStream?(I.apply(this,arguments),this):ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var u=this;open(u.path,u.flags,u.mode,function(g,S){g?(u.autoClose&&u.destroy(),u.emit("error",g)):(u.fd=S,u.emit("open",S),u.read())})}function WriteStream(u,g){return this instanceof WriteStream?(P.apply(this,arguments),this):WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var u=this;open(u.path,u.flags,u.mode,function(g,S){g?(u.destroy(),u.emit("error",g)):(u.fd=S,u.emit("open",S))})}function createReadStream(g,S){return new u.ReadStream(g,S)}function createWriteStream(g,S){return new u.WriteStream(g,S)}Object.defineProperty(u,"FileWriteStream",{get:function(){return L},set:function(u){L=u},enumerable:!0,configurable:!0});var U=u.open;function open(u,g,S,R){return"function"==typeof S&&(R=S,S=null),go$open(u,g,S,R);function go$open(u,g,S,R,D){return U(u,g,S,function(C,E){C&&("EMFILE"===C.code||"ENFILE"===C.code)?enqueue([go$open,[u,g,S,R],C,D||Date.now(),Date.now()]):"function"==typeof R&&R.apply(this,arguments)})}}return u.open=open,u}function enqueue(u){debug("ENQUEUE",u[0].name,u[1]),E[R].push(u),retry()}function resetQueue(){for(var u=Date.now(),g=0;g<E[R].length;++g)E[R][g].length>2&&(E[R][g][3]=u,E[R][g][4]=u);retry()}function retry(){if(clearTimeout(C),C=void 0,0!==E[R].length){var u=E[R].shift(),g=u[0],S=u[1],D=u[2],T=u[3],A=u[4];if(void 0===T)debug("RETRY",g.name,S),g.apply(null,S);else if(Date.now()-T>=6e4){debug("TIMEOUT",g.name,S);var B=S.pop();"function"==typeof B&&B.call(null,D)}else Date.now()-A>=Math.min(1.2*Math.max(A-T,1),100)?(debug("RETRY",g.name,S),g.apply(null,S.concat([T]))):E[R].push(u);void 0===C&&(C=setTimeout(retry,0))}}I.debuglog?debug=I.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(debug=function(){var u=I.format.apply(I,arguments);console.error(u="GFS4: "+u.split(/\n/).join("\nGFS4: "))}),!E[R]&&(publishQueue(E,global[R]||[]),E.close=function(u){function close(g,S){return u.call(E,g,function(u){u||resetQueue(),"function"==typeof S&&S.apply(this,arguments)})}return Object.defineProperty(close,D,{value:u}),close}(E.close),E.closeSync=function(u){function closeSync(g){u.apply(E,arguments),resetQueue()}return Object.defineProperty(closeSync,D,{value:u}),closeSync}(E.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){debug(E[R]),S(39491).equal(E[R].length,0)})),global[R]||publishQueue(global,E[R]),u.exports=patch(B(E)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!E.__patched&&(u.exports=patch(E),E.__patched=!0)},22569:(u,g,S)=>{var R=S(12781).Stream;function legacy(u){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(g,S){if(!(this instanceof ReadStream))return new ReadStream(g,S);R.call(this);var D=this;this.path=g,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536;for(var C=Object.keys(S=S||{}),E=0,T=C.length;E<T;E++){var A=C[E];this[A]=S[A]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw Error("start must be <= end");this.pos=this.start}if(null!==this.fd){process.nextTick(function(){D._read()});return}u.open(this.path,this.flags,this.mode,function(u,g){if(u){D.emit("error",u),D.readable=!1;return}D.fd=g,D.emit("open",g),D._read()})}function WriteStream(g,S){if(!(this instanceof WriteStream))return new WriteStream(g,S);R.call(this),this.path=g,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0;for(var D=Object.keys(S=S||{}),C=0,E=D.length;C<E;C++){var T=D[C];this[T]=S[T]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=u.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}u.exports=legacy},58683:(u,g,S)=>{var R=S(22057),D=process.cwd,C=null,E=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return C||(C=D.call(process)),C};try{process.cwd()}catch(u){}if("function"==typeof process.chdir){var T=process.chdir;process.chdir=function(u){C=null,T.call(process,u)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,T)}function patch(u){function patchLchmod(u){u.lchmod=function(g,S,D){u.open(g,R.O_WRONLY|R.O_SYMLINK,S,function(g,R){if(g){D&&D(g);return}u.fchmod(R,S,function(g){u.close(R,function(u){D&&D(g||u)})})})},u.lchmodSync=function(g,S){var D,C=u.openSync(g,R.O_WRONLY|R.O_SYMLINK,S),E=!0;try{D=u.fchmodSync(C,S),E=!1}finally{if(E)try{u.closeSync(C)}catch(u){}else u.closeSync(C)}return D}}function patchLutimes(u){R.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(g,S,D,C){u.open(g,R.O_SYMLINK,function(g,R){if(g){C&&C(g);return}u.futimes(R,S,D,function(g){u.close(R,function(u){C&&C(g||u)})})})},u.lutimesSync=function(g,S,D){var C,E=u.openSync(g,R.O_SYMLINK),T=!0;try{C=u.futimesSync(E,S,D),T=!1}finally{if(T)try{u.closeSync(E)}catch(u){}else u.closeSync(E)}return C}):u.futimes&&(u.lutimes=function(u,g,S,R){R&&process.nextTick(R)},u.lutimesSync=function(){})}function chmodFix(g){return g?function(S,R,D){return g.call(u,S,R,function(u){chownErOk(u)&&(u=null),D&&D.apply(this,arguments)})}:g}function chmodFixSync(g){return g?function(S,R){try{return g.call(u,S,R)}catch(u){if(!chownErOk(u))throw u}}:g}function chownFix(g){return g?function(S,R,D,C){return g.call(u,S,R,D,function(u){chownErOk(u)&&(u=null),C&&C.apply(this,arguments)})}:g}function chownFixSync(g){return g?function(S,R,D){try{return g.call(u,S,R,D)}catch(u){if(!chownErOk(u))throw u}}:g}function statFix(g){return g?function(S,R,D){function callback(u,g){g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),D&&D.apply(this,arguments)}return"function"==typeof R&&(D=R,R=null),R?g.call(u,S,R,callback):g.call(u,S,callback)}:g}function statFixSync(g){return g?function(S,R){var D=R?g.call(u,S,R):g.call(u,S);return D&&(D.uid<0&&(D.uid+=4294967296),D.gid<0&&(D.gid+=4294967296)),D}:g}function chownErOk(u){return!u||"ENOSYS"===u.code||(!process.getuid||0!==process.getuid())&&("EINVAL"===u.code||"EPERM"===u.code)}R.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&patchLchmod(u),u.lutimes||patchLutimes(u),u.chown=chownFix(u.chown),u.fchown=chownFix(u.fchown),u.lchown=chownFix(u.lchown),u.chmod=chmodFix(u.chmod),u.fchmod=chmodFix(u.fchmod),u.lchmod=chmodFix(u.lchmod),u.chownSync=chownFixSync(u.chownSync),u.fchownSync=chownFixSync(u.fchownSync),u.lchownSync=chownFixSync(u.lchownSync),u.chmodSync=chmodFixSync(u.chmodSync),u.fchmodSync=chmodFixSync(u.fchmodSync),u.lchmodSync=chmodFixSync(u.lchmodSync),u.stat=statFix(u.stat),u.fstat=statFix(u.fstat),u.lstat=statFix(u.lstat),u.statSync=statFixSync(u.statSync),u.fstatSync=statFixSync(u.fstatSync),u.lstatSync=statFixSync(u.lstatSync),u.chmod&&!u.lchmod&&(u.lchmod=function(u,g,S){S&&process.nextTick(S)},u.lchmodSync=function(){}),u.chown&&!u.lchown&&(u.lchown=function(u,g,S,R){R&&process.nextTick(R)},u.lchownSync=function(){}),"win32"===E&&(u.rename="function"!=typeof u.rename?u.rename:function(g){function rename(S,R,D){var C=Date.now(),E=0;g(S,R,function CB(T){if(T&&("EACCES"===T.code||"EPERM"===T.code||"EBUSY"===T.code)&&Date.now()-C<6e4){setTimeout(function(){u.stat(R,function(u,C){u&&"ENOENT"===u.code?g(S,R,CB):D(T)})},E),E<100&&(E+=10);return}D&&D(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(rename,g),rename}(u.rename)),u.read="function"!=typeof u.read?u.read:function(g){function read(S,R,D,C,E,T){var A;if(T&&"function"==typeof T){var B=0;A=function(I,P,W){if(I&&"EAGAIN"===I.code&&B<10)return B++,g.call(u,S,R,D,C,E,A);T.apply(this,arguments)}}return g.call(u,S,R,D,C,E,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(read,g),read}(u.read),u.readSync="function"!=typeof u.readSync?u.readSync:function(g){return function(S,R,D,C,E){for(var T=0;;)try{return g.call(u,S,R,D,C,E)}catch(u){if("EAGAIN"===u.code&&T<10){T++;continue}throw u}}}(u.readSync)}u.exports=patch},59303:(u,g,S)=>{"use strict";let R=S(50334),{fromString:D}=S(5007);let Bucket=class Bucket{constructor(u,g,S=0){this._options=u,this._popCount=0,this._parent=g,this._posAtParent=S,this._children=new R,this.key=null}async put(u,g){let S=await this._findNewBucketAndPos(u);await S.bucket._putAt(S,u,g)}async get(u){let g=await this._findChild(u);if(g)return g.value}async del(u){let g=await this._findPlace(u),S=g.bucket._at(g.pos);S&&S.key===u&&g.bucket._delAt(g.pos)}leafCount(){let u=this._children.compactArray();return u.reduce((u,g)=>g instanceof Bucket?u+g.leafCount():u+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let u=this._children.compactArray();for(let g of u)g instanceof Bucket?yield*g.eachLeafSeries():yield g;return[]}serialize(u,g){let S=[];return g(this._children.reduce((S,R,D)=>(R&&(R instanceof Bucket?S.push(R.serialize(u,g)):S.push(u(R,D))),S),S))}asyncTransform(u,g){return asyncTransformBucket(this,u,g)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(u){let g=await this._findPlace(u),S=g.bucket._at(g.pos);if(!(S instanceof Bucket)&&S&&S.key===u)return S}async _findPlace(u){let g=this._options.hash("string"==typeof u?D(u):u),S=await g.take(this._options.bits),R=this._children.get(S);return R instanceof Bucket?R._findPlace(g):{bucket:this,pos:S,hash:g,existingChild:R}}async _findNewBucketAndPos(u){let g=await this._findPlace(u);if(g.existingChild&&g.existingChild.key!==u){let u=new Bucket(this._options,g.bucket,g.pos);g.bucket._putObjectAt(g.pos,u);let S=await u._findPlace(g.existingChild.hash);return S.bucket._putAt(S,g.existingChild.key,g.existingChild.value),u._findNewBucketAndPos(g.hash)}return g}_putAt(u,g,S){this._putObjectAt(u.pos,{key:g,value:S,hash:u.hash})}_putObjectAt(u,g){!this._children.get(u)&&this._popCount++,this._children.set(u,g)}_delAt(u){if(-1===u)throw Error("Invalid position");this._children.get(u)&&this._popCount--,this._children.unset(u),this._level()}_level(){if(this._parent&&this._popCount<=1){if(1===this._popCount){let u=this._children.find(exists);if(u&&!(u instanceof Bucket)){let g=u.hash;g.untake(this._options.bits);let S={pos:this._posAtParent,hash:g,bucket:this._parent};this._parent._putAt(S,u.key,u.value)}}else this._parent._delAt(this._posAtParent)}}_at(u){return this._children.get(u)}};function exists(u){return!!u}function mapNode(u,g){return u.key}function reduceNodes(u){return u}async function asyncTransformBucket(u,g,S){let R=[];for(let D of u._children.compactArray())if(D instanceof Bucket)await asyncTransformBucket(D,g,S);else{let S=await g(D);R.push({bitField:u._children.bitField(),children:S})}return S(R)}u.exports=Bucket},18281:u=>{"use strict";let g=[255,254,252,248,240,224,192,128],S=[1,3,7,15,31,63,127,255];function byteBitsToInt(u,g,S){let R=maskFor(g,S);return(u&R)>>>g}function maskFor(u,R){return g[u]&S[Math.min(R+u-1,7)]}u.exports=class{constructor(u){this._value=u,this._currentBytePos=u.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(u){let g=u,S=0;for(;g&&this._haveBits();){let u=this._value[this._currentBytePos],R=this._currentBitPos+1,D=Math.min(R,g),C=byteBitsToInt(u,R-D,D);S=(S<<D)+C,g-=D,this._currentBitPos-=D,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return S}untake(u){for(this._currentBitPos+=u;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},90204:(u,g,S)=>{"use strict";let R=S(18281),{concat:D}=S(33391);function wrapHash(u){return function(g){return g instanceof InfiniteHash?g:new InfiniteHash(g,u)}}let InfiniteHash=class InfiniteHash{constructor(u,g){if(!(u instanceof Uint8Array))throw Error("can only hash Uint8Arrays");this._value=u,this._hashFn=g,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(u){let g=u;for(;this._availableBits<g;)await this._produceMoreBits();let S=0;for(;g>0;){let u=this._buffers[this._currentBufferIndex],R=Math.min(u.availableBits(),g),D=u.take(R);S=(S<<R)+D,g-=R,this._availableBits-=R,0===u.availableBits()&&this._currentBufferIndex++}return S}untake(u){let g=u;for(;g>0;){let u=this._buffers[this._currentBufferIndex],S=Math.min(u.totalBits()-u.availableBits(),g);u.untake(S),g-=S,this._availableBits+=S,this._currentBufferIndex>0&&u.totalBits()===u.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let u=this._depth?D([this._value,Uint8Array.from([this._depth])]):this._value,g=await this._hashFn(u),S=new R(g);this._buffers.push(S),this._availableBits+=S.availableBits()}};u.exports=wrapHash,u.exports.InfiniteHash=InfiniteHash},12103:(u,g,S)=>{"use strict";let R=S(59303),D=S(90204);function createHAMT(u){if(!u||!u.hashFn)throw Error("please define an options.hashFn");let g={bits:u.bits||8,hash:D(u.hashFn)};return new R(g)}u.exports={createHAMT,Bucket:R}},95204:u=>{"use strict";u.exports=u=>{if("[object Object]"!==Object.prototype.toString.call(u))return!1;let g=Object.getPrototypeOf(u);return null===g||g===Object.prototype}},44279:u=>{"use strict";let all=async u=>{let g=[];for await(let S of u)g.push(S);return g};u.exports=all},40783:u=>{"use strict";async function*batch(u,g=1){let S=[];for await(let R of(g<1&&(g=1),u))for(S.push(R);S.length>=g;)yield S.slice(0,g),S=S.slice(g);for(;S.length;)yield S.slice(0,g),S=S.slice(g)}u.exports=batch},98259:u=>{"use strict";let drain=async u=>{for await(let g of u);};u.exports=drain},55863:u=>{"use strict";let filter=async function*(u,g){for await(let S of u)await g(S)&&(yield S)};u.exports=filter},31882:(u,g,S)=>{"use strict";let R=S(57147).promises,D=S(71017),C=S(88186);async function*glob(u,g,S={}){let E=D.resolve(u),T=D.relative(S.cwd||process.cwd(),u),A=await R.stat(E);if(A.isDirectory()){for await(let u of _glob(E,"",g,S))yield u;return}C(T,g,S)&&(yield S.absolute?E:T)}async function*_glob(u,g,S,E){for await(let T of(await R.readdir(D.join(u,g)))){let A=D.join(g,T),B=D.join(u,g,T),I=await R.stat(B),P=C(A,S,E);E.ignore&&P&&E.ignore.reduce((u,g)=>u||C(A,g,E),!1)&&(P=!1),P&&!(I.isDirectory()&&E.nodir)&&(yield E.absolute?B:A),I.isDirectory()&&(yield*_glob(u,A,S,E))}}u.exports=glob},7754:u=>{"use strict";let last=async u=>{let g;for await(let S of u)g=S;return g};u.exports=last},55594:u=>{"use strict";let map=async function*(u,g){for await(let S of u)yield g(S)};u.exports=map},51046:(u,g,S)=>{"use strict";let R=S(40783);async function*parallelBatch(u,g=1){for await(let S of R(u,g)){let u=S.map(u=>u().then(u=>({ok:!0,value:u}),u=>({ok:!1,err:u})));for(let g=0;g<u.length;g++){let S=await u[g];if(S.ok)yield S.value;else throw S.err}}}u.exports=parallelBatch},60127:u=>{"use strict";function peekableIterator(u){let[g,S]=u[Symbol.asyncIterator]?[u[Symbol.asyncIterator](),Symbol.asyncIterator]:[u[Symbol.iterator](),Symbol.iterator],R=[];return{peek:()=>g.next(),push:u=>{R.push(u)},next:()=>R.length?{done:!1,value:R.shift()}:g.next(),[S](){return this}}}u.exports=peekableIterator},38947:u=>{let rawPipe=(...u)=>{let g;for(;u.length;)g=u.shift()(g);return g},isIterable=u=>u&&("function"==typeof u[Symbol.asyncIterator]||"function"==typeof u[Symbol.iterator]||"function"==typeof u.next),isDuplex=u=>u&&"function"==typeof u.sink&&isIterable(u.source),duplexPipelineFn=u=>g=>(u.sink(g),u.source),pipe=(...u)=>{if(isDuplex(u[0])){let g=u[0];u[0]=()=>g.source}else if(isIterable(u[0])){let g=u[0];u[0]=()=>g}if(u.length>1&&isDuplex(u[u.length-1])&&(u[u.length-1]=u[u.length-1].sink),u.length>2)for(let g=1;g<u.length-1;g++)isDuplex(u[g])&&(u[g]=duplexPipelineFn(u[g]));return rawPipe(...u)};u.exports=pipe,u.exports.pipe=pipe,u.exports.rawPipe=rawPipe,u.exports.isIterable=isIterable,u.exports.isDuplex=isDuplex},61955:u=>{"use strict";let take=async function*(u,g){let S=0;if(!(g<1)){for await(let R of u)if(yield R,++S===g)return}};u.exports=take},70890:function(u,g,S){"use strict";let R=S(95204),{hasOwnProperty:D}=Object.prototype,{propertyIsEnumerable:C}=Object,defineProperty=(u,g,S)=>Object.defineProperty(u,g,{value:S,writable:!0,enumerable:!0,configurable:!0}),E=this,T={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=u=>{let g=[];for(let S in u)D.call(u,S)&&g.push(S);if(Object.getOwnPropertySymbols){let S=Object.getOwnPropertySymbols(u);for(let R of S)C.call(u,R)&&g.push(R)}return g};function clone(u){return Array.isArray(u)?cloneArray(u):R(u)?cloneOptionObject(u):u}function cloneArray(u){let g=u.slice(0,0);return getEnumerableOwnPropertyKeys(u).forEach(S=>{defineProperty(g,S,clone(u[S]))}),g}function cloneOptionObject(u){let g=null===Object.getPrototypeOf(u)?Object.create(null):{};return getEnumerableOwnPropertyKeys(u).forEach(S=>{defineProperty(g,S,clone(u[S]))}),g}let mergeKeys=(u,g,S,R)=>(S.forEach(S=>{void 0===g[S]&&R.ignoreUndefined||(S in u&&u[S]!==Object.getPrototypeOf(u)?defineProperty(u,S,merge(u[S],g[S],R)):defineProperty(u,S,clone(g[S])))}),u),concatArrays=(u,g,S)=>{let R=u.slice(0,0),C=0;return[u,g].forEach(g=>{let E=[];for(let S=0;S<g.length;S++)D.call(g,S)&&(E.push(String(S)),g===u?defineProperty(R,C++,g[S]):defineProperty(R,C++,clone(g[S])));R=mergeKeys(R,g,getEnumerableOwnPropertyKeys(g).filter(u=>!E.includes(u)),S)}),R};function merge(u,g,S){return S.concatArrays&&Array.isArray(u)&&Array.isArray(g)?concatArrays(u,g,S):R(g)&&R(u)?mergeKeys(u,g,getEnumerableOwnPropertyKeys(g),S):clone(g)}u.exports=function(...u){let g=merge(clone(T),this!==E&&this||{},T),S={_:{}};for(let D of u)if(void 0!==D){if(!R(D))throw TypeError("`"+D+"` is not an Option Object");S=merge(S,{_:D},g)}return S._}},88186:(u,g,S)=>{u.exports=minimatch,minimatch.Minimatch=Minimatch;var R=function(){try{return S(71017)}catch(u){}}()||{sep:"/"};minimatch.sep=R.sep;var D=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},C=S(35680),E={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},T="[^/]",A=T+"*?",B="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",I="(?:(?!(?:\\/|^)\\.).)*?",P=charSet("().*{}+?[]^$\\!");function charSet(u){return u.split("").reduce(function(u,g){return u[g]=!0,u},{})}var W=/\/+/;function filter(u,g){return g=g||{},function(S,R,D){return minimatch(S,u,g)}}function ext(u,g){g=g||{};var S={};return Object.keys(u).forEach(function(g){S[g]=u[g]}),Object.keys(g).forEach(function(u){S[u]=g[u]}),S}function minimatch(u,g,S){return assertValidPattern(g),S||(S={}),(!!S.nocomment||"#"!==g.charAt(0))&&new Minimatch(g,S).match(u)}function Minimatch(u,g){if(!(this instanceof Minimatch))return new Minimatch(u,g);assertValidPattern(u),g||(g={}),u=u.trim(),g.allowWindowsEscape||"/"===R.sep||(u=u.split(R.sep).join("/")),this.options=g,this.set=[],this.pattern=u,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!g.partial,this.make()}function make(){var u=this.pattern,g=this.options;if(!g.nocomment&&"#"===u.charAt(0)){this.comment=!0;return}if(!u){this.empty=!0;return}this.parseNegate();var S=this.globSet=this.braceExpand();g.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,S),S=this.globParts=S.map(function(u){return u.split(W)}),this.debug(this.pattern,S),S=S.map(function(u,g,S){return u.map(this.parse,this)},this),this.debug(this.pattern,S),S=S.filter(function(u){return -1===u.indexOf(!1)}),this.debug(this.pattern,S),this.set=S}function parseNegate(){var u=this.pattern,g=!1,S=this.options,R=0;if(!S.nonegate){for(var D=0,C=u.length;D<C&&"!"===u.charAt(D);D++)g=!g,R++;R&&(this.pattern=u.substr(R)),this.negate=g}}function braceExpand(u,g){return(g||(g=this instanceof Minimatch?this.options:{}),assertValidPattern(u=void 0===u?this.pattern:u),g.nobrace||!/\{(?:(?!\{).)*\}/.test(u))?[u]:C(u)}minimatch.filter=filter,minimatch.defaults=function(u){if(!u||"object"!=typeof u||!Object.keys(u).length)return minimatch;var g=minimatch,m=function(S,R,D){return g(S,R,ext(u,D))};return m.Minimatch=function(S,R){return new g.Minimatch(S,ext(u,R))},m.Minimatch.defaults=function(S){return g.defaults(ext(u,S)).Minimatch},m.filter=function(S,R){return g.filter(S,ext(u,R))},m.defaults=function(S){return g.defaults(ext(u,S))},m.makeRe=function(S,R){return g.makeRe(S,ext(u,R))},m.braceExpand=function(S,R){return g.braceExpand(S,ext(u,R))},m.match=function(S,R,D){return g.match(S,R,ext(u,D))},m},Minimatch.defaults=function(u){return minimatch.defaults(u).Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=make,Minimatch.prototype.parseNegate=parseNegate,minimatch.braceExpand=function(u,g){return braceExpand(u,g)},Minimatch.prototype.braceExpand=braceExpand;var L=65536,assertValidPattern=function(u){if("string"!=typeof u)throw TypeError("invalid pattern");if(u.length>L)throw TypeError("pattern is too long")};Minimatch.prototype.parse=parse;var U={};function parse(u,g){assertValidPattern(u);var S=this.options;if("**"===u){if(!S.noglobstar)return D;u="*"}if(""===u)return"";var R="",C=!!S.nocase,B=!1,I=[],W=[],L=!1,M=-1,$=-1,H="."===u.charAt(0)?"":S.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",Q=this;function clearStateChar(){if(G){switch(G){case"*":R+=A,C=!0;break;case"?":R+=T,C=!0;break;default:R+="\\"+G}Q.debug("clearStateChar %j %j",G,R),G=!1}}for(var G,Y,X=0,K=u.length;X<K&&(Y=u.charAt(X));X++){if(this.debug("%s	%s %s %j",u,X,R,Y),B&&P[Y]){R+="\\"+Y,B=!1;continue}switch(Y){case"/":return!1;case"\\":clearStateChar(),B=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",u,X,R,Y),L){this.debug("  in class"),"!"===Y&&X===$+1&&(Y="^"),R+=Y;continue}Q.debug("call clearStateChar %j",G),clearStateChar(),G=Y,S.noext&&clearStateChar();continue;case"(":if(L){R+="(";continue}if(!G){R+="\\(";continue}I.push({type:G,start:X-1,reStart:R.length,open:E[G].open,close:E[G].close}),R+="!"===G?"(?:(?!(?:":"(?:",this.debug("plType %j %j",G,R),G=!1;continue;case")":if(L||!I.length){R+="\\)";continue}clearStateChar(),C=!0;var J=I.pop();R+=J.close,"!"===J.type&&W.push(J),J.reEnd=R.length;continue;case"|":if(L||!I.length||B){R+="\\|",B=!1;continue}clearStateChar(),R+="|";continue;case"[":if(clearStateChar(),L){R+="\\"+Y;continue}L=!0,$=X,M=R.length,R+=Y;continue;case"]":if(X===$+1||!L){R+="\\"+Y,B=!1;continue}var Z=u.substring($+1,X);try{RegExp("["+Z+"]")}catch(u){var ee=this.parse(Z,U);R=R.substr(0,M)+"\\["+ee[0]+"\\]",C=C||ee[1],L=!1;continue}C=!0,L=!1,R+=Y;continue;default:clearStateChar(),B?B=!1:P[Y]&&!("^"===Y&&L)&&(R+="\\"),R+=Y}}for(L&&(Z=u.substr($+1),ee=this.parse(Z,U),R=R.substr(0,M)+"\\["+ee[0],C=C||ee[1]),J=I.pop();J;J=I.pop()){var et=R.slice(J.reStart+J.open.length);this.debug("setting tail",R,J),et=et.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(u,g,S){return S||(S="\\"),g+g+S+"|"}),this.debug("tail=%j\n   %s",et,et,J,R);var en="*"===J.type?A:"?"===J.type?T:"\\"+J.type;C=!0,R=R.slice(0,J.reStart)+en+"\\("+et}clearStateChar(),B&&(R+="\\\\");var eo=!1;switch(R.charAt(0)){case"[":case".":case"(":eo=!0}for(var ei=W.length-1;ei>-1;ei--){var ea=W[ei],es=R.slice(0,ea.reStart),eu=R.slice(ea.reStart,ea.reEnd-8),ec=R.slice(ea.reEnd-8,ea.reEnd),ed=R.slice(ea.reEnd);ec+=ed;var ef=es.split("(").length-1,eh=ed;for(X=0;X<ef;X++)eh=eh.replace(/\)[+*?]?/,"");var ep="";""===(ed=eh)&&g!==U&&(ep="$"),R=es+eu+ed+ep+ec}if(""!==R&&C&&(R="(?=.)"+R),eo&&(R=H+R),g===U)return[R,C];if(!C)return globUnescape(u);var em=S.nocase?"i":"";try{var ey=RegExp("^"+R+"$",em)}catch(u){return RegExp("$.")}return ey._glob=u,ey._src=R,ey}function makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;var u=this.set;if(!u.length)return this.regexp=!1,this.regexp;var g=this.options,S=g.noglobstar?A:g.dot?B:I,R=g.nocase?"i":"",C=u.map(function(u){return u.map(function(u){return u===D?S:"string"==typeof u?regExpEscape(u):u._src}).join("\\/")}).join("|");C="^(?:"+C+")$",this.negate&&(C="^(?!"+C+").*$");try{this.regexp=new RegExp(C,R)}catch(u){this.regexp=!1}return this.regexp}function globUnescape(u){return u.replace(/\\(.)/g,"$1")}function regExpEscape(u){return u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}minimatch.makeRe=function(u,g){return new Minimatch(u,g||{}).makeRe()},Minimatch.prototype.makeRe=makeRe,minimatch.match=function(u,g,S){S=S||{};var R=new Minimatch(g,S);return u=u.filter(function(u){return R.match(u)}),R.options.nonull&&!u.length&&u.push(g),u},Minimatch.prototype.match=function(u,g){if(void 0===g&&(g=this.partial),this.debug("match",u,this.pattern),this.comment)return!1;if(this.empty)return""===u;if("/"===u&&g)return!0;var S,D,C=this.options;"/"!==R.sep&&(u=u.split(R.sep).join("/")),u=u.split(W),this.debug(this.pattern,"split",u);var E=this.set;for(this.debug(this.pattern,"set",E),D=u.length-1;D>=0&&!(S=u[D]);D--);for(D=0;D<E.length;D++){var T=E[D],A=u;if(C.matchBase&&1===T.length&&(A=[S]),this.matchOne(A,T,g)){if(C.flipNegate)return!0;return!this.negate}}return!C.flipNegate&&this.negate},Minimatch.prototype.matchOne=function(u,g,S){var R=this.options;this.debug("matchOne",{this:this,file:u,pattern:g}),this.debug("matchOne",u.length,g.length);for(var C=0,E=0,T=u.length,A=g.length;C<T&&E<A;C++,E++){this.debug("matchOne loop");var B,I=g[E],P=u[C];if(this.debug(g,I,P),!1===I)return!1;if(I===D){this.debug("GLOBSTAR",[g,I,P]);var W=C,L=E+1;if(L===A){for(this.debug("** at the end");C<T;C++)if("."===u[C]||".."===u[C]||!R.dot&&"."===u[C].charAt(0))return!1;return!0}for(;W<T;){var U=u[W];if(this.debug("\nglobstar while",u,W,g,L,U),this.matchOne(u.slice(W),g.slice(L),S))return this.debug("globstar found match!",W,T,U),!0;if("."===U||".."===U||!R.dot&&"."===U.charAt(0)){this.debug("dot detected!",u,W,g,L);break}this.debug("globstar swallow a segment, and continue"),W++}if(S&&(this.debug("\n>>> no match, partial?",u,W,g,L),W===T))return!0;return!1}if("string"==typeof I?(B=P===I,this.debug("string match",I,P,B)):(B=P.match(I),this.debug("pattern match",I,P,B)),!B)return!1}if(C===T&&E===A)return!0;if(C===T)return S;if(E===A)return C===T-1&&""===u[C];throw Error("wtf?")}},63655:(u,g,S)=>{u.exports=S(49045)},49045:function(u,g){!function(S,R){"use strict";var D={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function _validBytes(u){if(!Array.isArray(u)&&!ArrayBuffer.isView(u))return!1;for(var g=0;g<u.length;g++)if(!Number.isInteger(u[g])||u[g]<0||u[g]>255)return!1;return!0}function _x86Multiply(u,g){return(65535&u)*g+(((u>>>16)*g&65535)<<16)}function _x86Rotl(u,g){return u<<g|u>>>32-g}function _x86Fmix(u){return u^=u>>>16,u=_x86Multiply(u,2246822507),u^=u>>>13,u=_x86Multiply(u,3266489909),u^=u>>>16}function _x64Add(u,g){u=[u[0]>>>16,65535&u[0],u[1]>>>16,65535&u[1]],g=[g[0]>>>16,65535&g[0],g[1]>>>16,65535&g[1]];var S=[0,0,0,0];return S[3]+=u[3]+g[3],S[2]+=S[3]>>>16,S[3]&=65535,S[2]+=u[2]+g[2],S[1]+=S[2]>>>16,S[2]&=65535,S[1]+=u[1]+g[1],S[0]+=S[1]>>>16,S[1]&=65535,S[0]+=u[0]+g[0],S[0]&=65535,[S[0]<<16|S[1],S[2]<<16|S[3]]}function _x64Multiply(u,g){u=[u[0]>>>16,65535&u[0],u[1]>>>16,65535&u[1]],g=[g[0]>>>16,65535&g[0],g[1]>>>16,65535&g[1]];var S=[0,0,0,0];return S[3]+=u[3]*g[3],S[2]+=S[3]>>>16,S[3]&=65535,S[2]+=u[2]*g[3],S[1]+=S[2]>>>16,S[2]&=65535,S[2]+=u[3]*g[2],S[1]+=S[2]>>>16,S[2]&=65535,S[1]+=u[1]*g[3],S[0]+=S[1]>>>16,S[1]&=65535,S[1]+=u[2]*g[2],S[0]+=S[1]>>>16,S[1]&=65535,S[1]+=u[3]*g[1],S[0]+=S[1]>>>16,S[1]&=65535,S[0]+=u[0]*g[3]+u[1]*g[2]+u[2]*g[1]+u[3]*g[0],S[0]&=65535,[S[0]<<16|S[1],S[2]<<16|S[3]]}function _x64Rotl(u,g){return 32==(g%=64)?[u[1],u[0]]:g<32?[u[0]<<g|u[1]>>>32-g,u[1]<<g|u[0]>>>32-g]:(g-=32,[u[1]<<g|u[0]>>>32-g,u[0]<<g|u[1]>>>32-g])}function _x64LeftShift(u,g){return 0==(g%=64)?u:g<32?[u[0]<<g|u[1]>>>32-g,u[1]<<g]:[u[1]<<g-32,0]}function _x64Xor(u,g){return[u[0]^g[0],u[1]^g[1]]}function _x64Fmix(u){return u=_x64Multiply(u=_x64Xor(u,[0,u[0]>>>1]),[4283543511,3981806797]),u=_x64Multiply(u=_x64Xor(u,[0,u[0]>>>1]),[3301882366,444984403]),u=_x64Xor(u,[0,u[0]>>>1])}D.x86.hash32=function(u,g){if(!D.inputValidation||_validBytes(u)){g=g||0;for(var S=u.length%4,R=u.length-S,C=g,E=0,T=3432918353,A=461845907,B=0;B<R;B+=4)E=_x86Rotl(E=_x86Multiply(E=u[B]|u[B+1]<<8|u[B+2]<<16|u[B+3]<<24,T),15),C^=E=_x86Multiply(E,A),C=_x86Multiply(C=_x86Rotl(C,13),5)+3864292196;switch(E=0,S){case 3:E^=u[B+2]<<16;case 2:E^=u[B+1]<<8;case 1:E^=u[B],E=_x86Rotl(E=_x86Multiply(E,T),15),C^=E=_x86Multiply(E,A)}return C^=u.length,(C=_x86Fmix(C))>>>0}},D.x86.hash128=function(u,g){if(!D.inputValidation||_validBytes(u)){g=g||0;for(var S=u.length%16,R=u.length-S,C=g,E=g,T=g,A=g,B=0,I=0,P=0,W=0,L=597399067,U=2869860233,M=951274213,$=2716044179,H=0;H<R;H+=16)B=u[H]|u[H+1]<<8|u[H+2]<<16|u[H+3]<<24,I=u[H+4]|u[H+5]<<8|u[H+6]<<16|u[H+7]<<24,P=u[H+8]|u[H+9]<<8|u[H+10]<<16|u[H+11]<<24,W=u[H+12]|u[H+13]<<8|u[H+14]<<16|u[H+15]<<24,B=_x86Rotl(B=_x86Multiply(B,L),15),C^=B=_x86Multiply(B,U),C=_x86Multiply(C=_x86Rotl(C,19)+E,5)+1444728091,I=_x86Rotl(I=_x86Multiply(I,U),16),E^=I=_x86Multiply(I,M),E=_x86Multiply(E=_x86Rotl(E,17)+T,5)+197830471,P=_x86Rotl(P=_x86Multiply(P,M),17),T^=P=_x86Multiply(P,$),T=_x86Multiply(T=_x86Rotl(T,15)+A,5)+2530024501,W=_x86Rotl(W=_x86Multiply(W,$),18),A^=W=_x86Multiply(W,L),A=_x86Multiply(A=_x86Rotl(A,13)+C,5)+850148119;switch(B=0,I=0,P=0,W=0,S){case 15:W^=u[H+14]<<16;case 14:W^=u[H+13]<<8;case 13:W^=u[H+12],W=_x86Rotl(W=_x86Multiply(W,$),18),A^=W=_x86Multiply(W,L);case 12:P^=u[H+11]<<24;case 11:P^=u[H+10]<<16;case 10:P^=u[H+9]<<8;case 9:P^=u[H+8],P=_x86Rotl(P=_x86Multiply(P,M),17),T^=P=_x86Multiply(P,$);case 8:I^=u[H+7]<<24;case 7:I^=u[H+6]<<16;case 6:I^=u[H+5]<<8;case 5:I^=u[H+4],I=_x86Rotl(I=_x86Multiply(I,U),16),E^=I=_x86Multiply(I,M);case 4:B^=u[H+3]<<24;case 3:B^=u[H+2]<<16;case 2:B^=u[H+1]<<8;case 1:B^=u[H],B=_x86Rotl(B=_x86Multiply(B,L),15),C^=B=_x86Multiply(B,U)}return C^=u.length,E^=u.length,T^=u.length,A^=u.length,C+=E+T+A,E+=C,T+=C,A+=C,C=_x86Fmix(C),E=_x86Fmix(E),T=_x86Fmix(T),A=_x86Fmix(A),C+=E+T+A,E+=C,T+=C,A+=C,("00000000"+(C>>>0).toString(16)).slice(-8)+("00000000"+(E>>>0).toString(16)).slice(-8)+("00000000"+(T>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)}},D.x64.hash128=function(u,g){if(!D.inputValidation||_validBytes(u)){g=g||0;for(var S=u.length%16,R=u.length-S,C=[0,g],E=[0,g],T=[0,0],A=[0,0],B=[2277735313,289559509],I=[1291169091,658871167],P=0;P<R;P+=16)T=[u[P+4]|u[P+5]<<8|u[P+6]<<16|u[P+7]<<24,u[P]|u[P+1]<<8|u[P+2]<<16|u[P+3]<<24],A=[u[P+12]|u[P+13]<<8|u[P+14]<<16|u[P+15]<<24,u[P+8]|u[P+9]<<8|u[P+10]<<16|u[P+11]<<24],T=_x64Rotl(T=_x64Multiply(T,B),31),C=_x64Add(C=_x64Rotl(C=_x64Xor(C,T=_x64Multiply(T,I)),27),E),C=_x64Add(_x64Multiply(C,[0,5]),[0,1390208809]),A=_x64Rotl(A=_x64Multiply(A,I),33),E=_x64Add(E=_x64Rotl(E=_x64Xor(E,A=_x64Multiply(A,B)),31),C),E=_x64Add(_x64Multiply(E,[0,5]),[0,944331445]);switch(T=[0,0],A=[0,0],S){case 15:A=_x64Xor(A,_x64LeftShift([0,u[P+14]],48));case 14:A=_x64Xor(A,_x64LeftShift([0,u[P+13]],40));case 13:A=_x64Xor(A,_x64LeftShift([0,u[P+12]],32));case 12:A=_x64Xor(A,_x64LeftShift([0,u[P+11]],24));case 11:A=_x64Xor(A,_x64LeftShift([0,u[P+10]],16));case 10:A=_x64Xor(A,_x64LeftShift([0,u[P+9]],8));case 9:A=_x64Rotl(A=_x64Multiply(A=_x64Xor(A,[0,u[P+8]]),I),33),E=_x64Xor(E,A=_x64Multiply(A,B));case 8:T=_x64Xor(T,_x64LeftShift([0,u[P+7]],56));case 7:T=_x64Xor(T,_x64LeftShift([0,u[P+6]],48));case 6:T=_x64Xor(T,_x64LeftShift([0,u[P+5]],40));case 5:T=_x64Xor(T,_x64LeftShift([0,u[P+4]],32));case 4:T=_x64Xor(T,_x64LeftShift([0,u[P+3]],24));case 3:T=_x64Xor(T,_x64LeftShift([0,u[P+2]],16));case 2:T=_x64Xor(T,_x64LeftShift([0,u[P+1]],8));case 1:T=_x64Rotl(T=_x64Multiply(T=_x64Xor(T,[0,u[P]]),B),31),C=_x64Xor(C,T=_x64Multiply(T,I))}return C=_x64Xor(C,[0,u.length]),C=_x64Add(C,E=_x64Xor(E,[0,u.length])),E=_x64Add(E,C),C=_x64Fmix(C),C=_x64Add(C,E=_x64Fmix(E)),E=_x64Add(E,C),("00000000"+(C[0]>>>0).toString(16)).slice(-8)+("00000000"+(C[1]>>>0).toString(16)).slice(-8)+("00000000"+(E[0]>>>0).toString(16)).slice(-8)+("00000000"+(E[1]>>>0).toString(16)).slice(-8)}},u.exports&&(g=u.exports=D),g.murmurHash3=D}(0)},61324:(u,g,S)=>{"use strict";var R;R={value:!0},Object.defineProperty(g,"$",{enumerable:!0,get:function(){return createServerReference}});let D=S(70391);function createServerReference(u){let{createServerReference:g}=S(12623);return g(u,D.callServer)}},53009:(u,g)=>{"use strict";var S;S={value:!0},S={enumerable:!0,get:function(){return createActionProxy}};let R=Symbol.for("react.server.reference");function createActionProxy(u,g,S,D){function bindImpl(u,...g){let S=this,newAction=async function(...u){return D?D(newAction.$$bound.concat(u)):S(...newAction.$$bound,...u)};for(let u of["$$typeof","$$id","$$FORM_ACTION"])newAction[u]=S[u];return newAction.$$bound=(S.$$bound||[]).concat(g),newAction.bind=bindImpl.bind(newAction),newAction}Object.defineProperties(S,{$$typeof:{value:R},$$id:{value:u},$$bound:{value:g},bind:{value:bindImpl}})}},57016:(u,g)=>{"use strict";var S;S={value:!0},Object.defineProperty(g,"createActionProxy",{enumerable:!0,get:function(){return createActionProxy}});let R=Symbol.for("react.server.reference");function createActionProxy(u,g,S,D){function bindImpl(u,...g){let S=this,newAction=async function(...u){return D?D(newAction.$$bound.concat(u)):S(...newAction.$$bound,...u)};for(let u of["$$typeof","$$id","$$FORM_ACTION"])newAction[u]=S[u];return newAction.$$bound=(S.$$bound||[]).concat(g),newAction.bind=bindImpl.bind(newAction),newAction}Object.defineProperties(S,{$$typeof:{value:R},$$id:{value:u},$$bound:{value:g},bind:{value:bindImpl}})}},96276:(u,g)=>{"use strict";var S;function ensureServerEntryExports(u){for(let g=0;g<u.length;g++){let S=u[g];if("function"!=typeof S)throw Error(`A "use server" file can only export async functions, found ${typeof S}.`)}}S={value:!0},Object.defineProperty(g,"ensureServerEntryExports",{enumerable:!0,get:function(){return ensureServerEntryExports}})},71856:(u,g,S)=>{"use strict";let R=S(18520),D=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];let AbortError=class AbortError extends Error{constructor(u){super(),u instanceof Error?(this.originalError=u,{message:u}=u):(this.originalError=Error(u),this.originalError.stack=this.stack),this.name="AbortError",this.message=u}};let decorateErrorWithCounts=(u,g,S)=>{let R=S.retries-(g-1);return u.attemptNumber=g,u.retriesLeft=R,u},isNetworkError=u=>D.includes(u),pRetry=(u,g)=>new Promise((S,D)=>{g={onFailedAttempt:()=>{},retries:10,...g};let C=R.operation(g);C.attempt(async R=>{try{S(await u(R))}catch(u){if(!(u instanceof Error)){D(TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));return}if(u instanceof AbortError)C.stop(),D(u.originalError);else if(u instanceof TypeError&&!isNetworkError(u.message))C.stop(),D(u);else{decorateErrorWithCounts(u,R,g);try{await g.onFailedAttempt(u)}catch(u){D(u);return}C.retry(u)||D(C.mainError())}}})});u.exports=pRetry,u.exports.default=pRetry,u.exports.AbortError=AbortError},51883:(u,g,S)=>{"use strict";u.exports=S(82985)},82985:(u,g,S)=>{"use strict";var R=g;function configure(){R.util._configure(),R.Writer._configure(R.BufferWriter),R.Reader._configure(R.BufferReader)}R.build="minimal",R.Writer=S(84353),R.BufferWriter=S(81978),R.Reader=S(95199),R.BufferReader=S(15213),R.util=S(18932),R.rpc=S(69226),R.roots=S(10182),R.configure=configure,configure()},95199:(u,g,S)=>{"use strict";u.exports=Reader;var R,D=S(18932),C=D.LongBits,E=D.utf8;function indexOutOfRange(u,g){return RangeError("index out of range: "+u.pos+" + "+(g||1)+" > "+u.len)}function Reader(u){this.buf=u,this.pos=0,this.len=u.length}var T="undefined"!=typeof Uint8Array?function(u){if(u instanceof Uint8Array||Array.isArray(u))return new Reader(u);throw Error("illegal buffer")}:function(u){if(Array.isArray(u))return new Reader(u);throw Error("illegal buffer")},create=function(){return D.Buffer?function(u){return(Reader.create=function(u){return D.Buffer.isBuffer(u)?new R(u):T(u)})(u)}:T};function readLongVarint(){var u=new C(0,0),g=0;if(this.len-this.pos>4){for(;g<4;++g)if(u.lo=(u.lo|(127&this.buf[this.pos])<<7*g)>>>0,this.buf[this.pos++]<128)return u;if(u.lo=(u.lo|(127&this.buf[this.pos])<<28)>>>0,u.hi=(u.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return u;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw indexOutOfRange(this);if(u.lo=(u.lo|(127&this.buf[this.pos])<<7*g)>>>0,this.buf[this.pos++]<128)return u}return u.lo=(u.lo|(127&this.buf[this.pos++])<<7*g)>>>0,u}if(this.len-this.pos>4){for(;g<5;++g)if(u.hi=(u.hi|(127&this.buf[this.pos])<<7*g+3)>>>0,this.buf[this.pos++]<128)return u}else for(;g<5;++g){if(this.pos>=this.len)throw indexOutOfRange(this);if(u.hi=(u.hi|(127&this.buf[this.pos])<<7*g+3)>>>0,this.buf[this.pos++]<128)return u}throw Error("invalid varint encoding")}function readFixed32_end(u,g){return(u[g-4]|u[g-3]<<8|u[g-2]<<16|u[g-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new C(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create(),Reader.prototype._slice=D.Array.prototype.subarray||D.Array.prototype.slice,Reader.prototype.uint32=function(){var u=4294967295;return function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return u}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var u=this.uint32();return u>>>1^-(1&u)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var u=D.float.readFloatLE(this.buf,this.pos);return this.pos+=4,u},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var u=D.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,u},Reader.prototype.bytes=function(){var u=this.uint32(),g=this.pos,S=this.pos+u;if(S>this.len)throw indexOutOfRange(this,u);return(this.pos+=u,Array.isArray(this.buf))?this.buf.slice(g,S):g===S?new this.buf.constructor(0):this._slice.call(this.buf,g,S)},Reader.prototype.string=function(){var u=this.bytes();return E.read(u,0,u.length)},Reader.prototype.skip=function(u){if("number"==typeof u){if(this.pos+u>this.len)throw indexOutOfRange(this,u);this.pos+=u}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(u){switch(u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(u=7&this.uint32());)this.skipType(u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+u+" at offset "+this.pos)}return this},Reader._configure=function(u){R=u,Reader.create=create(),R._configure();var g=D.Long?"toLong":"toNumber";D.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[g](!1)},uint64:function(){return readLongVarint.call(this)[g](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[g](!1)},fixed64:function(){return readFixed64.call(this)[g](!0)},sfixed64:function(){return readFixed64.call(this)[g](!1)}})}},15213:(u,g,S)=>{"use strict";u.exports=BufferReader;var R=S(95199);(BufferReader.prototype=Object.create(R.prototype)).constructor=BufferReader;var D=S(18932);function BufferReader(u){R.call(this,u)}BufferReader._configure=function(){D.Buffer&&(BufferReader.prototype._slice=D.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+u,this.len))},BufferReader._configure()},10182:u=>{"use strict";u.exports={}},69226:(u,g,S)=>{"use strict";g.Service=S(12741)},12741:(u,g,S)=>{"use strict";u.exports=Service;var R=S(18932);function Service(u,g,S){if("function"!=typeof u)throw TypeError("rpcImpl must be a function");R.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=!!g,this.responseDelimited=!!S}(Service.prototype=Object.create(R.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function rpcCall(u,g,S,D,C){if(!D)throw TypeError("request must be specified");var E=this;if(!C)return R.asPromise(rpcCall,E,u,g,S,D);if(!E.rpcImpl){setTimeout(function(){C(Error("already ended"))},0);return}try{return E.rpcImpl(u,g[E.requestDelimited?"encodeDelimited":"encode"](D).finish(),function(g,R){if(g)return E.emit("error",g,u),C(g);if(null===R){E.end(!0);return}if(!(R instanceof S))try{R=S[E.responseDelimited?"decodeDelimited":"decode"](R)}catch(g){return E.emit("error",g,u),C(g)}return E.emit("data",R,u),C(null,R)})}catch(g){E.emit("error",g,u),setTimeout(function(){C(g)},0);return}},Service.prototype.end=function(u){return this.rpcImpl&&(u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},41168:(u,g,S)=>{"use strict";u.exports=LongBits;var R=S(18932);function LongBits(u,g){this.lo=u>>>0,this.hi=g>>>0}var D=LongBits.zero=new LongBits(0,0);D.toNumber=function(){return 0},D.zzEncode=D.zzDecode=function(){return this},D.length=function(){return 1};var C=LongBits.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";LongBits.fromNumber=function(u){if(0===u)return D;var g=u<0;g&&(u=-u);var S=u>>>0,R=(u-S)/4294967296>>>0;return g&&(R=~R>>>0,S=~S>>>0,++S>4294967295&&(S=0,++R>4294967295&&(R=0))),new LongBits(S,R)},LongBits.from=function(u){if("number"==typeof u)return LongBits.fromNumber(u);if(R.isString(u)){if(!R.Long)return LongBits.fromNumber(parseInt(u,10));u=R.Long.fromString(u)}return u.low||u.high?new LongBits(u.low>>>0,u.high>>>0):D},LongBits.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var g=~this.lo+1>>>0,S=~this.hi>>>0;return g||(S=S+1>>>0),-(g+4294967296*S)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(u){return R.Long?new R.Long(0|this.lo,0|this.hi,!!u):{low:0|this.lo,high:0|this.hi,unsigned:!!u}};var E=String.prototype.charCodeAt;LongBits.fromHash=function(u){return u===C?D:new LongBits((E.call(u,0)|E.call(u,1)<<8|E.call(u,2)<<16|E.call(u,3)<<24)>>>0,(E.call(u,4)|E.call(u,5)<<8|E.call(u,6)<<16|E.call(u,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},LongBits.prototype.zzDecode=function(){var u=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},LongBits.prototype.length=function(){var u=this.lo,g=(this.lo>>>28|this.hi<<4)>>>0,S=this.hi>>>24;return 0===S?0===g?u<16384?u<128?1:2:u<2097152?3:4:g<16384?g<128?5:6:g<2097152?7:8:S<128?9:10}},18932:function(u,g,S){"use strict";var R=g;function merge(u,g,S){for(var R=Object.keys(g),D=0;D<R.length;++D)void 0!==u[R[D]]&&S||(u[R[D]]=g[R[D]]);return u}function newError(u){function CustomError(u,g){if(!(this instanceof CustomError))return new CustomError(u,g);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,CustomError):Object.defineProperty(this,"stack",{value:Error().stack||""}),g&&merge(this,g)}return(CustomError.prototype=Object.create(Error.prototype)).constructor=CustomError,Object.defineProperty(CustomError.prototype,"name",{get:function(){return u}}),CustomError.prototype.toString=function(){return this.name+": "+this.message},CustomError}R.asPromise=S(18670),R.base64=S(36009),R.EventEmitter=S(50107),R.float=S(71188),R.inquire=S(28031),R.utf8=S(67148),R.pool=S(14314),R.LongBits=S(41168),R.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),R.global=R.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,R.emptyArray=Object.freeze?Object.freeze([]):[],R.emptyObject=Object.freeze?Object.freeze({}):{},R.isInteger=Number.isInteger||function(u){return"number"==typeof u&&isFinite(u)&&Math.floor(u)===u},R.isString=function(u){return"string"==typeof u||u instanceof String},R.isObject=function(u){return u&&"object"==typeof u},R.isset=R.isSet=function(u,g){var S=u[g];return!!(null!=S&&u.hasOwnProperty(g))&&("object"!=typeof S||(Array.isArray(S)?S.length:Object.keys(S).length)>0)},R.Buffer=function(){try{var u=R.inquire("buffer").Buffer;return u.prototype.utf8Write?u:null}catch(u){return null}}(),R._Buffer_from=null,R._Buffer_allocUnsafe=null,R.newBuffer=function(u){return"number"==typeof u?R.Buffer?R._Buffer_allocUnsafe(u):new R.Array(u):R.Buffer?R._Buffer_from(u):"undefined"==typeof Uint8Array?u:new Uint8Array(u)},R.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,R.Long=R.global.dcodeIO&&R.global.dcodeIO.Long||R.global.Long||R.inquire("long"),R.key2Re=/^true|false|0|1$/,R.key32Re=/^-?(?:0|[1-9][0-9]*)$/,R.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,R.longToHash=function(u){return u?R.LongBits.from(u).toHash():R.LongBits.zeroHash},R.longFromHash=function(u,g){var S=R.LongBits.fromHash(u);return R.Long?R.Long.fromBits(S.lo,S.hi,g):S.toNumber(!!g)},R.merge=merge,R.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)},R.newError=newError,R.ProtocolError=newError("ProtocolError"),R.oneOfGetter=function(u){for(var g={},S=0;S<u.length;++S)g[u[S]]=1;return function(){for(var u=Object.keys(this),S=u.length-1;S>-1;--S)if(1===g[u[S]]&&void 0!==this[u[S]]&&null!==this[u[S]])return u[S]}},R.oneOfSetter=function(u){return function(g){for(var S=0;S<u.length;++S)u[S]!==g&&delete this[u[S]]}},R.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},R._configure=function(){var u=R.Buffer;if(!u){R._Buffer_from=R._Buffer_allocUnsafe=null;return}R._Buffer_from=u.from!==Uint8Array.from&&u.from||function(g,S){return new u(g,S)},R._Buffer_allocUnsafe=u.allocUnsafe||function(g){return new u(g)}}},84353:(u,g,S)=>{"use strict";u.exports=Writer;var R,D=S(18932),C=D.LongBits,E=D.base64,T=D.utf8;function Op(u,g,S){this.fn=u,this.len=g,this.next=void 0,this.val=S}function noop(){}function State(u){this.head=u.head,this.tail=u.tail,this.len=u.len,this.next=u.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return D.Buffer?function(){return(Writer.create=function(){return new R})()}:function(){return new Writer}};function writeByte(u,g,S){g[S]=255&u}function writeVarint32(u,g,S){for(;u>127;)g[S++]=127&u|128,u>>>=7;g[S]=u}function VarintOp(u,g){this.len=u,this.next=void 0,this.val=g}function writeVarint64(u,g,S){for(;u.hi;)g[S++]=127&u.lo|128,u.lo=(u.lo>>>7|u.hi<<25)>>>0,u.hi>>>=7;for(;u.lo>127;)g[S++]=127&u.lo|128,u.lo=u.lo>>>7;g[S++]=u.lo}function writeFixed32(u,g,S){g[S]=255&u,g[S+1]=u>>>8&255,g[S+2]=u>>>16&255,g[S+3]=u>>>24}Writer.create=create(),Writer.alloc=function(u){return new D.Array(u)},D.Array!==Array&&(Writer.alloc=D.pool(Writer.alloc,D.Array.prototype.subarray)),Writer.prototype._push=function(u,g,S){return this.tail=this.tail.next=new Op(u,g,S),this.len+=g,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(u){return this.len+=(this.tail=this.tail.next=new VarintOp((u>>>=0)<128?1:u<16384?2:u<2097152?3:u<268435456?4:5,u)).len,this},Writer.prototype.int32=function(u){return u<0?this._push(writeVarint64,10,C.fromNumber(u)):this.uint32(u)},Writer.prototype.sint32=function(u){return this.uint32((u<<1^u>>31)>>>0)},Writer.prototype.uint64=function(u){var g=C.from(u);return this._push(writeVarint64,g.length(),g)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(u){var g=C.from(u).zzEncode();return this._push(writeVarint64,g.length(),g)},Writer.prototype.bool=function(u){return this._push(writeByte,1,u?1:0)},Writer.prototype.fixed32=function(u){return this._push(writeFixed32,4,u>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(u){var g=C.from(u);return this._push(writeFixed32,4,g.lo)._push(writeFixed32,4,g.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(u){return this._push(D.float.writeFloatLE,4,u)},Writer.prototype.double=function(u){return this._push(D.float.writeDoubleLE,8,u)};var A=D.Array.prototype.set?function(u,g,S){g.set(u,S)}:function(u,g,S){for(var R=0;R<u.length;++R)g[S+R]=u[R]};Writer.prototype.bytes=function(u){var g=u.length>>>0;if(!g)return this._push(writeByte,1,0);if(D.isString(u)){var S=Writer.alloc(g=E.length(u));E.decode(u,S,0),u=S}return this.uint32(g)._push(A,g,u)},Writer.prototype.string=function(u){var g=T.length(u);return g?this.uint32(g)._push(T.write,g,u):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var u=this.head,g=this.tail,S=this.len;return this.reset().uint32(S),S&&(this.tail.next=u.next,this.tail=g,this.len+=S),this},Writer.prototype.finish=function(){for(var u=this.head.next,g=this.constructor.alloc(this.len),S=0;u;)u.fn(u.val,g,S),S+=u.len,u=u.next;return g},Writer._configure=function(u){R=u,Writer.create=create(),R._configure()}},81978:(u,g,S)=>{"use strict";u.exports=BufferWriter;var R=S(84353);(BufferWriter.prototype=Object.create(R.prototype)).constructor=BufferWriter;var D=S(18932);function BufferWriter(){R.call(this)}function writeStringBuffer(u,g,S){u.length<40?D.utf8.write(u,g,S):g.utf8Write?g.utf8Write(u,S):g.write(u,S)}BufferWriter._configure=function(){BufferWriter.alloc=D._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=D.Buffer&&D.Buffer.prototype instanceof Uint8Array&&"set"===D.Buffer.prototype.set.name?function(u,g,S){g.set(u,S)}:function(u,g,S){if(u.copy)u.copy(g,S,0,u.length);else for(var R=0;R<u.length;)g[S++]=u[R++]}},BufferWriter.prototype.bytes=function(u){D.isString(u)&&(u=D._Buffer_from(u,"base64"));var g=u.length>>>0;return this.uint32(g),g&&this._push(BufferWriter.writeBytesBuffer,g,u),this},BufferWriter.prototype.string=function(u){var g=D.Buffer.byteLength(u);return this.uint32(g),g&&this._push(writeStringBuffer,g,u),this},BufferWriter._configure()},77308:(u,g,S)=>{let{instantiateSync:R}=S(28332),D=S(57147);async function loadWebAssembly(u={}){return loadWebAssembly.supported?R(D.readFileSync(__dirname+"/../dist/rabin.wasm"),u):null}loadWebAssembly.supported="undefined"!=typeof WebAssembly,u.exports=loadWebAssembly},67893:(u,g,S)=>{let R=S(99894),D=S(77308),create=async(u,g,S,C,E)=>{let T=await D();return new R(T,u,g,S,C,E)};u.exports={Rabin:R,create}},99894:u=>{let Rabin=class Rabin{constructor(u,g=12,S=8192,R=32768,D=64,C){this.bits=g,this.min=S,this.max=R,this.asModule=u,this.rabin=new u.Rabin(g,S,R,D,C),this.polynomial=C}fingerprint(u){let{__retain:g,__release:S,__allocArray:R,__getInt32Array:D,Int32Array_ID:C,Uint8Array_ID:E}=this.asModule,T=new Int32Array(Math.ceil(u.length/this.min)),A=g(R(C,T)),B=g(R(E,u)),I=this.rabin.fingerprint(B,A),P=D(I);S(B),S(A);let W=P.indexOf(0);return W>=0?P.subarray(0,W):P}};u.exports=Rabin},18520:(u,g,S)=>{u.exports=S(47095)},47095:(u,g,S)=>{var R=S(5020);g.operation=function(u){var S=g.timeouts(u);return new R(S,{forever:u&&(u.forever||u.retries===1/0),unref:u&&u.unref,maxRetryTime:u&&u.maxRetryTime})},g.timeouts=function(u){if(u instanceof Array)return[].concat(u);var g={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var S in u)g[S]=u[S];if(g.minTimeout>g.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var R=[],D=0;D<g.retries;D++)R.push(this.createTimeout(D,g));return u&&u.forever&&!R.length&&R.push(this.createTimeout(D,g)),R.sort(function(u,g){return u-g}),R},g.createTimeout=function(u,g){return Math.min(Math.round((g.randomize?Math.random()+1:1)*Math.max(g.minTimeout,1)*Math.pow(g.factor,u)),g.maxTimeout)},g.wrap=function(u,S,R){if(S instanceof Array&&(R=S,S=null),!R)for(var D in R=[],u)"function"==typeof u[D]&&R.push(D);for(var C=0;C<R.length;C++){var E=R[C],T=u[E];u[E]=(function(R){var D=g.operation(S),C=Array.prototype.slice.call(arguments,1),E=C.pop();C.push(function(u){D.retry(u)||(u&&(arguments[0]=D.mainError()),E.apply(this,arguments))}),D.attempt(function(){R.apply(u,C)})}).bind(u,T),u[E].options=S}}},5020:u=>{function RetryOperation(u,g){"boolean"==typeof g&&(g={forever:g}),this._originalTimeouts=JSON.parse(JSON.stringify(u)),this._timeouts=u,this._options=g||{},this._maxRetryTime=g&&g.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}u.exports=RetryOperation,RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(u){if(this._timeout&&clearTimeout(this._timeout),!u)return!1;var g=new Date().getTime();if(u&&g-this._operationStart>=this._maxRetryTime)return this._errors.push(u),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(u);var S=this._timeouts.shift();if(void 0===S){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),S=this._cachedTimeouts.slice(-1)}var R=this;return this._timer=setTimeout(function(){R._attempts++,R._operationTimeoutCb&&(R._timeout=setTimeout(function(){R._operationTimeoutCb(R._attempts)},R._operationTimeout),R._options.unref&&R._timeout.unref()),R._fn(R._attempts)},S),this._options.unref&&this._timer.unref(),!0},RetryOperation.prototype.attempt=function(u,g){this._fn=u,g&&(g.timeout&&(this._operationTimeout=g.timeout),g.cb&&(this._operationTimeoutCb=g.cb));var S=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){S._operationTimeoutCb()},S._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(u){console.log("Using RetryOperation.try() is deprecated"),this.attempt(u)},RetryOperation.prototype.start=function(u){console.log("Using RetryOperation.start() is deprecated"),this.attempt(u)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var u={},g=null,S=0,R=0;R<this._errors.length;R++){var D=this._errors[R],C=D.message,E=(u[C]||0)+1;u[C]=E,E>=S&&(g=D,S=E)}return g}},50334:u=>{"use strict";let g=7;function popCountReduce(u,g){return u+popCount(g)}function popCount(u){let g=u;return g-=g>>1&1431655765,((g=(858993459&g)+(g>>2&858993459))+(g>>4)&252645135)*16843009>>24}function sortInternal(u,g){return u[0]-g[0]}function valueOnly(u){return u[1]}u.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(u,g){let S=this._internalPositionFor(u,!1);if(void 0===g)-1!==S&&(this._unsetInternalPos(S),this._unsetBit(u),this._changedLength=!0,this._changedData=!0);else{let R=!1;-1===S?(S=this._data.length,this._setBit(u),this._changedData=!0):R=!0,this._setInternalPos(S,u,g,R),this._changedLength=!0}}unset(u){this.set(u,void 0)}get(u){this._sortData();let g=this._internalPositionFor(u,!0);if(-1!==g)return this._data[g][1]}push(u){return this.set(this.length,u),this.length}get length(){if(this._sortData(),this._changedLength){let u=this._data[this._data.length-1];this._length=u?u[0]+1:0,this._changedLength=!1}return this._length}forEach(u){let g=0;for(;g<this.length;)u(this.get(g),g,this),g++}map(u){let g=0,S=Array(this.length);for(;g<this.length;)S[g]=u(this.get(g),g,this),g++;return S}reduce(u,g){let S=0,R=g;for(;S<this.length;){let g=this.get(S);R=u(R,g,S),S++}return R}find(u){let g=0,S,R;for(;g<this.length&&!S;)S=u(R=this.get(g)),g++;return S?R:void 0}_internalPositionFor(u,S){let R=this._bytePosFor(u,S);if(R>=this._bitArrays.length)return -1;let D=this._bitArrays[R],C=u-R*g,E=(D&1<<C)>0;if(!E)return -1;let T=this._bitArrays.slice(0,R).reduce(popCountReduce,0),A=~(4294967295<<C+1),B=popCount(D&A),I=T+B-1;return I}_bytePosFor(u,S){let R=Math.floor(u/g),D=R+1;for(;!S&&this._bitArrays.length<D;)this._bitArrays.push(0);return R}_setBit(u){let S=this._bytePosFor(u,!1);this._bitArrays[S]|=1<<u-S*g}_unsetBit(u){let S=this._bytePosFor(u,!1);this._bitArrays[S]&=~(1<<u-S*g)}_setInternalPos(u,g,S,R){let D=this._data,C=[g,S];if(R)this._sortData(),D[u]=C;else{if(D.length){if(D[D.length-1][0]>=g)D.push(C);else if(D[0][0]<=g)D.unshift(C);else{let u=Math.round(D.length/2);this._data=D.slice(0,u).concat(C).concat(D.slice(u))}}else this._data.push(C);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(u){this._data.splice(u,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){let u;let g=[],S=8,R=0,D=0,C=this._bitArrays.slice();for(;C.length||R;){0===R&&(u=C.shift(),R=7);let E=Math.min(R,S),T=~(255<<E),A=u&T;D|=A<<8-S,u>>>=E,R-=E,(S-=E)&&(R||C.length)||(g.push(D),D=0,S=8)}for(var E=g.length-1;E>0;E--){let u=g[E];if(0===u)g.pop();else break}return g}compactArray(){return this._sortData(),this._data.map(valueOnly)}}},10275:(u,g)=>{"use strict";function throttledQueue(u,g,S){void 0===S&&(S=!1),S&&(g/=u,u=1);var R,D=[],C=0,E=0,dequeue=function(){var S=C+g,T=Date.now();if(T<S){void 0!==R&&clearTimeout(R),R=setTimeout(dequeue,S-T);return}C=T,E=0;for(var A=0,B=D.splice(0,u);A<B.length;A++){var I=B[A];E++,I()}R=D.length?setTimeout(dequeue,g):void 0};return function(S){return new Promise(function(T,A){var callback=function(){return Promise.resolve().then(S).then(T).catch(A)},B=Date.now();void 0===R&&B-C>g&&(C=B,E=0),E++<u?callback():(D.push(callback),void 0===R&&(R=setTimeout(dequeue,C+g-B)))})}}Object.defineProperty(g,"__esModule",{value:!0}),u.exports=throttledQueue,g.default=throttledQueue},57920:u=>{u.exports=read;var g=128,S=127;function read(u,R){var D,C=0,R=R||0,E=0,T=R,A=u.length;do{if(T>=A||E>49)throw read.bytes=0,RangeError("Could not decode varint");D=u[T++],C+=E<28?(D&S)<<E:(D&S)*Math.pow(2,E),E+=7}while(D>=g);return read.bytes=T-R,C}},1684:u=>{u.exports=encode;var g=128,S=-128,R=2147483648;function encode(u,D,C){if(Number.MAX_SAFE_INTEGER&&u>Number.MAX_SAFE_INTEGER)throw encode.bytes=0,RangeError("Could not encode varint");D=D||[];for(var E=C=C||0;u>=R;)D[C++]=255&u|g,u/=128;for(;u&S;)D[C++]=255&u|g,u>>>=7;return D[C]=0|u,encode.bytes=C-E+1,D}},22782:(u,g,S)=>{u.exports={encode:S(1684),decode:S(57920),encodingLength:S(1151)}},1151:u=>{var g=128,S=16384,R=2097152,D=268435456,C=34359738368,E=4398046511104,T=562949953421312,A=72057594037927940,B=0x7fffffffffffffff;u.exports=function(u){return u<g?1:u<S?2:u<R?3:u<D?4:u<C?5:u<E?6:u<T?7:u<A?8:u<B?9:10}},7856:function(u,g){!function(u,S){S(g)}(0,function(u){"use strict";var g,S,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(u){return"Symbol("+u+")"};function noop(){}var D=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}();function typeIsObject(u){return"object"==typeof u&&null!==u||"function"==typeof u}var C=noop,E=Promise,T=Promise.prototype.then,A=Promise.resolve.bind(E),B=Promise.reject.bind(E);function newPromise(u){return new E(u)}function promiseResolvedWith(u){return A(u)}function promiseRejectedWith(u){return B(u)}function PerformPromiseThen(u,g,S){return T.call(u,g,S)}function uponPromise(u,g,S){PerformPromiseThen(PerformPromiseThen(u,g,S),void 0,C)}function uponFulfillment(u,g){uponPromise(u,g)}function uponRejection(u,g){uponPromise(u,void 0,g)}function transformPromiseWith(u,g,S){return PerformPromiseThen(u,g,S)}function setPromiseIsHandledToTrue(u){PerformPromiseThen(u,void 0,C)}var I=function(){var u=D&&D.queueMicrotask;if("function"==typeof u)return u;var g=promiseResolvedWith(void 0);return function(u){return PerformPromiseThen(g,u)}}();function reflectCall(u,g,S){if("function"!=typeof u)throw TypeError("Argument is not a function");return Function.prototype.apply.call(u,g,S)}function promiseCall(u,g,S){try{return promiseResolvedWith(reflectCall(u,g,S))}catch(u){return promiseRejectedWith(u)}}var P=16384,W=function(){function SimpleQueue(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),SimpleQueue.prototype.push=function(u){var g=this._back,S=g;g._elements.length===P-1&&(S={_elements:[],_next:void 0}),g._elements.push(u),S!==g&&(this._back=S,g._next=S),++this._size},SimpleQueue.prototype.shift=function(){var u=this._front,g=u,S=this._cursor,R=S+1,D=u._elements,C=D[S];return R===P&&(g=u._next,R=0),--this._size,this._cursor=R,u!==g&&(this._front=g),D[S]=void 0,C},SimpleQueue.prototype.forEach=function(u){for(var g=this._cursor,S=this._front,R=S._elements;(g!==R.length||void 0!==S._next)&&(g!==R.length||(R=(S=S._next)._elements,g=0,0!==R.length));)u(R[g]),++g},SimpleQueue.prototype.peek=function(){var u=this._front,g=this._cursor;return u._elements[g]},SimpleQueue}();function ReadableStreamReaderGenericInitialize(u,g){u._ownerReadableStream=g,g._reader=u,"readable"===g._state?defaultReaderClosedPromiseInitialize(u):"closed"===g._state?defaultReaderClosedPromiseInitializeAsResolved(u):defaultReaderClosedPromiseInitializeAsRejected(u,g._storedError)}function ReadableStreamReaderGenericCancel(u,g){return ReadableStreamCancel(u._ownerReadableStream,g)}function ReadableStreamReaderGenericRelease(u){"readable"===u._ownerReadableStream._state?defaultReaderClosedPromiseReject(u,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(u,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),u._ownerReadableStream._reader=void 0,u._ownerReadableStream=void 0}function readerLockException(u){return TypeError("Cannot "+u+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(u){u._closedPromise=newPromise(function(g,S){u._closedPromise_resolve=g,u._closedPromise_reject=S})}function defaultReaderClosedPromiseInitializeAsRejected(u,g){defaultReaderClosedPromiseInitialize(u),defaultReaderClosedPromiseReject(u,g)}function defaultReaderClosedPromiseInitializeAsResolved(u){defaultReaderClosedPromiseInitialize(u),defaultReaderClosedPromiseResolve(u)}function defaultReaderClosedPromiseReject(u,g){void 0!==u._closedPromise_reject&&(setPromiseIsHandledToTrue(u._closedPromise),u._closedPromise_reject(g),u._closedPromise_resolve=void 0,u._closedPromise_reject=void 0)}function defaultReaderClosedPromiseResetToRejected(u,g){defaultReaderClosedPromiseInitializeAsRejected(u,g)}function defaultReaderClosedPromiseResolve(u){void 0!==u._closedPromise_resolve&&(u._closedPromise_resolve(void 0),u._closedPromise_resolve=void 0,u._closedPromise_reject=void 0)}var L=R("[[AbortSteps]]"),U=R("[[ErrorSteps]]"),M=R("[[CancelSteps]]"),$=R("[[PullSteps]]"),H=Number.isFinite||function(u){return"number"==typeof u&&isFinite(u)},Q=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};function isDictionary(u){return"object"==typeof u||"function"==typeof u}function assertDictionary(u,g){if(void 0!==u&&!isDictionary(u))throw TypeError(g+" is not an object.")}function assertFunction(u,g){if("function"!=typeof u)throw TypeError(g+" is not a function.")}function isObject(u){return"object"==typeof u&&null!==u||"function"==typeof u}function assertObject(u,g){if(!isObject(u))throw TypeError(g+" is not an object.")}function assertRequiredArgument(u,g,S){if(void 0===u)throw TypeError("Parameter "+g+" is required in '"+S+"'.")}function assertRequiredField(u,g,S){if(void 0===u)throw TypeError(g+" is required in '"+S+"'.")}function convertUnrestrictedDouble(u){return Number(u)}function censorNegativeZero(u){return 0===u?0:u}function integerPart(u){return censorNegativeZero(Q(u))}function convertUnsignedLongLongWithEnforceRange(u,g){var S=0,R=Number.MAX_SAFE_INTEGER,D=Number(u);if(!H(D=censorNegativeZero(D)))throw TypeError(g+" is not a finite number");if((D=integerPart(D))<S||D>R)throw TypeError(g+" is outside the accepted range of "+S+" to "+R+", inclusive");return H(D)&&0!==D?D:0}function assertReadableStream(u,g){if(!IsReadableStream(u))throw TypeError(g+" is not a ReadableStream.")}function AcquireReadableStreamDefaultReader(u){return new G(u)}function ReadableStreamAddReadRequest(u,g){u._reader._readRequests.push(g)}function ReadableStreamFulfillReadRequest(u,g,S){var R=u._reader._readRequests.shift();S?R._closeSteps():R._chunkSteps(g)}function ReadableStreamGetNumReadRequests(u){return u._reader._readRequests.length}function ReadableStreamHasDefaultReader(u){var g=u._reader;return!!(void 0!==g&&IsReadableStreamDefaultReader(g))}var G=function(){function ReadableStreamDefaultReader(u){if(assertRequiredArgument(u,1,"ReadableStreamDefaultReader"),assertReadableStream(u,"First parameter"),IsReadableStreamLocked(u))throw TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,u),this._readRequests=new W}return Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamDefaultReader.prototype.cancel=function(u){return(void 0===u&&(u=void 0),IsReadableStreamDefaultReader(this))?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,u):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var u,g,S=newPromise(function(S,R){u=S,g=R});return ReadableStreamDefaultReaderRead(this,{_chunkSteps:function(g){return u({value:g,done:!1})},_closeSteps:function(){return u({value:void 0,done:!0})},_errorSteps:function(u){return g(u)}}),S},ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader}();function IsReadableStreamDefaultReader(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_readRequests"))&&u instanceof G}function ReadableStreamDefaultReaderRead(u,g){var S=u._ownerReadableStream;S._disturbed=!0,"closed"===S._state?g._closeSteps():"errored"===S._state?g._errorSteps(S._storedError):S._readableStreamController[$](g)}function defaultReaderBrandCheckException(u){return TypeError("ReadableStreamDefaultReader.prototype."+u+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(G.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(G.prototype,R.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"==typeof R.asyncIterator&&((g={})[R.asyncIterator]=function(){return this},Object.defineProperty(S=g,R.asyncIterator,{enumerable:!1}));var Y=function(){function ReadableStreamAsyncIteratorImpl(u,g){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=u,this._preventCancel=g}return ReadableStreamAsyncIteratorImpl.prototype.next=function(){var u=this,nextSteps=function(){return u._nextSteps()};return this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise},ReadableStreamAsyncIteratorImpl.prototype.return=function(u){var g=this,returnSteps=function(){return g._returnSteps(u)};return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()},ReadableStreamAsyncIteratorImpl.prototype._nextSteps=function(){var u,g,S=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var R=this._reader;if(void 0===R._ownerReadableStream)return promiseRejectedWith(readerLockException("iterate"));var D=newPromise(function(S,R){u=S,g=R}),C={_chunkSteps:function(g){S._ongoingPromise=void 0,I(function(){return u({value:g,done:!1})})},_closeSteps:function(){S._ongoingPromise=void 0,S._isFinished=!0,ReadableStreamReaderGenericRelease(R),u({value:void 0,done:!0})},_errorSteps:function(u){S._ongoingPromise=void 0,S._isFinished=!0,ReadableStreamReaderGenericRelease(R),g(u)}};return ReadableStreamDefaultReaderRead(R,C),D},ReadableStreamAsyncIteratorImpl.prototype._returnSteps=function(u){if(this._isFinished)return Promise.resolve({value:u,done:!0});this._isFinished=!0;var g=this._reader;if(void 0===g._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var S=ReadableStreamReaderGenericCancel(g,u);return ReadableStreamReaderGenericRelease(g),transformPromiseWith(S,function(){return{value:u,done:!0}})}return ReadableStreamReaderGenericRelease(g),promiseResolvedWith({value:u,done:!0})},ReadableStreamAsyncIteratorImpl}(),X={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(u){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(u):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};function AcquireReadableStreamAsyncIterator(u,g){var S=AcquireReadableStreamDefaultReader(u),R=new Y(S,g),D=Object.create(X);return D._asyncIteratorImpl=R,D}function IsReadableStreamAsyncIterator(u){if(!typeIsObject(u)||!Object.prototype.hasOwnProperty.call(u,"_asyncIteratorImpl"))return!1;try{return u._asyncIteratorImpl instanceof Y}catch(u){return!1}}function streamAsyncIteratorBrandCheckException(u){return TypeError("ReadableStreamAsyncIterator."+u+" can only be used on a ReadableSteamAsyncIterator")}void 0!==S&&Object.setPrototypeOf(X,S);var K=Number.isNaN||function(u){return u!=u};function CreateArrayFromList(u){return u.slice()}function CopyDataBlockBytes(u,g,S,R,D){new Uint8Array(u).set(new Uint8Array(S,R,D),g)}function TransferArrayBuffer(u){return u}function IsDetachedBuffer(u){return!1}function ArrayBufferSlice(u,g,S){if(u.slice)return u.slice(g,S);var R=S-g,D=new ArrayBuffer(R);return CopyDataBlockBytes(D,0,u,g,R),D}function IsNonNegativeNumber(u){return!("number"!=typeof u||K(u))&&!(u<0)}function CloneAsUint8Array(u){var g=ArrayBufferSlice(u.buffer,u.byteOffset,u.byteOffset+u.byteLength);return new Uint8Array(g)}function DequeueValue(u){var g=u._queue.shift();return u._queueTotalSize-=g.size,u._queueTotalSize<0&&(u._queueTotalSize=0),g.value}function EnqueueValueWithSize(u,g,S){if(!IsNonNegativeNumber(S)||S===1/0)throw RangeError("Size must be a finite, non-NaN, non-negative number.");u._queue.push({value:g,size:S}),u._queueTotalSize+=S}function PeekQueueValue(u){return u._queue.peek().value}function ResetQueue(u){u._queue=new W,u._queueTotalSize=0}var J=function(){function ReadableStreamBYOBRequest(){throw TypeError("Illegal constructor")}return Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0}),ReadableStreamBYOBRequest.prototype.respond=function(u){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(u,1,"respond"),u=convertUnsignedLongLongWithEnforceRange(u,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,u)},ReadableStreamBYOBRequest.prototype.respondWithNewView=function(u){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(u,1,"respondWithNewView"),!ArrayBuffer.isView(u))throw TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");IsDetachedBuffer(u.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,u)},ReadableStreamBYOBRequest}();Object.defineProperties(J.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(J.prototype,R.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Z=function(){function ReadableByteStreamController(){throw TypeError("Illegal constructor")}return Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableByteStreamController.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");var u=this._controlledReadableByteStream._state;if("readable"!==u)throw TypeError("The stream (in "+u+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController.prototype.enqueue=function(u){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(u,1,"enqueue"),!ArrayBuffer.isView(u))throw TypeError("chunk must be an array buffer view");if(0===u.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===u.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");var g=this._controlledReadableByteStream._state;if("readable"!==g)throw TypeError("The stream (in "+g+" state) is not in the readable state and cannot be enqueued to");ReadableByteStreamControllerEnqueue(this,u)},ReadableByteStreamController.prototype.error=function(u){if(void 0===u&&(u=void 0),!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,u)},ReadableByteStreamController.prototype[M]=function(u){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);var g=this._cancelAlgorithm(u);return ReadableByteStreamControllerClearAlgorithms(this),g},ReadableByteStreamController.prototype[$]=function(u){var g=this._controlledReadableByteStream;if(this._queueTotalSize>0){var S=this._queue.shift();this._queueTotalSize-=S.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var R=new Uint8Array(S.buffer,S.byteOffset,S.byteLength);u._chunkSteps(R);return}var D=this._autoAllocateChunkSize;if(void 0!==D){var C=void 0;try{C=new ArrayBuffer(D)}catch(g){u._errorSteps(g);return}var E={buffer:C,bufferByteLength:D,byteOffset:0,byteLength:D,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(E)}ReadableStreamAddReadRequest(g,u),ReadableByteStreamControllerCallPullIfNeeded(this)},ReadableByteStreamController}();function IsReadableByteStreamController(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_controlledReadableByteStream"))&&u instanceof Z}function IsReadableStreamBYOBRequest(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_associatedReadableByteStreamController"))&&u instanceof J}function ReadableByteStreamControllerCallPullIfNeeded(u){if(ReadableByteStreamControllerShouldCallPull(u)){if(u._pulling){u._pullAgain=!0;return}u._pulling=!0,uponPromise(u._pullAlgorithm(),function(){u._pulling=!1,u._pullAgain&&(u._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(u))},function(g){ReadableByteStreamControllerError(u,g)})}}function ReadableByteStreamControllerClearPendingPullIntos(u){ReadableByteStreamControllerInvalidateBYOBRequest(u),u._pendingPullIntos=new W}function ReadableByteStreamControllerCommitPullIntoDescriptor(u,g){var S=!1;"closed"===u._state&&(S=!0);var R=ReadableByteStreamControllerConvertPullIntoDescriptor(g);"default"===g.readerType?ReadableStreamFulfillReadRequest(u,R,S):ReadableStreamFulfillReadIntoRequest(u,R,S)}function ReadableByteStreamControllerConvertPullIntoDescriptor(u){var g=u.bytesFilled,S=u.elementSize;return new u.viewConstructor(u.buffer,u.byteOffset,g/S)}function ReadableByteStreamControllerEnqueueChunkToQueue(u,g,S,R){u._queue.push({buffer:g,byteOffset:S,byteLength:R}),u._queueTotalSize+=R}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(u,g){var S=g.elementSize,R=g.bytesFilled-g.bytesFilled%S,D=Math.min(u._queueTotalSize,g.byteLength-g.bytesFilled),C=g.bytesFilled+D,E=C-C%S,T=D,A=!1;E>R&&(T=E-g.bytesFilled,A=!0);for(var B=u._queue;T>0;){var I=B.peek(),P=Math.min(T,I.byteLength),W=g.byteOffset+g.bytesFilled;CopyDataBlockBytes(g.buffer,W,I.buffer,I.byteOffset,P),I.byteLength===P?B.shift():(I.byteOffset+=P,I.byteLength-=P),u._queueTotalSize-=P,ReadableByteStreamControllerFillHeadPullIntoDescriptor(u,P,g),T-=P}return A}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(u,g,S){S.bytesFilled+=g}function ReadableByteStreamControllerHandleQueueDrain(u){0===u._queueTotalSize&&u._closeRequested?(ReadableByteStreamControllerClearAlgorithms(u),ReadableStreamClose(u._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(u)}function ReadableByteStreamControllerInvalidateBYOBRequest(u){null!==u._byobRequest&&(u._byobRequest._associatedReadableByteStreamController=void 0,u._byobRequest._view=null,u._byobRequest=null)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(u){for(;u._pendingPullIntos.length>0;){if(0===u._queueTotalSize)return;var g=u._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(u,g)&&(ReadableByteStreamControllerShiftPendingPullInto(u),ReadableByteStreamControllerCommitPullIntoDescriptor(u._controlledReadableByteStream,g))}}function ReadableByteStreamControllerPullInto(u,g,S){var R=u._controlledReadableByteStream,D=1;g.constructor!==DataView&&(D=g.constructor.BYTES_PER_ELEMENT);var C=g.constructor,E=TransferArrayBuffer(g.buffer),T={buffer:E,bufferByteLength:E.byteLength,byteOffset:g.byteOffset,byteLength:g.byteLength,bytesFilled:0,elementSize:D,viewConstructor:C,readerType:"byob"};if(u._pendingPullIntos.length>0){u._pendingPullIntos.push(T),ReadableStreamAddReadIntoRequest(R,S);return}if("closed"===R._state){var A=new C(T.buffer,T.byteOffset,0);S._closeSteps(A);return}if(u._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(u,T)){var B=ReadableByteStreamControllerConvertPullIntoDescriptor(T);ReadableByteStreamControllerHandleQueueDrain(u),S._chunkSteps(B);return}if(u._closeRequested){var I=TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(u,I),S._errorSteps(I);return}}u._pendingPullIntos.push(T),ReadableStreamAddReadIntoRequest(R,S),ReadableByteStreamControllerCallPullIfNeeded(u)}function ReadableByteStreamControllerRespondInClosedState(u,g){var S=u._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(S))for(;ReadableStreamGetNumReadIntoRequests(S)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(S,ReadableByteStreamControllerShiftPendingPullInto(u))}function ReadableByteStreamControllerRespondInReadableState(u,g,S){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(u,g,S),!(S.bytesFilled<S.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(u);var R=S.bytesFilled%S.elementSize;if(R>0){var D=S.byteOffset+S.bytesFilled,C=ArrayBufferSlice(S.buffer,D-R,D);ReadableByteStreamControllerEnqueueChunkToQueue(u,C,0,C.byteLength)}S.bytesFilled-=R,ReadableByteStreamControllerCommitPullIntoDescriptor(u._controlledReadableByteStream,S),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(u)}}function ReadableByteStreamControllerRespondInternal(u,g){var S=u._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(u),"closed"===u._controlledReadableByteStream._state?ReadableByteStreamControllerRespondInClosedState(u):ReadableByteStreamControllerRespondInReadableState(u,g,S),ReadableByteStreamControllerCallPullIfNeeded(u)}function ReadableByteStreamControllerShiftPendingPullInto(u){return u._pendingPullIntos.shift()}function ReadableByteStreamControllerShouldCallPull(u){var g=u._controlledReadableByteStream;return"readable"===g._state&&!u._closeRequested&&!!u._started&&!!(ReadableStreamHasDefaultReader(g)&&ReadableStreamGetNumReadRequests(g)>0||ReadableStreamHasBYOBReader(g)&&ReadableStreamGetNumReadIntoRequests(g)>0||ReadableByteStreamControllerGetDesiredSize(u)>0)}function ReadableByteStreamControllerClearAlgorithms(u){u._pullAlgorithm=void 0,u._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(u){var g=u._controlledReadableByteStream;if(!u._closeRequested&&"readable"===g._state){if(u._queueTotalSize>0){u._closeRequested=!0;return}if(u._pendingPullIntos.length>0&&u._pendingPullIntos.peek().bytesFilled>0){var S=TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(u,S),S}ReadableByteStreamControllerClearAlgorithms(u),ReadableStreamClose(g)}}function ReadableByteStreamControllerEnqueue(u,g){var S=u._controlledReadableByteStream;if(!u._closeRequested&&"readable"===S._state){var R=g.buffer,D=g.byteOffset,C=g.byteLength,E=TransferArrayBuffer(R);if(u._pendingPullIntos.length>0){var T=u._pendingPullIntos.peek();IsDetachedBuffer(T.buffer),T.buffer=TransferArrayBuffer(T.buffer)}ReadableByteStreamControllerInvalidateBYOBRequest(u),ReadableStreamHasDefaultReader(S)?0===ReadableStreamGetNumReadRequests(S)?ReadableByteStreamControllerEnqueueChunkToQueue(u,E,D,C):(u._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(u),ReadableStreamFulfillReadRequest(S,new Uint8Array(E,D,C),!1)):ReadableStreamHasBYOBReader(S)?(ReadableByteStreamControllerEnqueueChunkToQueue(u,E,D,C),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(u)):ReadableByteStreamControllerEnqueueChunkToQueue(u,E,D,C),ReadableByteStreamControllerCallPullIfNeeded(u)}}function ReadableByteStreamControllerError(u,g){var S=u._controlledReadableByteStream;"readable"===S._state&&(ReadableByteStreamControllerClearPendingPullIntos(u),ResetQueue(u),ReadableByteStreamControllerClearAlgorithms(u),ReadableStreamError(S,g))}function ReadableByteStreamControllerGetBYOBRequest(u){if(null===u._byobRequest&&u._pendingPullIntos.length>0){var g=u._pendingPullIntos.peek(),S=new Uint8Array(g.buffer,g.byteOffset+g.bytesFilled,g.byteLength-g.bytesFilled),R=Object.create(J.prototype);SetUpReadableStreamBYOBRequest(R,u,S),u._byobRequest=R}return u._byobRequest}function ReadableByteStreamControllerGetDesiredSize(u){var g=u._controlledReadableByteStream._state;return"errored"===g?null:"closed"===g?0:u._strategyHWM-u._queueTotalSize}function ReadableByteStreamControllerRespond(u,g){var S=u._pendingPullIntos.peek();if("closed"===u._controlledReadableByteStream._state){if(0!==g)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===g)throw TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(S.bytesFilled+g>S.byteLength)throw RangeError("bytesWritten out of range")}S.buffer=TransferArrayBuffer(S.buffer),ReadableByteStreamControllerRespondInternal(u,g)}function ReadableByteStreamControllerRespondWithNewView(u,g){var S=u._pendingPullIntos.peek();if("closed"===u._controlledReadableByteStream._state){if(0!==g.byteLength)throw TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===g.byteLength)throw TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(S.byteOffset+S.bytesFilled!==g.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(S.bufferByteLength!==g.buffer.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");if(S.bytesFilled+g.byteLength>S.byteLength)throw RangeError("The region specified by view is larger than byobRequest");var R=g.byteLength;S.buffer=TransferArrayBuffer(g.buffer),ReadableByteStreamControllerRespondInternal(u,R)}function SetUpReadableByteStreamController(u,g,S,R,D,C,E){g._controlledReadableByteStream=u,g._pullAgain=!1,g._pulling=!1,g._byobRequest=null,g._queue=g._queueTotalSize=void 0,ResetQueue(g),g._closeRequested=!1,g._started=!1,g._strategyHWM=C,g._pullAlgorithm=R,g._cancelAlgorithm=D,g._autoAllocateChunkSize=E,g._pendingPullIntos=new W,u._readableStreamController=g,uponPromise(promiseResolvedWith(S()),function(){g._started=!0,ReadableByteStreamControllerCallPullIfNeeded(g)},function(u){ReadableByteStreamControllerError(g,u)})}function SetUpReadableByteStreamControllerFromUnderlyingSource(u,g,S){var R=Object.create(Z.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==g.start&&(startAlgorithm=function(){return g.start(R)}),void 0!==g.pull&&(pullAlgorithm=function(){return g.pull(R)}),void 0!==g.cancel&&(cancelAlgorithm=function(u){return g.cancel(u)});var D=g.autoAllocateChunkSize;if(0===D)throw TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(u,R,startAlgorithm,pullAlgorithm,cancelAlgorithm,S,D)}function SetUpReadableStreamBYOBRequest(u,g,S){u._associatedReadableByteStreamController=g,u._view=S}function byobRequestBrandCheckException(u){return TypeError("ReadableStreamBYOBRequest.prototype."+u+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(u){return TypeError("ReadableByteStreamController.prototype."+u+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(u){return new ee(u)}function ReadableStreamAddReadIntoRequest(u,g){u._reader._readIntoRequests.push(g)}function ReadableStreamFulfillReadIntoRequest(u,g,S){var R=u._reader._readIntoRequests.shift();S?R._closeSteps(g):R._chunkSteps(g)}function ReadableStreamGetNumReadIntoRequests(u){return u._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(u){var g=u._reader;return!!(void 0!==g&&IsReadableStreamBYOBReader(g))}Object.defineProperties(Z.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(Z.prototype,R.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var ee=function(){function ReadableStreamBYOBReader(u){if(assertRequiredArgument(u,1,"ReadableStreamBYOBReader"),assertReadableStream(u,"First parameter"),IsReadableStreamLocked(u))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(u._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,u),this._readIntoRequests=new W}return Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamBYOBReader.prototype.cancel=function(u){return(void 0===u&&(u=void 0),IsReadableStreamBYOBReader(this))?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,u):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader.prototype.read=function(u){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(u))return promiseRejectedWith(TypeError("view must be an array buffer view"));if(0===u.byteLength)return promiseRejectedWith(TypeError("view must have non-zero byteLength"));if(0===u.buffer.byteLength)return promiseRejectedWith(TypeError("view's buffer must have non-zero byteLength"));if(IsDetachedBuffer(u.buffer),void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var g,S,R=newPromise(function(u,R){g=u,S=R});return ReadableStreamBYOBReaderRead(this,u,{_chunkSteps:function(u){return g({value:u,done:!1})},_closeSteps:function(u){return g({value:u,done:!0})},_errorSteps:function(u){return S(u)}}),R},ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader}();function IsReadableStreamBYOBReader(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_readIntoRequests"))&&u instanceof ee}function ReadableStreamBYOBReaderRead(u,g,S){var R=u._ownerReadableStream;R._disturbed=!0,"errored"===R._state?S._errorSteps(R._storedError):ReadableByteStreamControllerPullInto(R._readableStreamController,g,S)}function byobReaderBrandCheckException(u){return TypeError("ReadableStreamBYOBReader.prototype."+u+" can only be used on a ReadableStreamBYOBReader")}function ExtractHighWaterMark(u,g){var S=u.highWaterMark;if(void 0===S)return g;if(K(S)||S<0)throw RangeError("Invalid highWaterMark");return S}function ExtractSizeAlgorithm(u){return u.size||function(){return 1}}function convertQueuingStrategy(u,g){assertDictionary(u,g);var S=null==u?void 0:u.highWaterMark,R=null==u?void 0:u.size;return{highWaterMark:void 0===S?void 0:convertUnrestrictedDouble(S),size:void 0===R?void 0:convertQueuingStrategySize(R,g+" has member 'size' that")}}function convertQueuingStrategySize(u,g){return assertFunction(u,g),function(g){return convertUnrestrictedDouble(u(g))}}function convertUnderlyingSink(u,g){assertDictionary(u,g);var S=null==u?void 0:u.abort,R=null==u?void 0:u.close,D=null==u?void 0:u.start,C=null==u?void 0:u.type,E=null==u?void 0:u.write;return{abort:void 0===S?void 0:convertUnderlyingSinkAbortCallback(S,u,g+" has member 'abort' that"),close:void 0===R?void 0:convertUnderlyingSinkCloseCallback(R,u,g+" has member 'close' that"),start:void 0===D?void 0:convertUnderlyingSinkStartCallback(D,u,g+" has member 'start' that"),write:void 0===E?void 0:convertUnderlyingSinkWriteCallback(E,u,g+" has member 'write' that"),type:C}}function convertUnderlyingSinkAbortCallback(u,g,S){return assertFunction(u,S),function(S){return promiseCall(u,g,[S])}}function convertUnderlyingSinkCloseCallback(u,g,S){return assertFunction(u,S),function(){return promiseCall(u,g,[])}}function convertUnderlyingSinkStartCallback(u,g,S){return assertFunction(u,S),function(S){return reflectCall(u,g,[S])}}function convertUnderlyingSinkWriteCallback(u,g,S){return assertFunction(u,S),function(S,R){return promiseCall(u,g,[S,R])}}function assertWritableStream(u,g){if(!IsWritableStream(u))throw TypeError(g+" is not a WritableStream.")}function isAbortSignal(u){if("object"!=typeof u||null===u)return!1;try{return"boolean"==typeof u.aborted}catch(u){return!1}}Object.defineProperties(ee.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ee.prototype,R.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var et="function"==typeof AbortController;function createAbortController(){if(et)return new AbortController}var en=function(){function WritableStream(u,g){void 0===u&&(u={}),void 0===g&&(g={}),void 0===u?u=null:assertObject(u,"First parameter");var S=convertQueuingStrategy(g,"Second parameter"),R=convertUnderlyingSink(u,"First parameter");if(InitializeWritableStream(this),void 0!==R.type)throw RangeError("Invalid type is specified");var D=ExtractSizeAlgorithm(S);SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,R,ExtractHighWaterMark(S,1),D)}return Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0}),WritableStream.prototype.abort=function(u){return(void 0===u&&(u=void 0),IsWritableStream(this))?IsWritableStreamLocked(this)?promiseRejectedWith(TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,u):promiseRejectedWith(streamBrandCheckException$2("abort"))},WritableStream.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException$2("close"))},WritableStream.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream}();function AcquireWritableStreamDefaultWriter(u){return new eo(u)}function CreateWritableStream(u,g,S,R,D,C){void 0===D&&(D=1),void 0===C&&(C=function(){return 1});var E=Object.create(en.prototype);return InitializeWritableStream(E),SetUpWritableStreamDefaultController(E,Object.create(ea.prototype),u,g,S,R,D,C),E}function InitializeWritableStream(u){u._state="writable",u._storedError=void 0,u._writer=void 0,u._writableStreamController=void 0,u._writeRequests=new W,u._inFlightWriteRequest=void 0,u._closeRequest=void 0,u._inFlightCloseRequest=void 0,u._pendingAbortRequest=void 0,u._backpressure=!1}function IsWritableStream(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_writableStreamController"))&&u instanceof en}function IsWritableStreamLocked(u){return void 0!==u._writer}function WritableStreamAbort(u,g){if("closed"===u._state||"errored"===u._state)return promiseResolvedWith(void 0);u._writableStreamController._abortReason=g,null===(S=u._writableStreamController._abortController)||void 0===S||S.abort();var S,R=u._state;if("closed"===R||"errored"===R)return promiseResolvedWith(void 0);if(void 0!==u._pendingAbortRequest)return u._pendingAbortRequest._promise;var D=!1;"erroring"===R&&(D=!0,g=void 0);var C=newPromise(function(S,R){u._pendingAbortRequest={_promise:void 0,_resolve:S,_reject:R,_reason:g,_wasAlreadyErroring:D}});return u._pendingAbortRequest._promise=C,D||WritableStreamStartErroring(u,g),C}function WritableStreamClose(u){var g=u._state;if("closed"===g||"errored"===g)return promiseRejectedWith(TypeError("The stream (in "+g+" state) is not in the writable state and cannot be closed"));var S=newPromise(function(g,S){var R={_resolve:g,_reject:S};u._closeRequest=R}),R=u._writer;return void 0!==R&&u._backpressure&&"writable"===g&&defaultWriterReadyPromiseResolve(R),WritableStreamDefaultControllerClose(u._writableStreamController),S}function WritableStreamAddWriteRequest(u){return newPromise(function(g,S){var R={_resolve:g,_reject:S};u._writeRequests.push(R)})}function WritableStreamDealWithRejection(u,g){if("writable"===u._state){WritableStreamStartErroring(u,g);return}WritableStreamFinishErroring(u)}function WritableStreamStartErroring(u,g){var S=u._writableStreamController;u._state="erroring",u._storedError=g;var R=u._writer;void 0!==R&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(R,g),!WritableStreamHasOperationMarkedInFlight(u)&&S._started&&WritableStreamFinishErroring(u)}function WritableStreamFinishErroring(u){u._state="errored",u._writableStreamController[U]();var g=u._storedError;if(u._writeRequests.forEach(function(u){u._reject(g)}),u._writeRequests=new W,void 0===u._pendingAbortRequest){WritableStreamRejectCloseAndClosedPromiseIfNeeded(u);return}var S=u._pendingAbortRequest;if(u._pendingAbortRequest=void 0,S._wasAlreadyErroring){S._reject(g),WritableStreamRejectCloseAndClosedPromiseIfNeeded(u);return}uponPromise(u._writableStreamController[L](S._reason),function(){S._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(u)},function(g){S._reject(g),WritableStreamRejectCloseAndClosedPromiseIfNeeded(u)})}function WritableStreamFinishInFlightWrite(u){u._inFlightWriteRequest._resolve(void 0),u._inFlightWriteRequest=void 0}function WritableStreamFinishInFlightWriteWithError(u,g){u._inFlightWriteRequest._reject(g),u._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(u,g)}function WritableStreamFinishInFlightClose(u){u._inFlightCloseRequest._resolve(void 0),u._inFlightCloseRequest=void 0,"erroring"===u._state&&(u._storedError=void 0,void 0!==u._pendingAbortRequest&&(u._pendingAbortRequest._resolve(),u._pendingAbortRequest=void 0)),u._state="closed";var g=u._writer;void 0!==g&&defaultWriterClosedPromiseResolve(g)}function WritableStreamFinishInFlightCloseWithError(u,g){u._inFlightCloseRequest._reject(g),u._inFlightCloseRequest=void 0,void 0!==u._pendingAbortRequest&&(u._pendingAbortRequest._reject(g),u._pendingAbortRequest=void 0),WritableStreamDealWithRejection(u,g)}function WritableStreamCloseQueuedOrInFlight(u){return void 0!==u._closeRequest||void 0!==u._inFlightCloseRequest}function WritableStreamHasOperationMarkedInFlight(u){return void 0!==u._inFlightWriteRequest||void 0!==u._inFlightCloseRequest}function WritableStreamMarkCloseRequestInFlight(u){u._inFlightCloseRequest=u._closeRequest,u._closeRequest=void 0}function WritableStreamMarkFirstWriteRequestInFlight(u){u._inFlightWriteRequest=u._writeRequests.shift()}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(u){void 0!==u._closeRequest&&(u._closeRequest._reject(u._storedError),u._closeRequest=void 0);var g=u._writer;void 0!==g&&defaultWriterClosedPromiseReject(g,u._storedError)}function WritableStreamUpdateBackpressure(u,g){var S=u._writer;void 0!==S&&g!==u._backpressure&&(g?defaultWriterReadyPromiseReset(S):defaultWriterReadyPromiseResolve(S)),u._backpressure=g}Object.defineProperties(en.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(en.prototype,R.toStringTag,{value:"WritableStream",configurable:!0});var eo=function(){function WritableStreamDefaultWriter(u){if(assertRequiredArgument(u,1,"WritableStreamDefaultWriter"),assertWritableStream(u,"First parameter"),IsWritableStreamLocked(u))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=u,u._writer=this;var g=u._state;if("writable"===g)!WritableStreamCloseQueuedOrInFlight(u)&&u._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if("erroring"===g)defaultWriterReadyPromiseInitializeAsRejected(this,u._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===g)defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var S=u._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,S),defaultWriterClosedPromiseInitializeAsRejected(this,S)}}return Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0}),WritableStreamDefaultWriter.prototype.abort=function(u){return(void 0===u&&(u=void 0),IsWritableStreamDefaultWriter(this))?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,u):promiseRejectedWith(defaultWriterBrandCheckException("abort"))},WritableStreamDefaultWriter.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var u=this._ownerWritableStream;return void 0===u?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(u)?promiseRejectedWith(TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter.prototype.write=function(u){return(void 0===u&&(u=void 0),IsWritableStreamDefaultWriter(this))?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,u):promiseRejectedWith(defaultWriterBrandCheckException("write"))},WritableStreamDefaultWriter}();function IsWritableStreamDefaultWriter(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_ownerWritableStream"))&&u instanceof eo}function WritableStreamDefaultWriterAbort(u,g){return WritableStreamAbort(u._ownerWritableStream,g)}function WritableStreamDefaultWriterClose(u){return WritableStreamClose(u._ownerWritableStream)}function WritableStreamDefaultWriterCloseWithErrorPropagation(u){var g=u._ownerWritableStream,S=g._state;return WritableStreamCloseQueuedOrInFlight(g)||"closed"===S?promiseResolvedWith(void 0):"errored"===S?promiseRejectedWith(g._storedError):WritableStreamDefaultWriterClose(u)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(u,g){"pending"===u._closedPromiseState?defaultWriterClosedPromiseReject(u,g):defaultWriterClosedPromiseResetToRejected(u,g)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(u,g){"pending"===u._readyPromiseState?defaultWriterReadyPromiseReject(u,g):defaultWriterReadyPromiseResetToRejected(u,g)}function WritableStreamDefaultWriterGetDesiredSize(u){var g=u._ownerWritableStream,S=g._state;return"errored"===S||"erroring"===S?null:"closed"===S?0:WritableStreamDefaultControllerGetDesiredSize(g._writableStreamController)}function WritableStreamDefaultWriterRelease(u){var g=u._ownerWritableStream,S=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(u,S),WritableStreamDefaultWriterEnsureClosedPromiseRejected(u,S),g._writer=void 0,u._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(u,g){var S=u._ownerWritableStream,R=S._writableStreamController,D=WritableStreamDefaultControllerGetChunkSize(R,g);if(S!==u._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var C=S._state;if("errored"===C)return promiseRejectedWith(S._storedError);if(WritableStreamCloseQueuedOrInFlight(S)||"closed"===C)return promiseRejectedWith(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===C)return promiseRejectedWith(S._storedError);var E=WritableStreamAddWriteRequest(S);return WritableStreamDefaultControllerWrite(R,g,D),E}Object.defineProperties(eo.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(eo.prototype,R.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var ei={},ea=function(){function WritableStreamDefaultController(){throw TypeError("Illegal constructor")}return Object.defineProperty(WritableStreamDefaultController.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultController.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(void 0===this._abortController)throw TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),WritableStreamDefaultController.prototype.error=function(u){if(void 0===u&&(u=void 0),!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,u)},WritableStreamDefaultController.prototype[L]=function(u){var g=this._abortAlgorithm(u);return WritableStreamDefaultControllerClearAlgorithms(this),g},WritableStreamDefaultController.prototype[U]=function(){ResetQueue(this)},WritableStreamDefaultController}();function IsWritableStreamDefaultController(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_controlledWritableStream"))&&u instanceof ea}function SetUpWritableStreamDefaultController(u,g,S,R,D,C,E,T){g._controlledWritableStream=u,u._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,ResetQueue(g),g._abortReason=void 0,g._abortController=createAbortController(),g._started=!1,g._strategySizeAlgorithm=T,g._strategyHWM=E,g._writeAlgorithm=R,g._closeAlgorithm=D,g._abortAlgorithm=C,WritableStreamUpdateBackpressure(u,WritableStreamDefaultControllerGetBackpressure(g)),uponPromise(promiseResolvedWith(S()),function(){g._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(g)},function(S){g._started=!0,WritableStreamDealWithRejection(u,S)})}function SetUpWritableStreamDefaultControllerFromUnderlyingSink(u,g,S,R){var D=Object.create(ea.prototype),startAlgorithm=function(){},writeAlgorithm=function(){return promiseResolvedWith(void 0)},closeAlgorithm=function(){return promiseResolvedWith(void 0)},abortAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==g.start&&(startAlgorithm=function(){return g.start(D)}),void 0!==g.write&&(writeAlgorithm=function(u){return g.write(u,D)}),void 0!==g.close&&(closeAlgorithm=function(){return g.close()}),void 0!==g.abort&&(abortAlgorithm=function(u){return g.abort(u)}),SetUpWritableStreamDefaultController(u,D,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,S,R)}function WritableStreamDefaultControllerClearAlgorithms(u){u._writeAlgorithm=void 0,u._closeAlgorithm=void 0,u._abortAlgorithm=void 0,u._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerClose(u){EnqueueValueWithSize(u,ei,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(u)}function WritableStreamDefaultControllerGetChunkSize(u,g){try{return u._strategySizeAlgorithm(g)}catch(g){return WritableStreamDefaultControllerErrorIfNeeded(u,g),1}}function WritableStreamDefaultControllerGetDesiredSize(u){return u._strategyHWM-u._queueTotalSize}function WritableStreamDefaultControllerWrite(u,g,S){try{EnqueueValueWithSize(u,g,S)}catch(g){WritableStreamDefaultControllerErrorIfNeeded(u,g);return}var R=u._controlledWritableStream;WritableStreamCloseQueuedOrInFlight(R)||"writable"!==R._state||WritableStreamUpdateBackpressure(R,WritableStreamDefaultControllerGetBackpressure(u)),WritableStreamDefaultControllerAdvanceQueueIfNeeded(u)}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(u){var g=u._controlledWritableStream;if(u._started&&void 0===g._inFlightWriteRequest){if("erroring"===g._state){WritableStreamFinishErroring(g);return}if(0!==u._queue.length){var S=PeekQueueValue(u);S===ei?WritableStreamDefaultControllerProcessClose(u):WritableStreamDefaultControllerProcessWrite(u,S)}}}function WritableStreamDefaultControllerErrorIfNeeded(u,g){"writable"===u._controlledWritableStream._state&&WritableStreamDefaultControllerError(u,g)}function WritableStreamDefaultControllerProcessClose(u){var g=u._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(g),DequeueValue(u);var S=u._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(u),uponPromise(S,function(){WritableStreamFinishInFlightClose(g)},function(u){WritableStreamFinishInFlightCloseWithError(g,u)})}function WritableStreamDefaultControllerProcessWrite(u,g){var S=u._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(S),uponPromise(u._writeAlgorithm(g),function(){WritableStreamFinishInFlightWrite(S);var g=S._state;DequeueValue(u),WritableStreamCloseQueuedOrInFlight(S)||"writable"!==g||WritableStreamUpdateBackpressure(S,WritableStreamDefaultControllerGetBackpressure(u)),WritableStreamDefaultControllerAdvanceQueueIfNeeded(u)},function(g){"writable"===S._state&&WritableStreamDefaultControllerClearAlgorithms(u),WritableStreamFinishInFlightWriteWithError(S,g)})}function WritableStreamDefaultControllerGetBackpressure(u){return 0>=WritableStreamDefaultControllerGetDesiredSize(u)}function WritableStreamDefaultControllerError(u,g){var S=u._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(u),WritableStreamStartErroring(S,g)}function streamBrandCheckException$2(u){return TypeError("WritableStream.prototype."+u+" can only be used on a WritableStream")}function defaultControllerBrandCheckException$2(u){return TypeError("WritableStreamDefaultController.prototype."+u+" can only be used on a WritableStreamDefaultController")}function defaultWriterBrandCheckException(u){return TypeError("WritableStreamDefaultWriter.prototype."+u+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(u){return TypeError("Cannot "+u+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(u){u._closedPromise=newPromise(function(g,S){u._closedPromise_resolve=g,u._closedPromise_reject=S,u._closedPromiseState="pending"})}function defaultWriterClosedPromiseInitializeAsRejected(u,g){defaultWriterClosedPromiseInitialize(u),defaultWriterClosedPromiseReject(u,g)}function defaultWriterClosedPromiseInitializeAsResolved(u){defaultWriterClosedPromiseInitialize(u),defaultWriterClosedPromiseResolve(u)}function defaultWriterClosedPromiseReject(u,g){void 0!==u._closedPromise_reject&&(setPromiseIsHandledToTrue(u._closedPromise),u._closedPromise_reject(g),u._closedPromise_resolve=void 0,u._closedPromise_reject=void 0,u._closedPromiseState="rejected")}function defaultWriterClosedPromiseResetToRejected(u,g){defaultWriterClosedPromiseInitializeAsRejected(u,g)}function defaultWriterClosedPromiseResolve(u){void 0!==u._closedPromise_resolve&&(u._closedPromise_resolve(void 0),u._closedPromise_resolve=void 0,u._closedPromise_reject=void 0,u._closedPromiseState="resolved")}function defaultWriterReadyPromiseInitialize(u){u._readyPromise=newPromise(function(g,S){u._readyPromise_resolve=g,u._readyPromise_reject=S}),u._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(u,g){defaultWriterReadyPromiseInitialize(u),defaultWriterReadyPromiseReject(u,g)}function defaultWriterReadyPromiseInitializeAsResolved(u){defaultWriterReadyPromiseInitialize(u),defaultWriterReadyPromiseResolve(u)}function defaultWriterReadyPromiseReject(u,g){void 0!==u._readyPromise_reject&&(setPromiseIsHandledToTrue(u._readyPromise),u._readyPromise_reject(g),u._readyPromise_resolve=void 0,u._readyPromise_reject=void 0,u._readyPromiseState="rejected")}function defaultWriterReadyPromiseReset(u){defaultWriterReadyPromiseInitialize(u)}function defaultWriterReadyPromiseResetToRejected(u,g){defaultWriterReadyPromiseInitializeAsRejected(u,g)}function defaultWriterReadyPromiseResolve(u){void 0!==u._readyPromise_resolve&&(u._readyPromise_resolve(void 0),u._readyPromise_resolve=void 0,u._readyPromise_reject=void 0,u._readyPromiseState="fulfilled")}Object.defineProperties(ea.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ea.prototype,R.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var es="undefined"!=typeof DOMException?DOMException:void 0;function createDOMExceptionPolyfill(){var ctor=function(u,g){this.message=u||"",this.name=g||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return ctor.prototype=Object.create(Error.prototype),Object.defineProperty(ctor.prototype,"constructor",{value:ctor,writable:!0,configurable:!0}),ctor}var eu=!function(u){if(!("function"==typeof u||"object"==typeof u))return!1;try{return new u,!0}catch(u){return!1}}(es)?createDOMExceptionPolyfill():es;function ReadableStreamPipeTo(u,g,S,R,D,C){var E=AcquireReadableStreamDefaultReader(u),T=AcquireWritableStreamDefaultWriter(g);u._disturbed=!0;var A=!1,B=promiseResolvedWith(void 0);return newPromise(function(I,P){var W;if(void 0!==C){if(W=function(){var S=new eu("Aborted","AbortError"),C=[];R||C.push(function(){return"writable"===g._state?WritableStreamAbort(g,S):promiseResolvedWith(void 0)}),D||C.push(function(){return"readable"===u._state?ReadableStreamCancel(u,S):promiseResolvedWith(void 0)}),shutdownWithAction(function(){return Promise.all(C.map(function(u){return u()}))},!0,S)},C.aborted){W();return}C.addEventListener("abort",W)}function pipeLoop(){return newPromise(function(u,g){function next(S){S?u():PerformPromiseThen(pipeStep(),next,g)}next(!1)})}function pipeStep(){return A?promiseResolvedWith(!0):PerformPromiseThen(T._readyPromise,function(){return newPromise(function(u,g){ReadableStreamDefaultReaderRead(E,{_chunkSteps:function(g){B=PerformPromiseThen(WritableStreamDefaultWriterWrite(T,g),void 0,noop),u(!1)},_closeSteps:function(){return u(!0)},_errorSteps:g})})})}if(isOrBecomesErrored(u,E._closedPromise,function(u){R?shutdown(!0,u):shutdownWithAction(function(){return WritableStreamAbort(g,u)},!0,u)}),isOrBecomesErrored(g,T._closedPromise,function(g){D?shutdown(!0,g):shutdownWithAction(function(){return ReadableStreamCancel(u,g)},!0,g)}),isOrBecomesClosed(u,E._closedPromise,function(){S?shutdown():shutdownWithAction(function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(T)})}),WritableStreamCloseQueuedOrInFlight(g)||"closed"===g._state){var L=TypeError("the destination writable stream closed before all data could be piped to it");D?shutdown(!0,L):shutdownWithAction(function(){return ReadableStreamCancel(u,L)},!0,L)}function waitForWritesToFinish(){var u=B;return PerformPromiseThen(B,function(){return u!==B?waitForWritesToFinish():void 0})}function isOrBecomesErrored(u,g,S){"errored"===u._state?S(u._storedError):uponRejection(g,S)}function isOrBecomesClosed(u,g,S){"closed"===u._state?S():uponFulfillment(g,S)}function shutdownWithAction(u,S,R){A||(A=!0,"writable"!==g._state||WritableStreamCloseQueuedOrInFlight(g)?doTheRest():uponFulfillment(waitForWritesToFinish(),doTheRest));function doTheRest(){uponPromise(u(),function(){return finalize(S,R)},function(u){return finalize(!0,u)})}}function shutdown(u,S){A||(A=!0,"writable"!==g._state||WritableStreamCloseQueuedOrInFlight(g)?finalize(u,S):uponFulfillment(waitForWritesToFinish(),function(){return finalize(u,S)}))}function finalize(u,g){WritableStreamDefaultWriterRelease(T),ReadableStreamReaderGenericRelease(E),void 0!==C&&C.removeEventListener("abort",W),u?P(g):I(void 0)}setPromiseIsHandledToTrue(pipeLoop())})}var ec=function(){function ReadableStreamDefaultController(){throw TypeError("Illegal constructor")}return Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableStreamDefaultController.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController.prototype.enqueue=function(u){if(void 0===u&&(u=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,u)},ReadableStreamDefaultController.prototype.error=function(u){if(void 0===u&&(u=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,u)},ReadableStreamDefaultController.prototype[M]=function(u){ResetQueue(this);var g=this._cancelAlgorithm(u);return ReadableStreamDefaultControllerClearAlgorithms(this),g},ReadableStreamDefaultController.prototype[$]=function(u){var g=this._controlledReadableStream;if(this._queue.length>0){var S=DequeueValue(this);this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(g)):ReadableStreamDefaultControllerCallPullIfNeeded(this),u._chunkSteps(S)}else ReadableStreamAddReadRequest(g,u),ReadableStreamDefaultControllerCallPullIfNeeded(this)},ReadableStreamDefaultController}();function IsReadableStreamDefaultController(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_controlledReadableStream"))&&u instanceof ec}function ReadableStreamDefaultControllerCallPullIfNeeded(u){if(ReadableStreamDefaultControllerShouldCallPull(u)){if(u._pulling){u._pullAgain=!0;return}u._pulling=!0,uponPromise(u._pullAlgorithm(),function(){u._pulling=!1,u._pullAgain&&(u._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(u))},function(g){ReadableStreamDefaultControllerError(u,g)})}}function ReadableStreamDefaultControllerShouldCallPull(u){var g=u._controlledReadableStream;return!!ReadableStreamDefaultControllerCanCloseOrEnqueue(u)&&!!u._started&&!!(IsReadableStreamLocked(g)&&ReadableStreamGetNumReadRequests(g)>0||ReadableStreamDefaultControllerGetDesiredSize(u)>0)}function ReadableStreamDefaultControllerClearAlgorithms(u){u._pullAlgorithm=void 0,u._cancelAlgorithm=void 0,u._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(u){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(u)){var g=u._controlledReadableStream;u._closeRequested=!0,0===u._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(u),ReadableStreamClose(g))}}function ReadableStreamDefaultControllerEnqueue(u,g){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(u)){var S=u._controlledReadableStream;if(IsReadableStreamLocked(S)&&ReadableStreamGetNumReadRequests(S)>0)ReadableStreamFulfillReadRequest(S,g,!1);else{var R=void 0;try{R=u._strategySizeAlgorithm(g)}catch(g){throw ReadableStreamDefaultControllerError(u,g),g}try{EnqueueValueWithSize(u,g,R)}catch(g){throw ReadableStreamDefaultControllerError(u,g),g}}ReadableStreamDefaultControllerCallPullIfNeeded(u)}}function ReadableStreamDefaultControllerError(u,g){var S=u._controlledReadableStream;"readable"===S._state&&(ResetQueue(u),ReadableStreamDefaultControllerClearAlgorithms(u),ReadableStreamError(S,g))}function ReadableStreamDefaultControllerGetDesiredSize(u){var g=u._controlledReadableStream._state;return"errored"===g?null:"closed"===g?0:u._strategyHWM-u._queueTotalSize}function ReadableStreamDefaultControllerHasBackpressure(u){return!ReadableStreamDefaultControllerShouldCallPull(u)}function ReadableStreamDefaultControllerCanCloseOrEnqueue(u){var g=u._controlledReadableStream._state;return!u._closeRequested&&"readable"===g}function SetUpReadableStreamDefaultController(u,g,S,R,D,C,E){g._controlledReadableStream=u,g._queue=void 0,g._queueTotalSize=void 0,ResetQueue(g),g._started=!1,g._closeRequested=!1,g._pullAgain=!1,g._pulling=!1,g._strategySizeAlgorithm=E,g._strategyHWM=C,g._pullAlgorithm=R,g._cancelAlgorithm=D,u._readableStreamController=g,uponPromise(promiseResolvedWith(S()),function(){g._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(g)},function(u){ReadableStreamDefaultControllerError(g,u)})}function SetUpReadableStreamDefaultControllerFromUnderlyingSource(u,g,S,R){var D=Object.create(ec.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==g.start&&(startAlgorithm=function(){return g.start(D)}),void 0!==g.pull&&(pullAlgorithm=function(){return g.pull(D)}),void 0!==g.cancel&&(cancelAlgorithm=function(u){return g.cancel(u)}),SetUpReadableStreamDefaultController(u,D,startAlgorithm,pullAlgorithm,cancelAlgorithm,S,R)}function defaultControllerBrandCheckException$1(u){return TypeError("ReadableStreamDefaultController.prototype."+u+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(u,g){return IsReadableByteStreamController(u._readableStreamController)?ReadableByteStreamTee(u):ReadableStreamDefaultTee(u)}function ReadableStreamDefaultTee(u,g){var S,R,D,C,E,T=AcquireReadableStreamDefaultReader(u),A=!1,B=!1,P=!1,W=!1,L=newPromise(function(u){E=u});function pullAlgorithm(){return A?B=!0:(A=!0,ReadableStreamDefaultReaderRead(T,{_chunkSteps:function(u){I(function(){B=!1;var g=u,S=u;P||ReadableStreamDefaultControllerEnqueue(D._readableStreamController,g),W||ReadableStreamDefaultControllerEnqueue(C._readableStreamController,S),A=!1,B&&pullAlgorithm()})},_closeSteps:function(){A=!1,P||ReadableStreamDefaultControllerClose(D._readableStreamController),W||ReadableStreamDefaultControllerClose(C._readableStreamController),P&&W||E(void 0)},_errorSteps:function(){A=!1}})),promiseResolvedWith(void 0)}function cancel2Algorithm(g){if(W=!0,R=g,P){var D=ReadableStreamCancel(u,CreateArrayFromList([S,R]));E(D)}return L}function startAlgorithm(){}return D=CreateReadableStream(startAlgorithm,pullAlgorithm,function(g){if(P=!0,S=g,W){var D=ReadableStreamCancel(u,CreateArrayFromList([S,R]));E(D)}return L}),C=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(T._closedPromise,function(u){ReadableStreamDefaultControllerError(D._readableStreamController,u),ReadableStreamDefaultControllerError(C._readableStreamController,u),P&&W||E(void 0)}),[D,C]}function ReadableByteStreamTee(u){var g,S,R,D,C,E=AcquireReadableStreamDefaultReader(u),T=!1,A=!1,B=!1,P=!1,W=!1,L=newPromise(function(u){C=u});function forwardReaderError(u){uponRejection(u._closedPromise,function(g){u===E&&(ReadableByteStreamControllerError(R._readableStreamController,g),ReadableByteStreamControllerError(D._readableStreamController,g),P&&W||C(void 0))})}function pullWithDefaultReader(){IsReadableStreamBYOBReader(E)&&(ReadableStreamReaderGenericRelease(E),forwardReaderError(E=AcquireReadableStreamDefaultReader(u))),ReadableStreamDefaultReaderRead(E,{_chunkSteps:function(g){I(function(){A=!1,B=!1;var S=g,E=g;if(!P&&!W)try{E=CloneAsUint8Array(g)}catch(g){ReadableByteStreamControllerError(R._readableStreamController,g),ReadableByteStreamControllerError(D._readableStreamController,g),C(ReadableStreamCancel(u,g));return}P||ReadableByteStreamControllerEnqueue(R._readableStreamController,S),W||ReadableByteStreamControllerEnqueue(D._readableStreamController,E),T=!1,A?pull1Algorithm():B&&pull2Algorithm()})},_closeSteps:function(){T=!1,P||ReadableByteStreamControllerClose(R._readableStreamController),W||ReadableByteStreamControllerClose(D._readableStreamController),R._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(R._readableStreamController,0),D._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(D._readableStreamController,0),P&&W||C(void 0)},_errorSteps:function(){T=!1}})}function pullWithBYOBReader(g,S){IsReadableStreamDefaultReader(E)&&(ReadableStreamReaderGenericRelease(E),forwardReaderError(E=AcquireReadableStreamBYOBReader(u)));var L=S?D:R,U=S?R:D;ReadableStreamBYOBReaderRead(E,g,{_chunkSteps:function(g){I(function(){A=!1,B=!1;var R=S?W:P;if(S?P:W)R||ReadableByteStreamControllerRespondWithNewView(L._readableStreamController,g);else{var D=void 0;try{D=CloneAsUint8Array(g)}catch(g){ReadableByteStreamControllerError(L._readableStreamController,g),ReadableByteStreamControllerError(U._readableStreamController,g),C(ReadableStreamCancel(u,g));return}R||ReadableByteStreamControllerRespondWithNewView(L._readableStreamController,g),ReadableByteStreamControllerEnqueue(U._readableStreamController,D)}T=!1,A?pull1Algorithm():B&&pull2Algorithm()})},_closeSteps:function(u){T=!1;var g=S?W:P,R=S?P:W;g||ReadableByteStreamControllerClose(L._readableStreamController),R||ReadableByteStreamControllerClose(U._readableStreamController),void 0!==u&&(g||ReadableByteStreamControllerRespondWithNewView(L._readableStreamController,u),!R&&U._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(U._readableStreamController,0)),g&&R||C(void 0)},_errorSteps:function(){T=!1}})}function pull1Algorithm(){if(T)return A=!0,promiseResolvedWith(void 0);T=!0;var u=ReadableByteStreamControllerGetBYOBRequest(R._readableStreamController);return null===u?pullWithDefaultReader():pullWithBYOBReader(u._view,!1),promiseResolvedWith(void 0)}function pull2Algorithm(){if(T)return B=!0,promiseResolvedWith(void 0);T=!0;var u=ReadableByteStreamControllerGetBYOBRequest(D._readableStreamController);return null===u?pullWithDefaultReader():pullWithBYOBReader(u._view,!0),promiseResolvedWith(void 0)}function cancel2Algorithm(R){if(W=!0,S=R,P){var D=ReadableStreamCancel(u,CreateArrayFromList([g,S]));C(D)}return L}function startAlgorithm(){}return R=CreateReadableByteStream(startAlgorithm,pull1Algorithm,function(R){if(P=!0,g=R,W){var D=ReadableStreamCancel(u,CreateArrayFromList([g,S]));C(D)}return L}),D=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm),forwardReaderError(E),[R,D]}function convertUnderlyingDefaultOrByteSource(u,g){assertDictionary(u,g);var S=u,R=null==S?void 0:S.autoAllocateChunkSize,D=null==S?void 0:S.cancel,C=null==S?void 0:S.pull,E=null==S?void 0:S.start,T=null==S?void 0:S.type;return{autoAllocateChunkSize:void 0===R?void 0:convertUnsignedLongLongWithEnforceRange(R,g+" has member 'autoAllocateChunkSize' that"),cancel:void 0===D?void 0:convertUnderlyingSourceCancelCallback(D,S,g+" has member 'cancel' that"),pull:void 0===C?void 0:convertUnderlyingSourcePullCallback(C,S,g+" has member 'pull' that"),start:void 0===E?void 0:convertUnderlyingSourceStartCallback(E,S,g+" has member 'start' that"),type:void 0===T?void 0:convertReadableStreamType(T,g+" has member 'type' that")}}function convertUnderlyingSourceCancelCallback(u,g,S){return assertFunction(u,S),function(S){return promiseCall(u,g,[S])}}function convertUnderlyingSourcePullCallback(u,g,S){return assertFunction(u,S),function(S){return promiseCall(u,g,[S])}}function convertUnderlyingSourceStartCallback(u,g,S){return assertFunction(u,S),function(S){return reflectCall(u,g,[S])}}function convertReadableStreamType(u,g){if("bytes"!=(u=""+u))throw TypeError(g+" '"+u+"' is not a valid enumeration value for ReadableStreamType");return u}function convertReaderOptions(u,g){assertDictionary(u,g);var S=null==u?void 0:u.mode;return{mode:void 0===S?void 0:convertReadableStreamReaderMode(S,g+" has member 'mode' that")}}function convertReadableStreamReaderMode(u,g){if("byob"!=(u=""+u))throw TypeError(g+" '"+u+"' is not a valid enumeration value for ReadableStreamReaderMode");return u}function convertIteratorOptions(u,g){return assertDictionary(u,g),{preventCancel:!!(null==u?void 0:u.preventCancel)}}function convertPipeOptions(u,g){assertDictionary(u,g);var S=null==u?void 0:u.preventAbort,R=null==u?void 0:u.preventCancel,D=null==u?void 0:u.preventClose,C=null==u?void 0:u.signal;return void 0!==C&&assertAbortSignal(C,g+" has member 'signal' that"),{preventAbort:!!S,preventCancel:!!R,preventClose:!!D,signal:C}}function assertAbortSignal(u,g){if(!isAbortSignal(u))throw TypeError(g+" is not an AbortSignal.")}function convertReadableWritablePair(u,g){assertDictionary(u,g);var S=null==u?void 0:u.readable;assertRequiredField(S,"readable","ReadableWritablePair"),assertReadableStream(S,g+" has member 'readable' that");var R=null==u?void 0:u.writable;return assertRequiredField(R,"writable","ReadableWritablePair"),assertWritableStream(R,g+" has member 'writable' that"),{readable:S,writable:R}}Object.defineProperties(ec.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ec.prototype,R.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var ed=function(){function ReadableStream(u,g){void 0===u&&(u={}),void 0===g&&(g={}),void 0===u?u=null:assertObject(u,"First parameter");var S=convertQueuingStrategy(g,"Second parameter"),R=convertUnderlyingDefaultOrByteSource(u,"First parameter");if(InitializeReadableStream(this),"bytes"===R.type){if(void 0!==S.size)throw RangeError("The strategy for a byte stream cannot have a size function");var D=ExtractHighWaterMark(S,0);SetUpReadableByteStreamControllerFromUnderlyingSource(this,R,D)}else{var C=ExtractSizeAlgorithm(S),D=ExtractHighWaterMark(S,1);SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,R,D,C)}}return Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0}),ReadableStream.prototype.cancel=function(u){return(void 0===u&&(u=void 0),IsReadableStream(this))?IsReadableStreamLocked(this)?promiseRejectedWith(TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,u):promiseRejectedWith(streamBrandCheckException$1("cancel"))},ReadableStream.prototype.getReader=function(u){if(void 0===u&&(u=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("getReader");return void 0===convertReaderOptions(u,"First parameter").mode?AcquireReadableStreamDefaultReader(this):AcquireReadableStreamBYOBReader(this)},ReadableStream.prototype.pipeThrough=function(u,g){if(void 0===g&&(g={}),!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(u,1,"pipeThrough");var S=convertReadableWritablePair(u,"First parameter"),R=convertPipeOptions(g,"Second parameter");if(IsReadableStreamLocked(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(S.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,S.writable,R.preventClose,R.preventAbort,R.preventCancel,R.signal)),S.readable},ReadableStream.prototype.pipeTo=function(u,g){var S;if(void 0===g&&(g={}),!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(void 0===u)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(u))return promiseRejectedWith(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{S=convertPipeOptions(g,"Second parameter")}catch(u){return promiseRejectedWith(u)}return IsReadableStreamLocked(this)?promiseRejectedWith(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(u)?promiseRejectedWith(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,u,S.preventClose,S.preventAbort,S.preventCancel,S.signal)},ReadableStream.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");return CreateArrayFromList(ReadableStreamTee(this))},ReadableStream.prototype.values=function(u){if(void 0===u&&(u=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("values");return AcquireReadableStreamAsyncIterator(this,convertIteratorOptions(u,"First parameter").preventCancel)},ReadableStream}();function CreateReadableStream(u,g,S,R,D){void 0===R&&(R=1),void 0===D&&(D=function(){return 1});var C=Object.create(ed.prototype);return InitializeReadableStream(C),SetUpReadableStreamDefaultController(C,Object.create(ec.prototype),u,g,S,R,D),C}function CreateReadableByteStream(u,g,S){var R=Object.create(ed.prototype);return InitializeReadableStream(R),SetUpReadableByteStreamController(R,Object.create(Z.prototype),u,g,S,0,void 0),R}function InitializeReadableStream(u){u._state="readable",u._reader=void 0,u._storedError=void 0,u._disturbed=!1}function IsReadableStream(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_readableStreamController"))&&u instanceof ed}function IsReadableStreamLocked(u){return void 0!==u._reader}function ReadableStreamCancel(u,g){if(u._disturbed=!0,"closed"===u._state)return promiseResolvedWith(void 0);if("errored"===u._state)return promiseRejectedWith(u._storedError);ReadableStreamClose(u);var S=u._reader;return void 0!==S&&IsReadableStreamBYOBReader(S)&&(S._readIntoRequests.forEach(function(u){u._closeSteps(void 0)}),S._readIntoRequests=new W),transformPromiseWith(u._readableStreamController[M](g),noop)}function ReadableStreamClose(u){u._state="closed";var g=u._reader;void 0!==g&&(defaultReaderClosedPromiseResolve(g),IsReadableStreamDefaultReader(g)&&(g._readRequests.forEach(function(u){u._closeSteps()}),g._readRequests=new W))}function ReadableStreamError(u,g){u._state="errored",u._storedError=g;var S=u._reader;void 0!==S&&(defaultReaderClosedPromiseReject(S,g),IsReadableStreamDefaultReader(S)?(S._readRequests.forEach(function(u){u._errorSteps(g)}),S._readRequests=new W):(S._readIntoRequests.forEach(function(u){u._errorSteps(g)}),S._readIntoRequests=new W))}function streamBrandCheckException$1(u){return TypeError("ReadableStream.prototype."+u+" can only be used on a ReadableStream")}function convertQueuingStrategyInit(u,g){assertDictionary(u,g);var S=null==u?void 0:u.highWaterMark;return assertRequiredField(S,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(S)}}Object.defineProperties(ed.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ed.prototype,R.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof R.asyncIterator&&Object.defineProperty(ed.prototype,R.asyncIterator,{value:ed.prototype.values,writable:!0,configurable:!0});var byteLengthSizeFunction=function(u){return u.byteLength};try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0})}catch(u){}var ef=function(){function ByteLengthQueuingStrategy(u){assertRequiredArgument(u,1,"ByteLengthQueuingStrategy"),u=convertQueuingStrategyInit(u,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=u.highWaterMark}return Object.defineProperty(ByteLengthQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(ByteLengthQueuingStrategy.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction},enumerable:!1,configurable:!0}),ByteLengthQueuingStrategy}();function byteLengthBrandCheckException(u){return TypeError("ByteLengthQueuingStrategy.prototype."+u+" can only be used on a ByteLengthQueuingStrategy")}function IsByteLengthQueuingStrategy(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_byteLengthQueuingStrategyHighWaterMark"))&&u instanceof ef}Object.defineProperties(ef.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ef.prototype,R.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var countSizeFunction=function(){return 1};try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0})}catch(u){}var eh=function(){function CountQueuingStrategy(u){assertRequiredArgument(u,1,"CountQueuingStrategy"),u=convertQueuingStrategyInit(u,"First parameter"),this._countQueuingStrategyHighWaterMark=u.highWaterMark}return Object.defineProperty(CountQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(CountQueuingStrategy.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction},enumerable:!1,configurable:!0}),CountQueuingStrategy}();function countBrandCheckException(u){return TypeError("CountQueuingStrategy.prototype."+u+" can only be used on a CountQueuingStrategy")}function IsCountQueuingStrategy(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_countQueuingStrategyHighWaterMark"))&&u instanceof eh}function convertTransformer(u,g){assertDictionary(u,g);var S=null==u?void 0:u.flush,R=null==u?void 0:u.readableType,D=null==u?void 0:u.start,C=null==u?void 0:u.transform,E=null==u?void 0:u.writableType;return{flush:void 0===S?void 0:convertTransformerFlushCallback(S,u,g+" has member 'flush' that"),readableType:R,start:void 0===D?void 0:convertTransformerStartCallback(D,u,g+" has member 'start' that"),transform:void 0===C?void 0:convertTransformerTransformCallback(C,u,g+" has member 'transform' that"),writableType:E}}function convertTransformerFlushCallback(u,g,S){return assertFunction(u,S),function(S){return promiseCall(u,g,[S])}}function convertTransformerStartCallback(u,g,S){return assertFunction(u,S),function(S){return reflectCall(u,g,[S])}}function convertTransformerTransformCallback(u,g,S){return assertFunction(u,S),function(S,R){return promiseCall(u,g,[S,R])}}Object.defineProperties(eh.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(eh.prototype,R.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var ep=function(){function TransformStream(u,g,S){void 0===u&&(u={}),void 0===g&&(g={}),void 0===S&&(S={}),void 0===u&&(u=null);var R,D=convertQueuingStrategy(g,"Second parameter"),C=convertQueuingStrategy(S,"Third parameter"),E=convertTransformer(u,"First parameter");if(void 0!==E.readableType)throw RangeError("Invalid readableType specified");if(void 0!==E.writableType)throw RangeError("Invalid writableType specified");var T=ExtractHighWaterMark(C,0),A=ExtractSizeAlgorithm(C),B=ExtractHighWaterMark(D,1),I=ExtractSizeAlgorithm(D);InitializeTransformStream(this,newPromise(function(u){R=u}),B,I,T,A),SetUpTransformStreamDefaultControllerFromTransformer(this,E),void 0!==E.start?R(E.start(this._transformStreamController)):R(void 0)}return Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable},enumerable:!1,configurable:!0}),TransformStream}();function InitializeTransformStream(u,g,S,R,D,C){function startAlgorithm(){return g}function writeAlgorithm(g){return TransformStreamDefaultSinkWriteAlgorithm(u,g)}function abortAlgorithm(g){return TransformStreamDefaultSinkAbortAlgorithm(u,g)}function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(u)}function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(u)}function cancelAlgorithm(g){return TransformStreamErrorWritableAndUnblockWrite(u,g),promiseResolvedWith(void 0)}u._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,S,R),u._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,D,C),u._backpressure=void 0,u._backpressureChangePromise=void 0,u._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(u,!0),u._transformStreamController=void 0}function IsTransformStream(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_transformStreamController"))&&u instanceof ep}function TransformStreamError(u,g){ReadableStreamDefaultControllerError(u._readable._readableStreamController,g),TransformStreamErrorWritableAndUnblockWrite(u,g)}function TransformStreamErrorWritableAndUnblockWrite(u,g){TransformStreamDefaultControllerClearAlgorithms(u._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(u._writable._writableStreamController,g),u._backpressure&&TransformStreamSetBackpressure(u,!1)}function TransformStreamSetBackpressure(u,g){void 0!==u._backpressureChangePromise&&u._backpressureChangePromise_resolve(),u._backpressureChangePromise=newPromise(function(g){u._backpressureChangePromise_resolve=g}),u._backpressure=g}Object.defineProperties(ep.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(ep.prototype,R.toStringTag,{value:"TransformStream",configurable:!0});var em=function(){function TransformStreamDefaultController(){throw TypeError("Illegal constructor")}return Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),TransformStreamDefaultController.prototype.enqueue=function(u){if(void 0===u&&(u=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,u)},TransformStreamDefaultController.prototype.error=function(u){if(void 0===u&&(u=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamDefaultControllerError(this,u)},TransformStreamDefaultController.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController}();function IsTransformStreamDefaultController(u){return!!(typeIsObject(u)&&Object.prototype.hasOwnProperty.call(u,"_controlledTransformStream"))&&u instanceof em}function SetUpTransformStreamDefaultController(u,g,S,R){g._controlledTransformStream=u,u._transformStreamController=g,g._transformAlgorithm=S,g._flushAlgorithm=R}function SetUpTransformStreamDefaultControllerFromTransformer(u,g){var S=Object.create(em.prototype),transformAlgorithm=function(u){try{return TransformStreamDefaultControllerEnqueue(S,u),promiseResolvedWith(void 0)}catch(u){return promiseRejectedWith(u)}},flushAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==g.transform&&(transformAlgorithm=function(u){return g.transform(u,S)}),void 0!==g.flush&&(flushAlgorithm=function(){return g.flush(S)}),SetUpTransformStreamDefaultController(u,S,transformAlgorithm,flushAlgorithm)}function TransformStreamDefaultControllerClearAlgorithms(u){u._transformAlgorithm=void 0,u._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(u,g){var S=u._controlledTransformStream,R=S._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(R))throw TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(R,g)}catch(u){throw TransformStreamErrorWritableAndUnblockWrite(S,u),S._readable._storedError}ReadableStreamDefaultControllerHasBackpressure(R)!==S._backpressure&&TransformStreamSetBackpressure(S,!0)}function TransformStreamDefaultControllerError(u,g){TransformStreamError(u._controlledTransformStream,g)}function TransformStreamDefaultControllerPerformTransform(u,g){return transformPromiseWith(u._transformAlgorithm(g),void 0,function(g){throw TransformStreamError(u._controlledTransformStream,g),g})}function TransformStreamDefaultControllerTerminate(u){var g=u._controlledTransformStream;ReadableStreamDefaultControllerClose(g._readable._readableStreamController),TransformStreamErrorWritableAndUnblockWrite(g,TypeError("TransformStream terminated"))}function TransformStreamDefaultSinkWriteAlgorithm(u,g){var S=u._transformStreamController;return u._backpressure?transformPromiseWith(u._backpressureChangePromise,function(){var R=u._writable;if("erroring"===R._state)throw R._storedError;return TransformStreamDefaultControllerPerformTransform(S,g)}):TransformStreamDefaultControllerPerformTransform(S,g)}function TransformStreamDefaultSinkAbortAlgorithm(u,g){return TransformStreamError(u,g),promiseResolvedWith(void 0)}function TransformStreamDefaultSinkCloseAlgorithm(u){var g=u._readable,S=u._transformStreamController,R=S._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(S),transformPromiseWith(R,function(){if("errored"===g._state)throw g._storedError;ReadableStreamDefaultControllerClose(g._readableStreamController)},function(S){throw TransformStreamError(u,S),g._storedError})}function TransformStreamDefaultSourcePullAlgorithm(u){return TransformStreamSetBackpressure(u,!1),u._backpressureChangePromise}function defaultControllerBrandCheckException(u){return TypeError("TransformStreamDefaultController.prototype."+u+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException(u){return TypeError("TransformStream.prototype."+u+" can only be used on a TransformStream")}Object.defineProperties(em.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof R.toStringTag&&Object.defineProperty(em.prototype,R.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),u.ByteLengthQueuingStrategy=ef,u.CountQueuingStrategy=eh,u.ReadableByteStreamController=Z,u.ReadableStream=ed,u.ReadableStreamBYOBReader=ee,u.ReadableStreamBYOBRequest=J,u.ReadableStreamDefaultController=ec,u.ReadableStreamDefaultReader=G,u.TransformStream=ep,u.TransformStreamDefaultController=em,u.WritableStream=en,u.WritableStreamDefaultController=ea,u.WritableStreamDefaultWriter=eo,Object.defineProperty(u,"__esModule",{value:!0})})},29375:(u,g,S)=>{try{u.exports=S(35356)}catch(g){u.exports=S(7856)}},67785:(u,g,S)=>{"use strict";S.d(g,{xk:()=>Web3Storage});var R={};S.r(R),S.d(R,{base58btc:()=>ev,base58flickr:()=>eR});var D={};S.r(D),S.d(D,{base32:()=>eD,base32hex:()=>ek,base32hexpad:()=>eB,base32hexpadupper:()=>eI,base32hexupper:()=>eA,base32pad:()=>eE,base32padupper:()=>eT,base32upper:()=>eC,base32z:()=>eP});var C={};S.r(C),S.d(C,{sha256:()=>tk,sha512:()=>tA});var E={};S.r(E),S.d(E,{code:()=>t1,createLink:()=>createLink,createNode:()=>createNode,decode:()=>src_decode,encode:()=>src_encode,name:()=>t0,prepare:()=>prepare,validate:()=>validate});var T={};S.r(T),S.d(T,{code:()=>t6,decode:()=>raw_decode,encode:()=>raw_encode,name:()=>t3});var A={};S.r(A),S.d(A,{identity:()=>ru});var B={};S.r(B),S.d(B,{base2:()=>rc});var I={};S.r(I),S.d(I,{base8:()=>rd});var P={};S.r(P),S.d(P,{base10:()=>rf});var W={};S.r(W),S.d(W,{base16:()=>rh,base16upper:()=>rp});var L={};S.r(L),S.d(L,{base36:()=>rm,base36upper:()=>ry});var U={};S.r(U),S.d(U,{base64:()=>rb,base64pad:()=>rg,base64url:()=>r_,base64urlpad:()=>rS});var M={};S.r(M),S.d(M,{base256emoji:()=>rD});var $={};S.r($),S.d($,{identity:()=>rT});var H={};S.r(H),S.d(H,{code:()=>rI,decode:()=>json_decode,encode:()=>json_encode,name:()=>rB});var Q={};S.r(Q),S.d(Q,{abortedError:()=>abortedError,notFoundError:()=>notFoundError});var G={};S.r(G),S.d(G,{code:()=>nd,decode:()=>dag_cbor_esm_decode,encode:()=>dag_cbor_esm_encode,name:()=>nc});let Y=Symbol("TIMEOUT");function getIterator(u){if("function"==typeof u.next)return u;if("function"==typeof u[Symbol.iterator])return u[Symbol.iterator]();if("function"==typeof u[Symbol.asyncIterator])return u[Symbol.asyncIterator]();throw TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function defer(){let u,g;let S=new Promise((S,R)=>{g=S,u=R});return{promise:S,reject:u,resolve:g}}function _buffer(u,g){let S=getIterator(g),R=[],D=[],C=!1,E=!1;function fulfillReadQueue(){for(;D.length>0&&R.length>0;){let u=D.shift(),{error:g,value:S}=R.shift();g?u.reject(g):u.resolve({done:!1,value:S})}for(;D.length>0&&E;){let{resolve:u}=D.shift();u({done:!0,value:void 0})}}async function fillQueue(){if(!E&&!C&&!(R.length>=u)){C=!0;try{let{done:u,value:g}=await S.next();u?E=!0:R.push({value:g})}catch(u){E=!0,R.push({error:u})}fulfillReadQueue(),C=!1,fillQueue()}}async function next(){if(R.length>0){let{error:u,value:g}=R.shift();if(u)throw u;return fillQueue(),{done:!1,value:g}}if(E)return{done:!0,value:void 0};let u=defer();return D.push(u),fillQueue(),u.promise}let T={next,[Symbol.asyncIterator]:()=>T};return T}function*syncBuffer(u,g){let S;let R=[];try{for(let S of g)R.push(S),R.length<=u||(yield R.shift())}catch(u){S=u}for(let u of R)yield u;if(S)throw S}function buffer(u,g){return void 0===g?g=>buffer(u,g):0===u?g:g[Symbol.asyncIterator]?_buffer(u,g):syncBuffer(u,g)}async function*_map(u,g){for await(let S of g)yield await u(S)}function map(u,g){return void 0===g?g=>_map(u,g):_map(u,g)}function pipeline(u,...g){let S=u();for(let u of g)S=u(S);return S}function _transform(u,g,S){let R=getIterator(S),D=[],C=[],E=!1,T=!1,A=0,B=null;function fulfillReadQueue(){for(;C.length>0&&D.length>0;){let{resolve:u}=C.shift(),g=D.shift();u({done:!1,value:g})}for(;C.length>0&&0===A&&E;){let{resolve:u,reject:g}=C.shift();B?(g(B),B=null):u({done:!0,value:void 0})}}async function fillQueue(){if(E){fulfillReadQueue();return}if(!T&&!(A+D.length>=u)){T=!0,A++;try{let{done:u,value:g}=await R.next();u?(E=!0,A--,fulfillReadQueue()):mapAndQueue(g)}catch(u){E=!0,A--,B=u,fulfillReadQueue()}T=!1,fillQueue()}}async function mapAndQueue(u){try{let S=await g(u);D.push(S)}catch(u){E=!0,B=u}A--,fulfillReadQueue(),fillQueue()}async function next(){if(0===D.length){let u=defer();return C.push(u),fillQueue(),u.promise}let u=D.shift();return fillQueue(),{done:!1,value:u}}let I={next,[Symbol.asyncIterator]:()=>I};return I}function transform(u,g,S){return void 0===g?(g,S)=>S?transform(u,g,S):transform(u,g):void 0===S?S=>transform(u,g,S):_transform(u,g,S)}var X=S(71856),K=S(7754),J=S(38947),Z=S(57147),ee=S(73837),et=S(22782),en=128,eo=-128,ei=2147483648;function encode(u,g,S){g=g||[];for(var R=S=S||0;u>=ei;)g[S++]=255&u|en,u/=128;for(;u&eo;)g[S++]=255&u|en,u>>>=7;return g[S]=0|u,encode.bytes=S-R+1,g}var ea=128,es=127;function read(u,g){var S,R=0,g=g||0,D=0,C=g,E=u.length;do{if(C>=E)throw read.bytes=0,RangeError("Could not decode varint");S=u[C++],R+=D<28?(S&es)<<D:(S&es)*Math.pow(2,D),D+=7}while(S>=ea);return read.bytes=C-g,R}var eu=128,ec=16384,ed=2097152,ef=268435456,eh=34359738368,ep=4398046511104,em=562949953421312,ey=72057594037927940,eb=0x7fffffffffffffff,eg={encode:encode,decode:read,encodingLength:function(u){return u<eu?1:u<ec?2:u<ed?3:u<ef?4:u<eh?5:u<ep?6:u<em?7:u<ey?8:u<eb?9:10}};let e_=eg,varint_decode=(u,g=0)=>{let S=e_.decode(u,g);return[S,e_.decode.bytes]},encodeTo=(u,g,S=0)=>(e_.encode(u,g,S),g),encodingLength=u=>e_.encodingLength(u),eS=new Uint8Array(0),fromHex=u=>{let g=u.match(/../g);return g?new Uint8Array(g.map(u=>parseInt(u,16))):eS},equals=(u,g)=>{if(u===g)return!0;if(u.byteLength!==g.byteLength)return!1;for(let S=0;S<u.byteLength;S++)if(u[S]!==g[S])return!1;return!0},coerce=u=>{if(u instanceof Uint8Array&&"Uint8Array"===u.constructor.name)return u;if(u instanceof ArrayBuffer)return new Uint8Array(u);if(ArrayBuffer.isView(u))return new Uint8Array(u.buffer,u.byteOffset,u.byteLength);throw Error("Unknown type, must be binary type")},fromString=u=>new TextEncoder().encode(u),bytes_toString=u=>new TextDecoder().decode(u),create=(u,g)=>{let S=g.byteLength,R=encodingLength(u),D=R+encodingLength(S),C=new Uint8Array(D+S);return encodeTo(u,C,0),encodeTo(S,C,R),C.set(g,D),new digest_Digest(u,S,g,C)},digest_decode=u=>{let g=coerce(u),[S,R]=varint_decode(g),[D,C]=varint_decode(g.subarray(R)),E=g.subarray(R+C);if(E.byteLength!==D)throw Error("Incorrect length");return new digest_Digest(S,D,E,g)},digest_equals=(u,g)=>u===g||u.code===g.code&&u.size===g.size&&equals(u.bytes,g.bytes);let digest_Digest=class digest_Digest{constructor(u,g,S,R){this.code=u,this.size=g,this.digest=S,this.bytes=R}};var _brrp__multiformats_scope_baseX=function(u,g){if(u.length>=255)throw TypeError("Alphabet too long");for(var S=new Uint8Array(256),R=0;R<S.length;R++)S[R]=255;for(var D=0;D<u.length;D++){var C=u.charAt(D),E=C.charCodeAt(0);if(255!==S[E])throw TypeError(C+" is ambiguous");S[E]=D}var T=u.length,A=u.charAt(0),B=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function decodeUnsafe(u){if("string"!=typeof u)throw TypeError("Expected String");if(0===u.length)return new Uint8Array;var g=0;if(" "!==u[0]){for(var R=0,D=0;u[g]===A;)R++,g++;for(var C=(u.length-g)*B+1>>>0,E=new Uint8Array(C);u[g];){var I=S[u.charCodeAt(g)];if(255===I)return;for(var P=0,W=C-1;(0!==I||P<D)&&-1!==W;W--,P++)I+=T*E[W]>>>0,E[W]=I%256>>>0,I=I/256>>>0;if(0!==I)throw Error("Non-zero carry");D=P,g++}if(" "!==u[g]){for(var L=C-D;L!==C&&0===E[L];)L++;for(var U=new Uint8Array(R+(C-L)),M=R;L!==C;)U[M++]=E[L++];return U}}}function decode(u){var S=decodeUnsafe(u);if(S)return S;throw Error(`Non-${g} character`)}return{encode:function(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===g.length)return"";for(var S=0,R=0,D=0,C=g.length;D!==C&&0===g[D];)D++,S++;for(var E=(C-D)*I+1>>>0,B=new Uint8Array(E);D!==C;){for(var P=g[D],W=0,L=E-1;(0!==P||W<R)&&-1!==L;L--,W++)P+=256*B[L]>>>0,B[L]=P%T>>>0,P=P/T>>>0;if(0!==P)throw Error("Non-zero carry");R=W,D++}for(var U=E-R;U!==E&&0===B[U];)U++;for(var M=A.repeat(S);U<E;++U)M+=u.charAt(B[U]);return M},decodeUnsafe:decodeUnsafe,decode:decode}};let ew=_brrp__multiformats_scope_baseX;let Encoder=class Encoder{constructor(u,g,S){this.name=u,this.prefix=g,this.baseEncode=S}encode(u){if(u instanceof Uint8Array)return`${this.prefix}${this.baseEncode(u)}`;throw Error("Unknown type, must be binary type")}};let Decoder=class Decoder{constructor(u,g,S){if(this.name=u,this.prefix=g,void 0===g.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=S}decode(u){if("string"==typeof u){if(u.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(u)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(u.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(u){return or(this,u)}};let ComposedDecoder=class ComposedDecoder{constructor(u){this.decoders=u}or(u){return or(this,u)}decode(u){let g=u[0],S=this.decoders[g];if(S)return S.decode(u);throw RangeError(`Unable to decode multibase string ${JSON.stringify(u)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let or=(u,g)=>new ComposedDecoder({...u.decoders||{[u.prefix]:u},...g.decoders||{[g.prefix]:g}});let Codec=class Codec{constructor(u,g,S,R){this.name=u,this.prefix=g,this.baseEncode=S,this.baseDecode=R,this.encoder=new Encoder(u,g,S),this.decoder=new Decoder(u,g,R)}encode(u){return this.encoder.encode(u)}decode(u){return this.decoder.decode(u)}};let from=({name:u,prefix:g,encode:S,decode:R})=>new Codec(u,g,S,R),baseX=({prefix:u,name:g,alphabet:S})=>{let{encode:R,decode:D}=ew(S,g);return from({prefix:u,name:g,encode:R,decode:u=>coerce(D(u))})},base_decode=(u,g,S,R)=>{let D={};for(let u=0;u<g.length;++u)D[g[u]]=u;let C=u.length;for(;"="===u[C-1];)--C;let E=new Uint8Array(C*S/8|0),T=0,A=0,B=0;for(let g=0;g<C;++g){let C=D[u[g]];if(void 0===C)throw SyntaxError(`Non-${R} character`);A=A<<S|C,(T+=S)>=8&&(T-=8,E[B++]=255&A>>T)}if(T>=S||255&A<<8-T)throw SyntaxError("Unexpected end of data");return E},base_encode=(u,g,S)=>{let R="="===g[g.length-1],D=(1<<S)-1,C="",E=0,T=0;for(let R=0;R<u.length;++R)for(T=T<<8|u[R],E+=8;E>S;)E-=S,C+=g[D&T>>E];if(E&&(C+=g[D&T<<S-E]),R)for(;C.length*S&7;)C+="=";return C},rfc4648=({name:u,prefix:g,bitsPerChar:S,alphabet:R})=>from({prefix:g,name:u,encode:u=>base_encode(u,R,S),decode:g=>base_decode(g,R,S,u)}),ev=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eR=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),eD=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eC=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eE=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eT=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ek=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eA=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eB=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eI=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eP=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});let cid_CID=class cid_CID{constructor(u,g,S,R){this.code=g,this.version=u,this.multihash=S,this.bytes=R,this.byteOffset=R.byteOffset,this.byteLength=R.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:eL,byteLength:eL,code:eF,version:eF,multihash:eF,bytes:eF,_baseCache:eL,asCID:eL})}toV0(){if(0===this.version)return this;{let{code:u,multihash:g}=this;if(u!==eW)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(g.code!==eO)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return cid_CID.createV0(g)}}toV1(){switch(this.version){case 0:{let{code:u,digest:g}=this.multihash,S=create(u,g);return cid_CID.createV1(this.code,S)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(u){return u&&this.code===u.code&&this.version===u.version&&digest_equals(this.multihash,u.multihash)}toString(u){let{bytes:g,version:S,_baseCache:R}=this;return 0===S?toStringV0(g,R,u||ev.encoder):toStringV1(g,R,u||eD.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(u){return deprecate(/^0\.0/,eU),!!(u&&(u[ej]||u.asCID===u))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(u){if(u instanceof cid_CID)return u;if(null!=u&&u.asCID===u){let{version:g,code:S,multihash:R,bytes:D}=u;return new cid_CID(g,S,R,D||encodeCID(g,S,R.bytes))}if(null==u||!0!==u[ej])return null;{let{version:g,multihash:S,code:R}=u,D=digest_decode(S);return cid_CID.create(g,R,D)}}static create(u,g,S){if("number"!=typeof g)throw Error("String codecs are no longer supported");switch(u){case 0:if(g===eW)return new cid_CID(u,g,S,S.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eW}) block encoding`);case 1:{let R=encodeCID(u,g,S.bytes);return new cid_CID(u,g,S,R)}default:throw Error("Invalid version")}}static createV0(u){return cid_CID.create(0,eW,u)}static createV1(u,g){return cid_CID.create(1,u,g)}static decode(u){let[g,S]=cid_CID.decodeFirst(u);if(S.length)throw Error("Incorrect length");return g}static decodeFirst(u){let g=cid_CID.inspectBytes(u),S=g.size-g.multihashSize,R=coerce(u.subarray(S,S+g.multihashSize));if(R.byteLength!==g.multihashSize)throw Error("Incorrect length");let D=R.subarray(g.multihashSize-g.digestSize),C=new digest_Digest(g.multihashCode,g.digestSize,D,R),E=0===g.version?cid_CID.createV0(C):cid_CID.createV1(g.codec,C);return[E,u.subarray(g.size)]}static inspectBytes(u){let g=0,next=()=>{let[S,R]=varint_decode(u.subarray(g));return g+=R,S},S=next(),R=eW;if(18===S?(S=0,g=0):1===S&&(R=next()),0!==S&&1!==S)throw RangeError(`Invalid CID version ${S}`);let D=g,C=next(),E=next(),T=g+E,A=T-D;return{version:S,codec:R,multihashCode:C,digestSize:E,multihashSize:A,size:T}}static parse(u,g){let[S,R]=parseCIDtoBytes(u,g),D=cid_CID.decode(R);return D._baseCache.set(S,u),D}};let parseCIDtoBytes=(u,g)=>{switch(u[0]){case"Q":{let S=g||ev;return[ev.prefix,S.decode(`${ev.prefix}${u}`)]}case ev.prefix:{let S=g||ev;return[ev.prefix,S.decode(u)]}case eD.prefix:{let S=g||eD;return[eD.prefix,S.decode(u)]}default:if(null==g)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[u[0],g.decode(u)]}},toStringV0=(u,g,S)=>{let{prefix:R}=S;if(R!==ev.prefix)throw Error(`Cannot string encode V0 in ${S.name} encoding`);let D=g.get(R);if(null!=D)return D;{let D=S.encode(u).slice(1);return g.set(R,D),D}},toStringV1=(u,g,S)=>{let{prefix:R}=S,D=g.get(R);if(null!=D)return D;{let D=S.encode(u);return g.set(R,D),D}},eW=112,eO=18,encodeCID=(u,g,S)=>{let R=encodingLength(u),D=R+encodingLength(g),C=new Uint8Array(D+S.byteLength);return encodeTo(u,C,0),encodeTo(g,C,R),C.set(S,D),C},ej=Symbol.for("@ipld/js-cid/CID"),eF={writable:!1,configurable:!1,enumerable:!0},eL={writable:!1,enumerable:!1,configurable:!1},ez="0.0.0-dev",deprecate=(u,g)=>{if(u.test(ez))console.warn(g);else throw Error(g)},eU=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,eN=["string","number","bigint","symbol"],eM=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(u){if(null===u)return"null";if(void 0===u)return"undefined";if(!0===u||!1===u)return"boolean";let g=typeof u;if(eN.includes(g))return g;if("function"===g)return"Function";if(Array.isArray(u))return"Array";if(isBuffer(u))return"Buffer";let S=getObjectType(u);return S||"Object"}function isBuffer(u){return u&&u.constructor&&u.constructor.isBuffer&&u.constructor.isBuffer.call(null,u)}function getObjectType(u){let g=Object.prototype.toString.call(u).slice(8,-1);if(eM.includes(g))return g}let Type=class Type{constructor(u,g,S){this.major=u,this.majorEncoded=u<<5,this.name=g,this.terminal=S}toString(){return`Type[${this.major}].${this.name}`}compare(u){return this.major<u.major?-1:this.major>u.major?1:0}};Type.uint=new Type(0,"uint",!0),Type.negint=new Type(1,"negint",!0),Type.bytes=new Type(2,"bytes",!0),Type.string=new Type(3,"string",!0),Type.array=new Type(4,"array",!1),Type.map=new Type(5,"map",!1),Type.tag=new Type(6,"tag",!1),Type.float=new Type(7,"float",!0),Type.false=new Type(7,"false",!0),Type.true=new Type(7,"true",!0),Type.null=new Type(7,"null",!0),Type.undefined=new Type(7,"undefined",!0),Type.break=new Type(7,"break",!0);let Token=class Token{constructor(u,g,S){this.type=u,this.value=g,this.encodedLength=S,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};let eq=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,e$=new TextDecoder,eH=new TextEncoder;function byte_utils_isBuffer(u){return eq&&globalThis.Buffer.isBuffer(u)}function asU8A(u){return u instanceof Uint8Array?byte_utils_isBuffer(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):u:Uint8Array.from(u)}let eV=eq?(u,g,S)=>S-g>64?globalThis.Buffer.from(u.subarray(g,S)).toString("utf8"):utf8Slice(u,g,S):(u,g,S)=>S-g>64?e$.decode(u.subarray(g,S)):utf8Slice(u,g,S),eQ=eq?u=>u.length>64?globalThis.Buffer.from(u):utf8ToBytes(u):u=>u.length>64?eH.encode(u):utf8ToBytes(u),fromArray=u=>Uint8Array.from(u),eG=eq?(u,g,S)=>byte_utils_isBuffer(u)?new Uint8Array(u.subarray(g,S)):u.slice(g,S):(u,g,S)=>u.slice(g,S),eY=eq?(u,g)=>(u=u.map(u=>u instanceof Uint8Array?u:globalThis.Buffer.from(u)),asU8A(globalThis.Buffer.concat(u,g))):(u,g)=>{let S=new Uint8Array(g),R=0;for(let g of u)R+g.length>S.length&&(g=g.subarray(0,S.length-R)),S.set(g,R),R+=g.length;return S},eX=eq?u=>globalThis.Buffer.allocUnsafe(u):u=>new Uint8Array(u);function compare(u,g){if(byte_utils_isBuffer(u)&&byte_utils_isBuffer(g))return u.compare(g);for(let S=0;S<u.length;S++)if(u[S]!==g[S])return u[S]<g[S]?-1:1;return 0}function utf8ToBytes(u,g=1/0){let S;let R=u.length,D=null,C=[];for(let E=0;E<R;++E){if((S=u.charCodeAt(E))>55295&&S<57344){if(!D){if(S>56319||E+1===R){(g-=3)>-1&&C.push(239,191,189);continue}D=S;continue}if(S<56320){(g-=3)>-1&&C.push(239,191,189),D=S;continue}S=(D-55296<<10|S-56320)+65536}else D&&(g-=3)>-1&&C.push(239,191,189);if(D=null,S<128){if((g-=1)<0)break;C.push(S)}else if(S<2048){if((g-=2)<0)break;C.push(S>>6|192,63&S|128)}else if(S<65536){if((g-=3)<0)break;C.push(S>>12|224,S>>6&63|128,63&S|128)}else if(S<1114112){if((g-=4)<0)break;C.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}else throw Error("Invalid code point")}return C}function utf8Slice(u,g,S){let R=[];for(;g<S;){let D=u[g],C=null,E=D>239?4:D>223?3:D>191?2:1;if(g+E<=S){let S,R,T,A;switch(E){case 1:D<128&&(C=D);break;case 2:(192&(S=u[g+1]))==128&&(A=(31&D)<<6|63&S)>127&&(C=A);break;case 3:S=u[g+1],R=u[g+2],(192&S)==128&&(192&R)==128&&(A=(15&D)<<12|(63&S)<<6|63&R)>2047&&(A<55296||A>57343)&&(C=A);break;case 4:S=u[g+1],R=u[g+2],T=u[g+3],(192&S)==128&&(192&R)==128&&(192&T)==128&&(A=(15&D)<<18|(63&S)<<12|(63&R)<<6|63&T)>65535&&A<1114112&&(C=A)}}null===C?(C=65533,E=1):C>65535&&(C-=65536,R.push(C>>>10&1023|55296),C=56320|1023&C),R.push(C),g+=E}return decodeCodePointsArray(R)}let eK=4096;function decodeCodePointsArray(u){let g=u.length;if(g<=eK)return String.fromCharCode.apply(String,u);let S="",R=0;for(;R<g;)S+=String.fromCharCode.apply(String,u.slice(R,R+=eK));return S}let eJ=256;let Bl=class Bl{constructor(u=eJ){this.chunkSize=u,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(u){let g=this.chunks[this.chunks.length-1],S=this.cursor+u.length;if(S<=this.maxCursor+1){let S=g.length-(this.maxCursor-this.cursor)-1;g.set(u,S)}else{if(g){let u=g.length-(this.maxCursor-this.cursor)-1;u<g.length&&(this.chunks[this.chunks.length-1]=g.subarray(0,u),this.maxCursor=this.cursor-1)}u.length<64&&u.length<this.chunkSize?(g=eX(this.chunkSize),this.chunks.push(g),this.maxCursor+=g.length,null===this._initReuseChunk&&(this._initReuseChunk=g),g.set(u,0)):(this.chunks.push(u),this.maxCursor+=u.length)}this.cursor+=u.length}toBytes(u=!1){let g;if(1===this.chunks.length){let S=this.chunks[0];u&&this.cursor>S.length/2?(g=this.cursor===S.length?S:S.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):g=eG(S,0,this.cursor)}else g=eY(this.chunks,this.cursor);return u&&this.reset(),g}};let eZ="CBOR decode error:",e0="CBOR encode error:",e8=[];function assertEnoughData(u,g,S){if(u.length-g<S)throw Error(`${eZ} not enough data for type`)}e8[23]=1,e8[24]=2,e8[25]=3,e8[26]=5,e8[27]=9;let e3=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(u,g,S){assertEnoughData(u,g,1);let R=u[g];if(!0===S.strict&&R<e3[0])throw Error(`${eZ} integer encoded in more bytes than necessary (strict decode)`);return R}function readUint16(u,g,S){assertEnoughData(u,g,2);let R=u[g]<<8|u[g+1];if(!0===S.strict&&R<e3[1])throw Error(`${eZ} integer encoded in more bytes than necessary (strict decode)`);return R}function readUint32(u,g,S){assertEnoughData(u,g,4);let R=16777216*u[g]+(u[g+1]<<16)+(u[g+2]<<8)+u[g+3];if(!0===S.strict&&R<e3[2])throw Error(`${eZ} integer encoded in more bytes than necessary (strict decode)`);return R}function readUint64(u,g,S){assertEnoughData(u,g,8);let R=16777216*u[g]+(u[g+1]<<16)+(u[g+2]<<8)+u[g+3],D=16777216*u[g+4]+(u[g+5]<<16)+(u[g+6]<<8)+u[g+7],C=(BigInt(R)<<BigInt(32))+BigInt(D);if(!0===S.strict&&C<e3[3])throw Error(`${eZ} integer encoded in more bytes than necessary (strict decode)`);if(C<=Number.MAX_SAFE_INTEGER)return Number(C);if(!0===S.allowBigInt)return C;throw Error(`${eZ} integers outside of the safe integer range are not supported`)}function decodeUint8(u,g,S,R){return new Token(Type.uint,readUint8(u,g+1,R),2)}function decodeUint16(u,g,S,R){return new Token(Type.uint,readUint16(u,g+1,R),3)}function decodeUint32(u,g,S,R){return new Token(Type.uint,readUint32(u,g+1,R),5)}function decodeUint64(u,g,S,R){return new Token(Type.uint,readUint64(u,g+1,R),9)}function encodeUint(u,g){return encodeUintValue(u,0,g.value)}function encodeUintValue(u,g,S){if(S<e3[0]){let R=Number(S);u.push([g|R])}else if(S<e3[1]){let R=Number(S);u.push([24|g,R])}else if(S<e3[2]){let R=Number(S);u.push([25|g,R>>>8,255&R])}else if(S<e3[3]){let R=Number(S);u.push([26|g,R>>>24&255,R>>>16&255,R>>>8&255,255&R])}else{let R=BigInt(S);if(R<e3[4]){let S=[27|g,0,0,0,0,0,0,0],D=Number(R&BigInt(4294967295)),C=Number(R>>BigInt(32)&BigInt(4294967295));S[8]=255&D,D>>=8,S[7]=255&D,D>>=8,S[6]=255&D,D>>=8,S[5]=255&D,S[4]=255&C,C>>=8,S[3]=255&C,C>>=8,S[2]=255&C,C>>=8,S[1]=255&C,u.push(S)}else throw Error(`${eZ} encountered BigInt larger than allowable range`)}}function decodeNegint8(u,g,S,R){return new Token(Type.negint,-1-readUint8(u,g+1,R),2)}function decodeNegint16(u,g,S,R){return new Token(Type.negint,-1-readUint16(u,g+1,R),3)}function decodeNegint32(u,g,S,R){return new Token(Type.negint,-1-readUint32(u,g+1,R),5)}encodeUint.encodedSize=function(u){return encodeUintValue.encodedSize(u.value)},encodeUintValue.encodedSize=function(u){return u<e3[0]?1:u<e3[1]?2:u<e3[2]?3:u<e3[3]?5:9},encodeUint.compareTokens=function(u,g){return u.value<g.value?-1:u.value>g.value?1:0};let e6=BigInt(-1),e4=BigInt(1);function decodeNegint64(u,g,S,R){let D=readUint64(u,g+1,R);if("bigint"!=typeof D){let u=-1-D;if(u>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,u,9)}if(!0!==R.allowBigInt)throw Error(`${eZ} integers outside of the safe integer range are not supported`);return new Token(Type.negint,e6-BigInt(D),9)}function encodeNegint(u,g){let S=g.value,R="bigint"==typeof S?S*e6-e4:-1*S-1;encodeUintValue(u,g.type.majorEncoded,R)}function toToken(u,g,S,R){assertEnoughData(u,g,S+R);let D=eG(u,g+S,g+S+R);return new Token(Type.bytes,D,S+R)}function decodeBytesCompact(u,g,S,R){return toToken(u,g,1,S)}function decodeBytes8(u,g,S,R){return toToken(u,g,2,readUint8(u,g+1,R))}function decodeBytes16(u,g,S,R){return toToken(u,g,3,readUint16(u,g+1,R))}function decodeBytes32(u,g,S,R){return toToken(u,g,5,readUint32(u,g+1,R))}function decodeBytes64(u,g,S,R){let D=readUint64(u,g+1,R);if("bigint"==typeof D)throw Error(`${eZ} 64-bit integer bytes lengths not supported`);return toToken(u,g,9,D)}function tokenBytes(u){return void 0===u.encodedBytes&&(u.encodedBytes=u.type===Type.string?eQ(u.value):u.value),u.encodedBytes}function encodeBytes(u,g){let S=tokenBytes(g);encodeUintValue(u,g.type.majorEncoded,S.length),u.push(S)}function compareBytes(u,g){return u.length<g.length?-1:u.length>g.length?1:compare(u,g)}function _3string_toToken(u,g,S,R,D){let C=S+R;assertEnoughData(u,g,C);let E=new Token(Type.string,eV(u,g+S,g+C),C);return!0===D.retainStringBytes&&(E.byteValue=eG(u,g+S,g+C)),E}function decodeStringCompact(u,g,S,R){return _3string_toToken(u,g,1,S,R)}function decodeString8(u,g,S,R){return _3string_toToken(u,g,2,readUint8(u,g+1,R),R)}function decodeString16(u,g,S,R){return _3string_toToken(u,g,3,readUint16(u,g+1,R),R)}function decodeString32(u,g,S,R){return _3string_toToken(u,g,5,readUint32(u,g+1,R),R)}function decodeString64(u,g,S,R){let D=readUint64(u,g+1,R);if("bigint"==typeof D)throw Error(`${eZ} 64-bit integer string lengths not supported`);return _3string_toToken(u,g,9,D,R)}encodeNegint.encodedSize=function(u){let g=u.value,S="bigint"==typeof g?g*e6-e4:-1*g-1;return S<e3[0]?1:S<e3[1]?2:S<e3[2]?3:S<e3[3]?5:9},encodeNegint.compareTokens=function(u,g){return u.value<g.value?1:u.value>g.value?-1:0},encodeBytes.encodedSize=function(u){let g=tokenBytes(u);return encodeUintValue.encodedSize(g.length)+g.length},encodeBytes.compareTokens=function(u,g){return compareBytes(tokenBytes(u),tokenBytes(g))};let e5=encodeBytes;function _4array_toToken(u,g,S,R){return new Token(Type.array,R,S)}function decodeArrayCompact(u,g,S,R){return _4array_toToken(u,g,1,S)}function decodeArray8(u,g,S,R){return _4array_toToken(u,g,2,readUint8(u,g+1,R))}function decodeArray16(u,g,S,R){return _4array_toToken(u,g,3,readUint16(u,g+1,R))}function decodeArray32(u,g,S,R){return _4array_toToken(u,g,5,readUint32(u,g+1,R))}function decodeArray64(u,g,S,R){let D=readUint64(u,g+1,R);if("bigint"==typeof D)throw Error(`${eZ} 64-bit integer array lengths not supported`);return _4array_toToken(u,g,9,D)}function decodeArrayIndefinite(u,g,S,R){if(!1===R.allowIndefinite)throw Error(`${eZ} indefinite length items not allowed`);return _4array_toToken(u,g,1,1/0)}function encodeArray(u,g){encodeUintValue(u,Type.array.majorEncoded,g.value)}function _5map_toToken(u,g,S,R){return new Token(Type.map,R,S)}function decodeMapCompact(u,g,S,R){return _5map_toToken(u,g,1,S)}function decodeMap8(u,g,S,R){return _5map_toToken(u,g,2,readUint8(u,g+1,R))}function decodeMap16(u,g,S,R){return _5map_toToken(u,g,3,readUint16(u,g+1,R))}function decodeMap32(u,g,S,R){return _5map_toToken(u,g,5,readUint32(u,g+1,R))}function decodeMap64(u,g,S,R){let D=readUint64(u,g+1,R);if("bigint"==typeof D)throw Error(`${eZ} 64-bit integer map lengths not supported`);return _5map_toToken(u,g,9,D)}function decodeMapIndefinite(u,g,S,R){if(!1===R.allowIndefinite)throw Error(`${eZ} indefinite length items not allowed`);return _5map_toToken(u,g,1,1/0)}function encodeMap(u,g){encodeUintValue(u,Type.map.majorEncoded,g.value)}function decodeTagCompact(u,g,S,R){return new Token(Type.tag,S,1)}function decodeTag8(u,g,S,R){return new Token(Type.tag,readUint8(u,g+1,R),2)}function decodeTag16(u,g,S,R){return new Token(Type.tag,readUint16(u,g+1,R),3)}function decodeTag32(u,g,S,R){return new Token(Type.tag,readUint32(u,g+1,R),5)}function decodeTag64(u,g,S,R){return new Token(Type.tag,readUint64(u,g+1,R),9)}function encodeTag(u,g){encodeUintValue(u,Type.tag.majorEncoded,g.value)}encodeArray.compareTokens=encodeUint.compareTokens,encodeArray.encodedSize=function(u){return encodeUintValue.encodedSize(u.value)},encodeMap.compareTokens=encodeUint.compareTokens,encodeMap.encodedSize=function(u){return encodeUintValue.encodedSize(u.value)},encodeTag.compareTokens=encodeUint.compareTokens,encodeTag.encodedSize=function(u){return encodeUintValue.encodedSize(u.value)};let e7=20,e9=21,te=22,tt=23;function decodeUndefined(u,g,S,R){if(!1===R.allowUndefined)throw Error(`${eZ} undefined values are not supported`);return!0===R.coerceUndefinedToNull?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(u,g,S,R){if(!1===R.allowIndefinite)throw Error(`${eZ} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(u,g,S){if(S){if(!1===S.allowNaN&&Number.isNaN(u))throw Error(`${eZ} NaN values are not supported`);if(!1===S.allowInfinity&&(u===1/0||u===-1/0))throw Error(`${eZ} Infinity values are not supported`)}return new Token(Type.float,u,g)}function decodeFloat16(u,g,S,R){return createToken(readFloat16(u,g+1),3,R)}function decodeFloat32(u,g,S,R){return createToken(readFloat32(u,g+1),5,R)}function decodeFloat64(u,g,S,R){return createToken(readFloat64(u,g+1),9,R)}function encodeFloat(u,g,S){let R=g.value;if(!1===R)u.push([Type.float.majorEncoded|e7]);else if(!0===R)u.push([Type.float.majorEncoded|e9]);else if(null===R)u.push([Type.float.majorEncoded|te]);else if(void 0===R)u.push([Type.float.majorEncoded|tt]);else{let g;let D=!1;S&&!0===S.float64||(encodeFloat16(R),R===(g=readFloat16(ti,1))||Number.isNaN(R)?(ti[0]=249,u.push(ti.slice(0,3)),D=!0):(encodeFloat32(R),R!==(g=readFloat32(ti,1))||(ti[0]=250,u.push(ti.slice(0,5)),D=!0))),D||(encodeFloat64(R),g=readFloat64(ti,1),ti[0]=251,u.push(ti.slice(0,9)))}}encodeFloat.encodedSize=function(u,g){let S=u.value;if(!1===S||!0===S||null==S)return 1;if(!g||!0!==g.float64){encodeFloat16(S);let u=readFloat16(ti,1);if(S===u||Number.isNaN(S))return 3;if(encodeFloat32(S),S===(u=readFloat32(ti,1)))return 5}return 9};let tr=new ArrayBuffer(9),tn=new DataView(tr,1),ti=new Uint8Array(tr,0);function encodeFloat16(u){if(u===1/0)tn.setUint16(0,31744,!1);else if(u===-1/0)tn.setUint16(0,64512,!1);else if(Number.isNaN(u))tn.setUint16(0,32256,!1);else{tn.setFloat32(0,u);let g=tn.getUint32(0),S=(2139095040&g)>>23,R=8388607&g;if(255===S)tn.setUint16(0,31744,!1);else if(0===S)tn.setUint16(0,(2147483648&u)>>16|R>>13,!1);else{let u=S-127;u<-24?tn.setUint16(0,0):u<-14?tn.setUint16(0,(2147483648&g)>>16|1<<24+u,!1):tn.setUint16(0,(2147483648&g)>>16|u+15<<10|R>>13,!1)}}}function readFloat16(u,g){let S;if(u.length-g<2)throw Error(`${eZ} not enough data for float16`);let R=(u[g]<<8)+u[g+1];if(31744===R)return 1/0;if(64512===R)return-1/0;if(32256===R)return NaN;let D=R>>10&31,C=1023&R;return S=0===D?5960464477539063e-23*C:31!==D?(C+1024)*2**(D-25):0===C?1/0:NaN,32768&R?-S:S}function encodeFloat32(u){tn.setFloat32(0,u,!1)}function readFloat32(u,g){if(u.length-g<4)throw Error(`${eZ} not enough data for float32`);let S=(u.byteOffset||0)+g;return new DataView(u.buffer,S,4).getFloat32(0,!1)}function encodeFloat64(u){tn.setFloat64(0,u,!1)}function readFloat64(u,g){if(u.length-g<8)throw Error(`${eZ} not enough data for float64`);let S=(u.byteOffset||0)+g;return new DataView(u.buffer,S,8).getFloat64(0,!1)}function invalidMinor(u,g,S){throw Error(`${eZ} encountered invalid minor (${S}) for major ${u[g]>>>5}`)}function errorer(u){return()=>{throw Error(`${eZ} ${u}`)}}encodeFloat.compareTokens=encodeUint.compareTokens;let ta=[];for(let u=0;u<=23;u++)ta[u]=invalidMinor;ta[24]=decodeUint8,ta[25]=decodeUint16,ta[26]=decodeUint32,ta[27]=decodeUint64,ta[28]=invalidMinor,ta[29]=invalidMinor,ta[30]=invalidMinor,ta[31]=invalidMinor;for(let u=32;u<=55;u++)ta[u]=invalidMinor;ta[56]=decodeNegint8,ta[57]=decodeNegint16,ta[58]=decodeNegint32,ta[59]=decodeNegint64,ta[60]=invalidMinor,ta[61]=invalidMinor,ta[62]=invalidMinor,ta[63]=invalidMinor;for(let u=64;u<=87;u++)ta[u]=decodeBytesCompact;ta[88]=decodeBytes8,ta[89]=decodeBytes16,ta[90]=decodeBytes32,ta[91]=decodeBytes64,ta[92]=invalidMinor,ta[93]=invalidMinor,ta[94]=invalidMinor,ta[95]=errorer("indefinite length bytes/strings are not supported");for(let u=96;u<=119;u++)ta[u]=decodeStringCompact;ta[120]=decodeString8,ta[121]=decodeString16,ta[122]=decodeString32,ta[123]=decodeString64,ta[124]=invalidMinor,ta[125]=invalidMinor,ta[126]=invalidMinor,ta[127]=errorer("indefinite length bytes/strings are not supported");for(let u=128;u<=151;u++)ta[u]=decodeArrayCompact;ta[152]=decodeArray8,ta[153]=decodeArray16,ta[154]=decodeArray32,ta[155]=decodeArray64,ta[156]=invalidMinor,ta[157]=invalidMinor,ta[158]=invalidMinor,ta[159]=decodeArrayIndefinite;for(let u=160;u<=183;u++)ta[u]=decodeMapCompact;ta[184]=decodeMap8,ta[185]=decodeMap16,ta[186]=decodeMap32,ta[187]=decodeMap64,ta[188]=invalidMinor,ta[189]=invalidMinor,ta[190]=invalidMinor,ta[191]=decodeMapIndefinite;for(let u=192;u<=215;u++)ta[u]=decodeTagCompact;ta[216]=decodeTag8,ta[217]=decodeTag16,ta[218]=decodeTag32,ta[219]=decodeTag64,ta[220]=invalidMinor,ta[221]=invalidMinor,ta[222]=invalidMinor,ta[223]=invalidMinor;for(let u=224;u<=243;u++)ta[u]=errorer("simple values are not supported");ta[244]=invalidMinor,ta[245]=invalidMinor,ta[246]=invalidMinor,ta[247]=decodeUndefined,ta[248]=errorer("simple values are not supported"),ta[249]=decodeFloat16,ta[250]=decodeFloat32,ta[251]=decodeFloat64,ta[252]=invalidMinor,ta[253]=invalidMinor,ta[254]=invalidMinor,ta[255]=decodeBreak;let ts=[];for(let u=0;u<24;u++)ts[u]=new Token(Type.uint,u,1);for(let u=-1;u>=-24;u--)ts[31-u]=new Token(Type.negint,u,1);function quickEncodeToken(u){switch(u.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:if(!u.value.length)return fromArray([64]);return;case Type.string:if(""===u.value)return fromArray([96]);return;case Type.array:if(0===u.value)return fromArray([128]);return;case Type.map:if(0===u.value)return fromArray([160]);return;case Type.uint:if(u.value<24)return fromArray([Number(u.value)]);return;case Type.negint:if(u.value>=-24)return fromArray([31-Number(u.value)])}}ts[64]=new Token(Type.bytes,new Uint8Array(0),1),ts[96]=new Token(Type.string,"",1),ts[128]=new Token(Type.array,0,1),ts[160]=new Token(Type.map,0,1),ts[244]=new Token(Type.false,!1,1),ts[245]=new Token(Type.true,!0,1),ts[246]=new Token(Type.null,null,1);let tl={float64:!1,mapSorter,quickEncodeToken:quickEncodeToken};function makeCborEncoders(){let u=[];return u[Type.uint.major]=encodeUint,u[Type.negint.major]=encodeNegint,u[Type.bytes.major]=encodeBytes,u[Type.string.major]=e5,u[Type.array.major]=encodeArray,u[Type.map.major]=encodeMap,u[Type.tag.major]=encodeTag,u[Type.float.major]=encodeFloat,u}let tu=makeCborEncoders(),tc=new Bl;let Ref=class Ref{constructor(u,g){this.obj=u,this.parent=g}includes(u){let g=this;do if(g.obj===u)return!0;while(g=g.parent);return!1}static createCheck(u,g){if(u&&u.includes(g))throw Error(`${e0} object contains circular references`);return new Ref(g,u)}};let td={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},tf={number:(u,g,S,R)=>Number.isInteger(u)&&Number.isSafeInteger(u)?u>=0?new Token(Type.uint,u):new Token(Type.negint,u):new Token(Type.float,u),bigint:(u,g,S,R)=>u>=BigInt(0)?new Token(Type.uint,u):new Token(Type.negint,u),Uint8Array:(u,g,S,R)=>new Token(Type.bytes,u),string:(u,g,S,R)=>new Token(Type.string,u),boolean:(u,g,S,R)=>u?td.true:td.false,null:(u,g,S,R)=>td.null,undefined:(u,g,S,R)=>td.undefined,ArrayBuffer:(u,g,S,R)=>new Token(Type.bytes,new Uint8Array(u)),DataView:(u,g,S,R)=>new Token(Type.bytes,new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),Array(u,g,S,R){if(!u.length)return!0===S.addBreakTokens?[td.emptyArray,new Token(Type.break)]:td.emptyArray;R=Ref.createCheck(R,u);let D=[],C=0;for(let g of u)D[C++]=objectToTokens(g,S,R);return S.addBreakTokens?[new Token(Type.array,u.length),D,new Token(Type.break)]:[new Token(Type.array,u.length),D]},Object(u,g,S,R){let D="Object"!==g,C=D?u.keys():Object.keys(u),E=D?u.size:C.length;if(!E)return!0===S.addBreakTokens?[td.emptyMap,new Token(Type.break)]:td.emptyMap;R=Ref.createCheck(R,u);let T=[],A=0;for(let g of C)T[A++]=[objectToTokens(g,S,R),objectToTokens(D?u.get(g):u[g],S,R)];return(sortMapEntries(T,S),S.addBreakTokens)?[new Token(Type.map,E),T,new Token(Type.break)]:[new Token(Type.map,E),T]}};for(let u of(tf.Map=tf.Object,tf.Buffer=tf.Uint8Array,"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" ")))tf[`${u}Array`]=tf.DataView;function objectToTokens(u,g={},S){let R=is(u),D=g&&g.typeEncoders&&g.typeEncoders[R]||tf[R];if("function"==typeof D){let C=D(u,R,g,S);if(null!=C)return C}let C=tf[R];if(!C)throw Error(`${e0} unsupported type: ${R}`);return C(u,R,g,S)}function sortMapEntries(u,g){g.mapSorter&&u.sort(g.mapSorter)}function mapSorter(u,g){let S=Array.isArray(u[0])?u[0][0]:u[0],R=Array.isArray(g[0])?g[0][0]:g[0];if(S.type!==R.type)return S.type.compare(R.type);let D=S.type.major,C=tu[D].compareTokens(S,R);return 0===C&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),C}function tokensToEncoded(u,g,S,R){if(Array.isArray(g))for(let D of g)tokensToEncoded(u,D,S,R);else S[g.type.major](u,g,R)}function encodeCustom(u,g,S){let R=objectToTokens(u,S);if(!Array.isArray(R)&&S.quickEncodeToken){let u=S.quickEncodeToken(R);if(u)return u;let D=g[R.type.major];if(D.encodedSize){let u=D.encodedSize(R,S),g=new Bl(u);if(D(g,R,S),1!==g.chunks.length)throw Error(`Unexpected error: pre-calculated length for ${R} was wrong`);return asU8A(g.chunks[0])}}return tc.reset(),tokensToEncoded(tc,R,g,S),tc.toBytes(!0)}function encode_encode(u,g){return encodeCustom(u,tu,g=Object.assign({},tl,g))}let th={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};let Tokeniser=class Tokeniser{constructor(u,g={}){this.pos=0,this.data=u,this.options=g}done(){return this.pos>=this.data.length}next(){let u=this.data[this.pos],g=ts[u];if(void 0===g){let S=ta[u];if(!S)throw Error(`${eZ} no decoder for major type ${u>>>5} (byte 0x${u.toString(16).padStart(2,"0")})`);let R=31&u;g=S(this.data,this.pos,R,this.options)}return this.pos+=g.encodedLength,g}};let tp=Symbol.for("DONE"),tm=Symbol.for("BREAK");function tokenToArray(u,g,S){let R=[];for(let D=0;D<u.value;D++){let C=tokensToObject(g,S);if(C===tm){if(u.value===1/0)break;throw Error(`${eZ} got unexpected break to lengthed array`)}if(C===tp)throw Error(`${eZ} found array but not enough entries (got ${D}, expected ${u.value})`);R[D]=C}return R}function tokenToMap(u,g,S){let R=!0===S.useMaps,D=R?void 0:{},C=R?new Map:void 0;for(let E=0;E<u.value;E++){let T=tokensToObject(g,S);if(T===tm){if(u.value===1/0)break;throw Error(`${eZ} got unexpected break to lengthed map`)}if(T===tp)throw Error(`${eZ} found map but not enough entries (got ${E} [no key], expected ${u.value})`);if(!0!==R&&"string"!=typeof T)throw Error(`${eZ} non-string keys not supported (got ${typeof T})`);if(!0===S.rejectDuplicateMapKeys&&(R&&C.has(T)||!R&&T in D))throw Error(`${eZ} found repeat map key "${T}"`);let A=tokensToObject(g,S);if(A===tp)throw Error(`${eZ} found map but not enough entries (got ${E} [no value], expected ${u.value})`);R?C.set(T,A):D[T]=A}return R?C:D}function tokensToObject(u,g){if(u.done())return tp;let S=u.next();if(S.type===Type.break)return tm;if(S.type.terminal)return S.value;if(S.type===Type.array)return tokenToArray(S,u,g);if(S.type===Type.map)return tokenToMap(S,u,g);if(S.type===Type.tag){if(g.tags&&"function"==typeof g.tags[S.value]){let R=tokensToObject(u,g);return g.tags[S.value](R)}throw Error(`${eZ} tag not supported (${S.value})`)}throw Error("unsupported")}function decode_decode(u,g){if(!(u instanceof Uint8Array))throw Error(`${eZ} data to decode must be a Uint8Array`);g=Object.assign({},th,g);let S=g.tokenizer||new Tokeniser(u,g),R=tokensToObject(S,g);if(R===tp)throw Error(`${eZ} did not find any content to decode`);if(R===tm)throw Error(`${eZ} got unexpected break`);if(!S.done())throw Error(`${eZ} too many terminals, data makes no sense`);return R}let ty=42;function cidEncoder(u){if(u.asCID!==u)return null;let g=cid_CID.asCID(u);if(!g)return null;let S=new Uint8Array(g.bytes.byteLength+1);return S.set(g.bytes,1),[new Token(Type.tag,ty),new Token(Type.bytes,S)]}function undefinedEncoder(){throw Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(u){if(Number.isNaN(u))throw Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(u===1/0||u===-1/0)throw Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}let tb={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(u){if(0!==u[0])throw Error("Invalid CID for CBOR tag 42; expected leading 0x00");return cid_CID.decode(u.subarray(1))}let tg={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};tg.tags[ty]=cidDecoder;let t_=113,esm_encode=u=>encode_encode(u,tb),esm_decode=u=>decode_decode(u,tg),tS={SHA2_256:18,LENGTH:32,DAG_PB:112};async function readVarint(u){let g=await u.upTo(8),S=et.decode(g);return u.seek(et.decode.bytes),S}async function readHeader(u){let g=await readVarint(u);if(0===g)throw Error("Invalid CAR header (zero length)");let S=await u.exactly(g);u.seek(g);let R=esm_decode(S);if(null==R||Array.isArray(R)||"object"!=typeof R)throw Error("Invalid CAR header format");if(1!==R.version){if("string"==typeof R.version)throw Error(`Invalid CAR version: "${R.version}"`);throw Error(`Invalid CAR version: ${R.version}`)}if(!Array.isArray(R.roots)||Object.keys(R).filter(u=>"roots"!==u&&"version"!==u).length)throw Error("Invalid CAR header format");return R}async function readMultihash(u){let g=await u.upTo(8);et.decode(g);let S=et.decode.bytes,R=et.decode(g.subarray(et.decode.bytes)),D=et.decode.bytes,C=S+D+R,E=await u.exactly(C);return u.seek(C),E}async function readCid(u){let g=await u.exactly(2);if(g[0]===tS.SHA2_256&&g[1]===tS.LENGTH){let g=await u.exactly(34);u.seek(34);let S=digest_decode(g);return cid_CID.create(0,tS.DAG_PB,S)}let S=await readVarint(u);if(1!==S)throw Error(`Unexpected CID version (${S})`);let R=await readVarint(u),D=await readMultihash(u),C=digest_decode(D);return cid_CID.create(S,R,C)}async function readBlockHead(u){let g=u.pos,S=await readVarint(u);if(0===S)throw Error("Invalid CAR section (zero length)");S+=u.pos-g;let R=await readCid(u),D=S-(u.pos-g);return{cid:R,length:S,blockLength:D}}async function readBlock(u){let{cid:g,blockLength:S}=await readBlockHead(u),R=await u.exactly(S);return u.seek(S),{bytes:R,cid:g}}async function readBlockIndex(u){let g=u.pos,{cid:S,length:R,blockLength:D}=await readBlockHead(u),C={cid:S,length:R,blockLength:D,offset:g,blockOffset:u.pos};return u.seek(C.blockLength),C}function createDecoder(u){let g=readHeader(u);return{header:()=>g,async *blocks(){for(await g;(await u.upTo(8)).length>0;)yield await readBlock(u)},async *blocksIndex(){for(await g;(await u.upTo(8)).length>0;)yield await readBlockIndex(u)}}}function bytesReader(u){let g=0;return{upTo:async S=>u.subarray(g,g+Math.min(S,u.length-g)),async exactly(S){if(S>u.length-g)throw Error("Unexpected end of data");return u.subarray(g,g+S)},seek(u){g+=u},get pos(){return g}}}function chunkReader(u){let g=0,S=0,R=0,D=new Uint8Array(0),read=async g=>{S=D.length-R;let C=[D.subarray(R)];for(;S<g;){let g=await u();if(null==g)break;S<0?g.length>S&&C.push(g.subarray(-S)):C.push(g),S+=g.length}D=new Uint8Array(C.reduce((u,g)=>u+g.length,0));let E=0;for(let u of C)D.set(u,E),E+=u.length;R=0};return{upTo:async u=>(D.length-R<u&&await read(u),D.subarray(R,R+Math.min(D.length-R,u))),async exactly(u){if(D.length-R<u&&await read(u),D.length-R<u)throw Error("Unexpected end of data");return D.subarray(R,R+u)},seek(u){g+=u,R+=u},get pos(){return g}}}function asyncIterableReader(u){let g=u[Symbol.asyncIterator]();return chunkReader(async function(){let u=await g.next();return u.done?null:u.value})}let reader_browser_CarReader=class reader_browser_CarReader{constructor(u,g,S){this._version=u,this._roots=g,this._blocks=S,this._keys=S.map(u=>u.cid.toString())}get version(){return this._version}async getRoots(){return this._roots}async has(u){return this._keys.indexOf(u.toString())>-1}async get(u){let g=this._keys.indexOf(u.toString());return g>-1?this._blocks[g]:void 0}async *blocks(){for(let u of this._blocks)yield u}async *cids(){for(let u of this._blocks)yield u.cid}static async fromBytes(u){if(!(u instanceof Uint8Array))throw TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(u))}static async fromIterable(u){if(!u||"function"!=typeof u[Symbol.asyncIterator])throw TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(u))}};async function decodeReaderComplete(u){let g=createDecoder(u),{version:S,roots:R}=await g.header(),D=[];for await(let u of g.blocks())D.push(u);return new reader_browser_CarReader(S,R,D)}let tw=(0,ee.promisify)(Z.read);let CarReader=class CarReader extends reader_browser_CarReader{static async readRaw(u,g){let S;let{cid:R,blockLength:D,blockOffset:C}=g,E=new Uint8Array(D);if("number"==typeof u)S=(await tw(u,E,0,D,C)).bytesRead;else if("object"==typeof u&&"function"==typeof u.read)S=(await u.read(E,0,D,C)).bytesRead;else throw TypeError("Bad fd");if(S!==D)throw Error(`Failed to read entire block (${S} instead of ${D})`);return{cid:R,bytes:E}}};let indexer_CarIndexer=class indexer_CarIndexer{constructor(u,g,S){this._version=u,this._roots=g,this._iterator=S}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(u){if(!(u instanceof Uint8Array))throw TypeError("fromBytes() requires a Uint8Array");return decodeIndexerComplete(bytesReader(u))}static async fromIterable(u){if(!u||"function"!=typeof u[Symbol.asyncIterator])throw TypeError("fromIterable() requires an async iterable");return decodeIndexerComplete(asyncIterableReader(u))}};async function decodeIndexerComplete(u){let g=createDecoder(u),{version:S,roots:R}=await g.header();return new indexer_CarIndexer(S,R,g.blocksIndex())}let CarIteratorBase=class CarIteratorBase{constructor(u,g,S){this._version=u,this._roots=g,this._iterable=S,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}};let CarBlockIterator=class CarBlockIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw Error("Cannot decode more than once");if(!this._iterable)throw Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(u){let{version:g,roots:S,iterator:R}=await fromBytes(u);return new CarBlockIterator(g,S,R)}static async fromIterable(u){let{version:g,roots:S,iterator:R}=await fromIterable(u);return new CarBlockIterator(g,S,R)}};let CarCIDIterator=class CarCIDIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw Error("Cannot decode more than once");if(!this._iterable)throw Error("Block iterable not found");this._decoded=!0;let u=this._iterable[Symbol.asyncIterator]();return{async next(){let g=await u.next();return g.done?g:{done:!1,value:g.value.cid}}}}static async fromBytes(u){let{version:g,roots:S,iterator:R}=await fromBytes(u);return new CarCIDIterator(g,S,R)}static async fromIterable(u){let{version:g,roots:S,iterator:R}=await fromIterable(u);return new CarCIDIterator(g,S,R)}};async function fromBytes(u){if(!(u instanceof Uint8Array))throw TypeError("fromBytes() requires a Uint8Array");return decodeIterator(bytesReader(u))}async function fromIterable(u){if(!u||"function"!=typeof u[Symbol.asyncIterator])throw TypeError("fromIterable() requires an async iterable");return decodeIterator(asyncIterableReader(u))}async function decodeIterator(u){let g=createDecoder(u),{version:S,roots:R}=await g.header();return{version:S,roots:R,iterator:g.blocks()}}function createHeader(u){let g=esm_encode({version:1,roots:u}),S=et.encode(g.length),R=new Uint8Array(S.length+g.length);return R.set(S,0),R.set(g,S.length),R}function createEncoder(u){return{async setRoots(g){let S=createHeader(g);await u.write(S)},async writeBlock(g){let{cid:S,bytes:R}=g;await u.write(new Uint8Array(et.encode(S.bytes.length+R.length))),await u.write(S.bytes),R.length&&await u.write(R)},close:async()=>u.end()}}function noop(){}function iterator_channel_create(){let u=[],g=null,S=noop,R=!1,D=null,C=noop,makeDrainer=()=>(g||(g=new Promise(u=>{S=()=>{g=null,S=noop,u()}})),g),E={write(g){u.push(g);let S=makeDrainer();return C(),S},async end(){R=!0;let u=makeDrainer();return C(),u}},T={async next(){let g=u.shift();return g?(0===u.length&&S(),{done:!1,value:g}):R?(S(),{done:!0,value:void 0}):(D||(D=new Promise(u=>{C=()=>(D=null,C=noop,u(T.next()))})),D)}};return{writer:E,iterator:T}}let writer_browser_CarWriter=class writer_browser_CarWriter{constructor(u,g){this._encoder=g,this._mutex=g.setRoots(u),this._ended=!1}async put(u){if(!(u.bytes instanceof Uint8Array)||!u.cid)throw TypeError("Can only write {cid, bytes} objects");if(this._ended)throw Error("Already closed");let g=cid_CID.asCID(u.cid);if(!g)throw TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:g,bytes:u.bytes})),this._mutex}async close(){if(this._ended)throw Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(u){u=toRoots(u);let{encoder:g,iterator:S}=encodeWriter(),R=new writer_browser_CarWriter(u,g),D=new CarWriterOut(S);return{writer:R,out:D}}static createAppender(){let{encoder:u,iterator:g}=encodeWriter();u.setRoots=()=>Promise.resolve();let S=new writer_browser_CarWriter([],u),R=new CarWriterOut(g);return{writer:S,out:R}}static async updateRootsInBytes(u,g){let S=bytesReader(u);await readHeader(S);let R=createHeader(g);if(S.pos!==R.length)throw Error(`updateRoots() can only overwrite a header of the same length (old header is ${S.pos} bytes, new header is ${R.length} bytes)`);return u.set(R,0),u}};let CarWriterOut=class CarWriterOut{constructor(u){this._iterator=u}[Symbol.asyncIterator](){if(this._iterating)throw Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function encodeWriter(){let u=iterator_channel_create(),{writer:g,iterator:S}=u,R=createEncoder(g);return{encoder:R,iterator:S}}function toRoots(u){if(void 0===u)return[];if(!Array.isArray(u)){let g=cid_CID.asCID(u);if(!g)throw TypeError("roots must be a single CID or an array of CIDs");return[g]}let g=[];for(let S of u){let u=cid_CID.asCID(S);if(!u)throw TypeError("roots must be a single CID or an array of CIDs");g.push(u)}return g}let tv=(0,ee.promisify)(Z.read),tR=(0,ee.promisify)(Z.write);let writer_CarWriter=class writer_CarWriter extends writer_browser_CarWriter{static async updateRootsInFile(u,g){let S,R;let D=256,C=0;if("number"==typeof u)R=async()=>(await tv(u,S,0,D,C)).bytesRead;else if("object"==typeof u&&"function"==typeof u.read)R=async()=>(await u.read(S,0,D,C)).bytesRead;else throw TypeError("Bad fd");let E=chunkReader(async()=>{S=new Uint8Array(D);let u=await R();return C+=u,u<D?S.subarray(0,u):S});await readHeader(E);let T=createHeader(g);if(E.pos!==T.length)throw Error(`updateRoots() can only overwrite a header of the same length (old header is ${E.pos} bytes, new header is ${T.length} bytes)`);"number"==typeof u?await tR(u,T,0,T.length,0):"object"==typeof u&&"function"==typeof u.read&&await u.write(T,0,T.length,0)}};var tD=S(12781),tC=S(51046),tE=S(70890);let tx=tE;var tT=S(6113);let hasher_from=({name:u,code:g,encode:S})=>new Hasher(u,g,S);let Hasher=class Hasher{constructor(u,g,S){this.name=u,this.code=g,this.encode=S}digest(u){if(u instanceof Uint8Array){let g=this.encode(u);return g instanceof Uint8Array?create(this.code,g):g.then(u=>create(this.code,u))}throw Error("Unknown type, must be binary type")}};let tk=hasher_from({name:"sha2-256",code:18,encode:u=>coerce(tT.createHash("sha256").update(u).digest())}),tA=hasher_from({name:"sha2-512",code:19,encode:u=>coerce(tT.createHash("sha512").update(u).digest())});var tB=S(63655);function fromNumberTo32BitBuf(u){let g=[,,,,];for(let S=0;S<4;S++)g[S]=255&u,u>>=8;return new Uint8Array(g)}hasher_from({name:"murmur3-32",code:35,encode:u=>fromNumberTo32BitBuf(tB.x86.hash32(u))});let tI=hasher_from({name:"murmur3-128",code:34,encode:u=>fromHex(tB.x64.hash128(u))});async function hamtHashFn(u){return(await tI.encode(u)).slice(0,8).reverse()}let tP={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:tk,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn,hamtHashCode:34,hamtBucketBits:8},src_options=(u={})=>{let g=tx.bind({ignoreUndefined:!0});return g(tP,u)};var tW=S(17058),tO=S(51883);let tj=tO.Reader,tF=tO.Writer,tL=tO.util,tz=tO.roots["ipfs-unixfs"]||(tO.roots["ipfs-unixfs"]={}),tU=tz.Data=(()=>{function Data(u){if(this.blocksizes=[],u)for(var g=Object.keys(u),S=0;S<g.length;++S)null!=u[g[S]]&&(this[g[S]]=u[g[S]])}return Data.prototype.Type=0,Data.prototype.Data=tL.newBuffer([]),Data.prototype.filesize=tL.Long?tL.Long.fromBits(0,0,!0):0,Data.prototype.blocksizes=tL.emptyArray,Data.prototype.hashType=tL.Long?tL.Long.fromBits(0,0,!0):0,Data.prototype.fanout=tL.Long?tL.Long.fromBits(0,0,!0):0,Data.prototype.mode=0,Data.prototype.mtime=null,Data.encode=function(u,g){if(g||(g=tF.create()),g.uint32(8).int32(u.Type),null!=u.Data&&Object.hasOwnProperty.call(u,"Data")&&g.uint32(18).bytes(u.Data),null!=u.filesize&&Object.hasOwnProperty.call(u,"filesize")&&g.uint32(24).uint64(u.filesize),null!=u.blocksizes&&u.blocksizes.length)for(var S=0;S<u.blocksizes.length;++S)g.uint32(32).uint64(u.blocksizes[S]);return null!=u.hashType&&Object.hasOwnProperty.call(u,"hashType")&&g.uint32(40).uint64(u.hashType),null!=u.fanout&&Object.hasOwnProperty.call(u,"fanout")&&g.uint32(48).uint64(u.fanout),null!=u.mode&&Object.hasOwnProperty.call(u,"mode")&&g.uint32(56).uint32(u.mode),null!=u.mtime&&Object.hasOwnProperty.call(u,"mtime")&&tz.UnixTime.encode(u.mtime,g.uint32(66).fork()).ldelim(),g},Data.decode=function(u,g){u instanceof tj||(u=tj.create(u));for(var S=void 0===g?u.len:u.pos+g,R=new tz.Data;u.pos<S;){var D=u.uint32();switch(D>>>3){case 1:R.Type=u.int32();break;case 2:R.Data=u.bytes();break;case 3:R.filesize=u.uint64();break;case 4:if(R.blocksizes&&R.blocksizes.length||(R.blocksizes=[]),(7&D)==2)for(var C=u.uint32()+u.pos;u.pos<C;)R.blocksizes.push(u.uint64());else R.blocksizes.push(u.uint64());break;case 5:R.hashType=u.uint64();break;case 6:R.fanout=u.uint64();break;case 7:R.mode=u.uint32();break;case 8:R.mtime=tz.UnixTime.decode(u,u.uint32());break;default:u.skipType(7&D)}}if(!R.hasOwnProperty("Type"))throw tL.ProtocolError("missing required 'Type'",{instance:R});return R},Data.fromObject=function(u){if(u instanceof tz.Data)return u;var g=new tz.Data;switch(u.Type){case"Raw":case 0:g.Type=0;break;case"Directory":case 1:g.Type=1;break;case"File":case 2:g.Type=2;break;case"Metadata":case 3:g.Type=3;break;case"Symlink":case 4:g.Type=4;break;case"HAMTShard":case 5:g.Type=5}if(null!=u.Data&&("string"==typeof u.Data?tL.base64.decode(u.Data,g.Data=tL.newBuffer(tL.base64.length(u.Data)),0):u.Data.length&&(g.Data=u.Data)),null!=u.filesize&&(tL.Long?(g.filesize=tL.Long.fromValue(u.filesize)).unsigned=!0:"string"==typeof u.filesize?g.filesize=parseInt(u.filesize,10):"number"==typeof u.filesize?g.filesize=u.filesize:"object"==typeof u.filesize&&(g.filesize=new tL.LongBits(u.filesize.low>>>0,u.filesize.high>>>0).toNumber(!0))),u.blocksizes){if(!Array.isArray(u.blocksizes))throw TypeError(".Data.blocksizes: array expected");g.blocksizes=[];for(var S=0;S<u.blocksizes.length;++S)tL.Long?(g.blocksizes[S]=tL.Long.fromValue(u.blocksizes[S])).unsigned=!0:"string"==typeof u.blocksizes[S]?g.blocksizes[S]=parseInt(u.blocksizes[S],10):"number"==typeof u.blocksizes[S]?g.blocksizes[S]=u.blocksizes[S]:"object"==typeof u.blocksizes[S]&&(g.blocksizes[S]=new tL.LongBits(u.blocksizes[S].low>>>0,u.blocksizes[S].high>>>0).toNumber(!0))}if(null!=u.hashType&&(tL.Long?(g.hashType=tL.Long.fromValue(u.hashType)).unsigned=!0:"string"==typeof u.hashType?g.hashType=parseInt(u.hashType,10):"number"==typeof u.hashType?g.hashType=u.hashType:"object"==typeof u.hashType&&(g.hashType=new tL.LongBits(u.hashType.low>>>0,u.hashType.high>>>0).toNumber(!0))),null!=u.fanout&&(tL.Long?(g.fanout=tL.Long.fromValue(u.fanout)).unsigned=!0:"string"==typeof u.fanout?g.fanout=parseInt(u.fanout,10):"number"==typeof u.fanout?g.fanout=u.fanout:"object"==typeof u.fanout&&(g.fanout=new tL.LongBits(u.fanout.low>>>0,u.fanout.high>>>0).toNumber(!0))),null!=u.mode&&(g.mode=u.mode>>>0),null!=u.mtime){if("object"!=typeof u.mtime)throw TypeError(".Data.mtime: object expected");g.mtime=tz.UnixTime.fromObject(u.mtime)}return g},Data.toObject=function(u,g){g||(g={});var S={};if((g.arrays||g.defaults)&&(S.blocksizes=[]),g.defaults){if(S.Type=g.enums===String?"Raw":0,g.bytes===String?S.Data="":(S.Data=[],g.bytes!==Array&&(S.Data=tL.newBuffer(S.Data))),tL.Long){var R=new tL.Long(0,0,!0);S.filesize=g.longs===String?R.toString():g.longs===Number?R.toNumber():R}else S.filesize=g.longs===String?"0":0;if(tL.Long){var R=new tL.Long(0,0,!0);S.hashType=g.longs===String?R.toString():g.longs===Number?R.toNumber():R}else S.hashType=g.longs===String?"0":0;if(tL.Long){var R=new tL.Long(0,0,!0);S.fanout=g.longs===String?R.toString():g.longs===Number?R.toNumber():R}else S.fanout=g.longs===String?"0":0;S.mode=0,S.mtime=null}if(null!=u.Type&&u.hasOwnProperty("Type")&&(S.Type=g.enums===String?tz.Data.DataType[u.Type]:u.Type),null!=u.Data&&u.hasOwnProperty("Data")&&(S.Data=g.bytes===String?tL.base64.encode(u.Data,0,u.Data.length):g.bytes===Array?Array.prototype.slice.call(u.Data):u.Data),null!=u.filesize&&u.hasOwnProperty("filesize")&&("number"==typeof u.filesize?S.filesize=g.longs===String?String(u.filesize):u.filesize:S.filesize=g.longs===String?tL.Long.prototype.toString.call(u.filesize):g.longs===Number?new tL.LongBits(u.filesize.low>>>0,u.filesize.high>>>0).toNumber(!0):u.filesize),u.blocksizes&&u.blocksizes.length){S.blocksizes=[];for(var D=0;D<u.blocksizes.length;++D)"number"==typeof u.blocksizes[D]?S.blocksizes[D]=g.longs===String?String(u.blocksizes[D]):u.blocksizes[D]:S.blocksizes[D]=g.longs===String?tL.Long.prototype.toString.call(u.blocksizes[D]):g.longs===Number?new tL.LongBits(u.blocksizes[D].low>>>0,u.blocksizes[D].high>>>0).toNumber(!0):u.blocksizes[D]}return null!=u.hashType&&u.hasOwnProperty("hashType")&&("number"==typeof u.hashType?S.hashType=g.longs===String?String(u.hashType):u.hashType:S.hashType=g.longs===String?tL.Long.prototype.toString.call(u.hashType):g.longs===Number?new tL.LongBits(u.hashType.low>>>0,u.hashType.high>>>0).toNumber(!0):u.hashType),null!=u.fanout&&u.hasOwnProperty("fanout")&&("number"==typeof u.fanout?S.fanout=g.longs===String?String(u.fanout):u.fanout:S.fanout=g.longs===String?tL.Long.prototype.toString.call(u.fanout):g.longs===Number?new tL.LongBits(u.fanout.low>>>0,u.fanout.high>>>0).toNumber(!0):u.fanout),null!=u.mode&&u.hasOwnProperty("mode")&&(S.mode=u.mode),null!=u.mtime&&u.hasOwnProperty("mtime")&&(S.mtime=tz.UnixTime.toObject(u.mtime,g)),S},Data.prototype.toJSON=function(){return this.constructor.toObject(this,tO.util.toJSONOptions)},Data.DataType=function(){let u={},g=Object.create(u);return g[u[0]="Raw"]=0,g[u[1]="Directory"]=1,g[u[2]="File"]=2,g[u[3]="Metadata"]=3,g[u[4]="Symlink"]=4,g[u[5]="HAMTShard"]=5,g}(),Data})();tz.UnixTime=(()=>{function UnixTime(u){if(u)for(var g=Object.keys(u),S=0;S<g.length;++S)null!=u[g[S]]&&(this[g[S]]=u[g[S]])}return UnixTime.prototype.Seconds=tL.Long?tL.Long.fromBits(0,0,!1):0,UnixTime.prototype.FractionalNanoseconds=0,UnixTime.encode=function(u,g){return g||(g=tF.create()),g.uint32(8).int64(u.Seconds),null!=u.FractionalNanoseconds&&Object.hasOwnProperty.call(u,"FractionalNanoseconds")&&g.uint32(21).fixed32(u.FractionalNanoseconds),g},UnixTime.decode=function(u,g){u instanceof tj||(u=tj.create(u));for(var S=void 0===g?u.len:u.pos+g,R=new tz.UnixTime;u.pos<S;){var D=u.uint32();switch(D>>>3){case 1:R.Seconds=u.int64();break;case 2:R.FractionalNanoseconds=u.fixed32();break;default:u.skipType(7&D)}}if(!R.hasOwnProperty("Seconds"))throw tL.ProtocolError("missing required 'Seconds'",{instance:R});return R},UnixTime.fromObject=function(u){if(u instanceof tz.UnixTime)return u;var g=new tz.UnixTime;return null!=u.Seconds&&(tL.Long?(g.Seconds=tL.Long.fromValue(u.Seconds)).unsigned=!1:"string"==typeof u.Seconds?g.Seconds=parseInt(u.Seconds,10):"number"==typeof u.Seconds?g.Seconds=u.Seconds:"object"==typeof u.Seconds&&(g.Seconds=new tL.LongBits(u.Seconds.low>>>0,u.Seconds.high>>>0).toNumber())),null!=u.FractionalNanoseconds&&(g.FractionalNanoseconds=u.FractionalNanoseconds>>>0),g},UnixTime.toObject=function(u,g){g||(g={});var S={};if(g.defaults){if(tL.Long){var R=new tL.Long(0,0,!1);S.Seconds=g.longs===String?R.toString():g.longs===Number?R.toNumber():R}else S.Seconds=g.longs===String?"0":0;S.FractionalNanoseconds=0}return null!=u.Seconds&&u.hasOwnProperty("Seconds")&&("number"==typeof u.Seconds?S.Seconds=g.longs===String?String(u.Seconds):u.Seconds:S.Seconds=g.longs===String?tL.Long.prototype.toString.call(u.Seconds):g.longs===Number?new tL.LongBits(u.Seconds.low>>>0,u.Seconds.high>>>0).toNumber():u.Seconds),null!=u.FractionalNanoseconds&&u.hasOwnProperty("FractionalNanoseconds")&&(S.FractionalNanoseconds=u.FractionalNanoseconds),S},UnixTime.prototype.toJSON=function(){return this.constructor.toObject(this,tO.util.toJSONOptions)},UnixTime})(),tz.Metadata=(()=>{function Metadata(u){if(u)for(var g=Object.keys(u),S=0;S<g.length;++S)null!=u[g[S]]&&(this[g[S]]=u[g[S]])}return Metadata.prototype.MimeType="",Metadata.encode=function(u,g){return g||(g=tF.create()),null!=u.MimeType&&Object.hasOwnProperty.call(u,"MimeType")&&g.uint32(10).string(u.MimeType),g},Metadata.decode=function(u,g){u instanceof tj||(u=tj.create(u));for(var S=void 0===g?u.len:u.pos+g,R=new tz.Metadata;u.pos<S;){var D=u.uint32();D>>>3==1?R.MimeType=u.string():u.skipType(7&D)}return R},Metadata.fromObject=function(u){if(u instanceof tz.Metadata)return u;var g=new tz.Metadata;return null!=u.MimeType&&(g.MimeType=String(u.MimeType)),g},Metadata.toObject=function(u,g){g||(g={});var S={};return g.defaults&&(S.MimeType=""),null!=u.MimeType&&u.hasOwnProperty("MimeType")&&(S.MimeType=u.MimeType),S},Metadata.prototype.toJSON=function(){return this.constructor.toObject(this,tO.util.toJSONOptions)},Metadata})();let tN=tU,tM=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],tq=["directory","hamt-sharded-directory"],t$=parseInt("0644",8),tH=parseInt("0755",8);function parseMode(u){return null==u?void 0:"number"==typeof u?4095&u:"0"===(u=u.toString()).substring(0,1)?4095&parseInt(u,8):4095&parseInt(u,10)}function parseMtime(u){let g;if(null!=u){if(null!=u.secs&&(g={secs:u.secs,nsecs:u.nsecs}),null!=u.Seconds&&(g={secs:u.Seconds,nsecs:u.FractionalNanoseconds}),Array.isArray(u)&&(g={secs:u[0],nsecs:u[1]}),u instanceof Date){let S=u.getTime(),R=Math.floor(S/1e3);g={secs:R,nsecs:(S-1e3*R)*1e3}}if(Object.prototype.hasOwnProperty.call(g,"secs")){if(null!=g&&null!=g.nsecs&&(g.nsecs<0||g.nsecs>999999999))throw tW(Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return g}}}let UnixFS=class UnixFS{static unmarshal(u){let g=tN.decode(u),S=tN.toObject(g,{defaults:!1,arrays:!0,longs:Number,objects:!1}),R=new UnixFS({type:tM[S.Type],data:S.Data,blockSizes:S.blocksizes,mode:S.mode,mtime:S.mtime?{secs:S.mtime.Seconds,nsecs:S.mtime.FractionalNanoseconds}:void 0});return R._originalMode=S.mode||0,R}constructor(u={type:"file"}){let{type:g,data:S,blockSizes:R,hashType:D,fanout:C,mtime:E,mode:T}=u;if(g&&!tM.includes(g))throw tW(Error("Type: "+g+" is not valid"),"ERR_INVALID_TYPE");this.type=g||"file",this.data=S,this.hashType=D,this.fanout=C,this.blockSizes=R||[],this._originalMode=0,this.mode=parseMode(T),E&&(this.mtime=parseMtime(E),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(u){this._mode=this.isDirectory()?tH:t$;let g=parseMode(u);void 0!==g&&(this._mode=g)}get mode(){return this._mode}isDirectory(){return!!(this.type&&tq.includes(this.type))}addBlockSize(u){this.blockSizes.push(u)}removeBlockSize(u){this.blockSizes.splice(u,1)}fileSize(){if(this.isDirectory())return 0;let u=0;return this.blockSizes.forEach(g=>{u+=g}),this.data&&(u+=this.data.length),u}marshal(){let u,g,S;switch(this.type){case"raw":u=tN.DataType.Raw;break;case"directory":u=tN.DataType.Directory;break;case"file":u=tN.DataType.File;break;case"metadata":u=tN.DataType.Metadata;break;case"symlink":u=tN.DataType.Symlink;break;case"hamt-sharded-directory":u=tN.DataType.HAMTShard;break;default:throw tW(Error("Type: "+u+" is not valid"),"ERR_INVALID_TYPE")}let R=this.data;if(this.data&&this.data.length||(R=void 0),null!=this.mode&&((g=4294963200&this._originalMode|(parseMode(this.mode)||0))!==t$||this.isDirectory()||(g=void 0),g===tH&&this.isDirectory()&&(g=void 0)),null!=this.mtime){let u=parseMtime(this.mtime);u&&0===(S={Seconds:u.secs,FractionalNanoseconds:u.nsecs}).FractionalNanoseconds&&delete S.FractionalNanoseconds}let D={Type:u,Data:R,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:g,mtime:S};return tN.encode(D).finish()}};let tV=new TextDecoder;function decodeVarint(u,g){let S=0;for(let R=0;;R+=7){if(R>=64)throw Error("protobuf: varint overflow");if(g>=u.length)throw Error("protobuf: unexpected end of data");let D=u[g++];if(S+=R<28?(127&D)<<R:(127&D)*2**R,D<128)break}return[S,g]}function decodeBytes(u,g){let S;[S,g]=decodeVarint(u,g);let R=g+S;if(S<0||R<0)throw Error("protobuf: invalid length");if(R>u.length)throw Error("protobuf: unexpected end of data");return[u.subarray(g,R),R]}function decodeKey(u,g){let S;return[S,g]=decodeVarint(u,g),[7&S,S>>3,g]}function decodeLink(u){let g={},S=u.length,R=0;for(;R<S;){let S,D;if([S,D,R]=decodeKey(u,R),1===D){if(g.Hash)throw Error("protobuf: (PBLink) duplicate Hash section");if(2!==S)throw Error(`protobuf: (PBLink) wrong wireType (${S}) for Hash`);if(void 0!==g.Name)throw Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==g.Tsize)throw Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[g.Hash,R]=decodeBytes(u,R)}else if(2===D){let D;if(void 0!==g.Name)throw Error("protobuf: (PBLink) duplicate Name section");if(2!==S)throw Error(`protobuf: (PBLink) wrong wireType (${S}) for Name`);if(void 0!==g.Tsize)throw Error("protobuf: (PBLink) invalid order, found Tsize before Name");[D,R]=decodeBytes(u,R),g.Name=tV.decode(D)}else if(3===D){if(void 0!==g.Tsize)throw Error("protobuf: (PBLink) duplicate Tsize section");if(0!==S)throw Error(`protobuf: (PBLink) wrong wireType (${S}) for Tsize`);[g.Tsize,R]=decodeVarint(u,R)}else throw Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${D}`)}if(R>S)throw Error("protobuf: (PBLink) unexpected end of data");return g}function decodeNode(u){let g,S;let R=u.length,D=0,C=!1;for(;D<R;){let R,E;if([R,E,D]=decodeKey(u,D),2!==R)throw Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${R}`);if(1===E){if(S)throw Error("protobuf: (PBNode) duplicate Data section");[S,D]=decodeBytes(u,D),g&&(C=!0)}else if(2===E){let S;if(C)throw Error("protobuf: (PBNode) duplicate Links section");g||(g=[]),[S,D]=decodeBytes(u,D),g.push(decodeLink(S))}else throw Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${E}`)}if(D>R)throw Error("protobuf: (PBNode) unexpected end of data");let E={};return S&&(E.Data=S),E.Links=g||[],E}let tQ=new TextEncoder,tG=4294967296,tY=2147483648;function encodeLink(u,g){let S=g.length;if("number"==typeof u.Tsize){if(u.Tsize<0)throw Error("Tsize cannot be negative");if(!Number.isSafeInteger(u.Tsize))throw Error("Tsize too large for encoding");S=encodeVarint(g,S,u.Tsize)-1,g[S]=24}if("string"==typeof u.Name){let R=tQ.encode(u.Name);S-=R.length,g.set(R,S),S=encodeVarint(g,S,R.length)-1,g[S]=18}return u.Hash&&(S-=u.Hash.length,g.set(u.Hash,S),S=encodeVarint(g,S,u.Hash.length)-1,g[S]=10),g.length-S}function encodeNode(u){let g=sizeNode(u),S=new Uint8Array(g),R=g;if(u.Data&&(R-=u.Data.length,S.set(u.Data,R),R=encodeVarint(S,R,u.Data.length)-1,S[R]=10),u.Links)for(let g=u.Links.length-1;g>=0;g--){let D=encodeLink(u.Links[g],S.subarray(0,R));R-=D,R=encodeVarint(S,R,D)-1,S[R]=18}return S}function sizeLink(u){let g=0;if(u.Hash){let S=u.Hash.length;g+=1+S+sov(S)}if("string"==typeof u.Name){let S=tQ.encode(u.Name).length;g+=1+S+sov(S)}return"number"==typeof u.Tsize&&(g+=1+sov(u.Tsize)),g}function sizeNode(u){let g=0;if(u.Data){let S=u.Data.length;g+=1+S+sov(S)}if(u.Links)for(let S of u.Links){let u=sizeLink(S);g+=1+u+sov(u)}return g}function encodeVarint(u,g,S){g-=sov(S);let R=g;for(;S>=tY;)u[g++]=127&S|128,S/=128;for(;S>=128;)u[g++]=127&S|128,S>>>=7;return u[g]=S,R}function sov(u){return u%2==0&&u++,Math.floor((len64(u)+6)/7)}function len64(u){let g=0;return u>=tG&&(u=Math.floor(u/tG),g=32),u>=65536&&(u>>>=16,g+=16),u>=256&&(u>>>=8,g+=8),g+tX[u]}let tX=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],tK=["Data","Links"],tJ=["Hash","Name","Tsize"],tZ=new TextEncoder;function linkComparator(u,g){if(u===g)return 0;let S=u.Name?tZ.encode(u.Name):[],R=g.Name?tZ.encode(g.Name):[],D=S.length,C=R.length;for(let u=0,g=Math.min(D,C);u<g;++u)if(S[u]!==R[u]){D=S[u],C=R[u];break}return D<C?-1:C<D?1:0}function hasOnlyProperties(u,g){return!Object.keys(u).some(u=>!g.includes(u))}function asLink(u){if("object"==typeof u.asCID){let g=cid_CID.asCID(u);if(!g)throw TypeError("Invalid DAG-PB form");return{Hash:g}}if("object"!=typeof u||Array.isArray(u))throw TypeError("Invalid DAG-PB form");let g={};if(u.Hash){let S=cid_CID.asCID(u.Hash);try{!S&&("string"==typeof u.Hash?S=cid_CID.parse(u.Hash):u.Hash instanceof Uint8Array&&(S=cid_CID.decode(u.Hash)))}catch(u){throw TypeError(`Invalid DAG-PB form: ${u.message}`)}S&&(g.Hash=S)}if(!g.Hash)throw TypeError("Invalid DAG-PB form");return"string"==typeof u.Name&&(g.Name=u.Name),"number"==typeof u.Tsize&&(g.Tsize=u.Tsize),g}function prepare(u){if((u instanceof Uint8Array||"string"==typeof u)&&(u={Data:u}),"object"!=typeof u||Array.isArray(u))throw TypeError("Invalid DAG-PB form");let g={};if(void 0!==u.Data){if("string"==typeof u.Data)g.Data=tZ.encode(u.Data);else if(u.Data instanceof Uint8Array)g.Data=u.Data;else throw TypeError("Invalid DAG-PB form")}if(void 0!==u.Links){if(Array.isArray(u.Links))g.Links=u.Links.map(asLink),g.Links.sort(linkComparator);else throw TypeError("Invalid DAG-PB form")}else g.Links=[];return g}function validate(u){if(!u||"object"!=typeof u||Array.isArray(u))throw TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(u,tK))throw TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==u.Data&&!(u.Data instanceof Uint8Array))throw TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(u.Links))throw TypeError("Invalid DAG-PB form (Links must be an array)");for(let g=0;g<u.Links.length;g++){let S=u.Links[g];if(!S||"object"!=typeof S||Array.isArray(S))throw TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(S,tJ))throw TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!S.Hash)throw TypeError("Invalid DAG-PB form (link must have a Hash)");if(S.Hash.asCID!==S.Hash)throw TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==S.Name&&"string"!=typeof S.Name)throw TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==S.Tsize&&("number"!=typeof S.Tsize||S.Tsize%1!=0))throw TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(g>0&&-1===linkComparator(S,u.Links[g-1]))throw TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(u,g=[]){return prepare({Data:u,Links:g})}function createLink(u,g,S){return asLink({Hash:S,Name:u,Tsize:g})}let t0="dag-pb",t1=112;function src_encode(u){validate(u);let g={};return u.Links&&(g.Links=u.Links.map(u=>{let g={};return u.Hash&&(g.Hash=u.Hash.bytes),void 0!==u.Name&&(g.Name=u.Name),void 0!==u.Tsize&&(g.Tsize=u.Tsize),g})),u.Data&&(g.Data=u.Data),encodeNode(g)}function src_decode(u){let g=decodeNode(u),S={};return g.Data&&(S.Data=g.Data),g.Links&&(S.Links=g.Links.map(u=>{let g={};try{g.Hash=cid_CID.decode(u.Hash)}catch(u){}if(!g.Hash)throw Error("Invalid Hash field found in link, expected CID");return void 0!==u.Name&&(g.Name=u.Name),void 0!==u.Tsize&&(g.Tsize=u.Tsize),g})),S}let persist=async(u,g,S)=>{S.codec||(S.codec=E),S.hasher||(S.hasher=tk),void 0===S.cidVersion&&(S.cidVersion=1),S.codec===E&&S.hasher!==tk&&(S.cidVersion=1);let R=await S.hasher.digest(u),D=cid_CID.create(S.cidVersion,S.codec.code,R);return S.onlyHash||await g.put(D,u,{signal:S.signal}),D},t2=persist,dirBuilder=async(u,g,S)=>{let R=new UnixFS({type:"directory",mtime:u.mtime,mode:u.mode}),D=src_encode(prepare({Data:R.marshal()})),C=await t2(D,g,S),E=u.path;return{cid:C,path:E,unixfs:R,size:D.length}},t8=dirBuilder,t3="raw",t6=85,raw_encode=u=>coerce(u),raw_decode=u=>coerce(u);var t4=S(44279);async function flat(u,g){return g(await t4(u))}let t5=flat;var t7=S(40783);function balanced(u,g,S){return reduceToParents(u,g,S)}async function reduceToParents(u,g,S){let R=[];for await(let D of t7(u,S.maxChildrenPerNode))R.push(await g(D));return R.length>1?reduceToParents(R,g,S):R[0]}let t9=balanced;async function trickleStream(u,g,S){let R=new Root(S.layerRepeat),D=0,C=1,E=R;for await(let T of t7(u,S.maxChildrenPerNode))E.isFull()&&(E!==R&&R.addChild(await E.reduce(g)),D&&D%S.layerRepeat==0&&C++,E=new SubTree(C,S.layerRepeat,D),D++),E.append(T);return E&&E!==R&&R.addChild(await E.reduce(g)),R.reduce(g)}let rt=trickleStream;let SubTree=class SubTree{constructor(u,g,S=0){this.maxDepth=u,this.layerRepeat=g,this.currentDepth=1,this.iteration=S,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:u,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let u=this._findParent(this.node,this.currentDepth);return!u||(this._addNextNodeToParent(u),!1)}_addNextNodeToParent(u){this.parent=u;let g={children:[],depth:u.depth+1,parent:u,maxDepth:this.maxDepth,maxChildren:Math.floor(u.children.length/this.layerRepeat)*this.layerRepeat};u.children.push(g),this.currentDepth=g.depth,this.node=g}append(u){this.node.data=u}reduce(u){return this._reduce(this.root,u)}async _reduce(u,g){let S=[];return u.children.length&&(S=await Promise.all(u.children.filter(u=>u.data).map(u=>this._reduce(u,g)))),g((u.data||[]).concat(S))}_findParent(u,g){let S=u.parent;return S&&0!==S.depth?S.children.length!==S.maxChildren&&S.maxChildren?S:this._findParent(S,g):void 0}};let Root=class Root extends SubTree{constructor(u){super(0,u),this.root.depth=0,this.currentDepth=1}addChild(u){this.root.children.push(u)}reduce(u){return u((this.root.data||[]).concat(this.root.children))}};async function*bufferImporter(u,g,S){for await(let R of u.content)yield async()=>{let D;S.progress(R.length,u.path);let C={codec:E,cidVersion:S.cidVersion,hasher:S.hasher,onlyHash:S.onlyHash};return S.rawLeaves?(C.codec=T,C.cidVersion=1):R=src_encode({Data:(D=new UnixFS({type:S.leafType,data:R})).marshal(),Links:[]}),{cid:await t2(R,g,C),unixfs:D,size:R.length}}}let rr=bufferImporter,rn={flat:t5,balanced:t9,trickle:rt};async function*buildFileBatch(u,g,S){let R,D,C=-1;for await(let E of tC((D="function"==typeof S.bufferImporter?S.bufferImporter:rr)(u,g,S),S.blockWriteConcurrency)){if(0==++C){R=E;continue}1===C&&R&&(yield R,R=null),yield E}R&&(R.single=!0,yield R)}let file_reduce=(u,g,S)=>async function(R){if(1===R.length&&R[0].single&&S.reduceSingleLeafToSelf){let D=R[0];if(void 0!==u.mtime||void 0!==u.mode){let R=await g.get(D.cid);D.unixfs=new UnixFS({type:"file",mtime:u.mtime,mode:u.mode,data:R}),R=src_encode(prepare({Data:D.unixfs.marshal()})),D.cid=await t2(R,g,{...S,codec:E,hasher:S.hasher,cidVersion:S.cidVersion}),D.size=R.length}return{cid:D.cid,path:u.path,unixfs:D.unixfs,size:D.size}}let D=new UnixFS({type:"file",mtime:u.mtime,mode:u.mode}),C=R.filter(u=>!!(u.cid.code===t6&&u.size||u.unixfs&&!u.unixfs.data&&u.unixfs.fileSize())||!!(u.unixfs&&u.unixfs.data&&u.unixfs.data.length)).map(u=>(u.cid.code===t6?D.addBlockSize(u.size):u.unixfs&&u.unixfs.data?D.addBlockSize(u.unixfs.data.length):D.addBlockSize(u.unixfs&&u.unixfs.fileSize()||0),{Name:"",Tsize:u.size,Hash:u.cid})),T={Data:D.marshal(),Links:C},A=src_encode(prepare(T)),B=await t2(A,g,S);return{cid:B,path:u.path,unixfs:D,size:A.length+T.Links.reduce((u,g)=>u+g.Tsize,0)}};function fileBuilder(u,g,S){let R=rn[S.strategy];if(!R)throw tW(Error(`Unknown importer build strategy name: ${S.strategy}`),"ERR_BAD_STRATEGY");return R(buildFileBatch(u,g,S),file_reduce(u,g,S),S)}let ro=fileBuilder;var ri=S(31967),ra=S(67893);async function*rabinChunker(u,g){let S,R,D;if(g.minChunkSize&&g.maxChunkSize&&g.avgChunkSize)D=g.avgChunkSize,S=g.minChunkSize,R=g.maxChunkSize;else if(g.avgChunkSize)S=(D=g.avgChunkSize)/3,R=D+D/2;else throw tW(Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(S<16)throw tW(Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");R<S&&(R=S),D<S&&(D=S);let C=Math.floor(Math.log2(D));for await(let D of rabin_rabin(u,{min:S,max:R,bits:C,window:g.window,polynomial:g.polynomial}))yield D}let rs=rabinChunker;async function*rabin_rabin(u,g){let S=await (0,ra.create)(g.bits,g.min,g.max,g.window),R=new ri;for await(let g of u){R.append(g);let u=S.fingerprint(g);for(let g=0;g<u.length;g++){let S=u[g],D=R.slice(0,S);R.consume(S),yield D}}R.length&&(yield R.slice(0))}async function*fixedSizeChunker(u,g){let S=new ri,R=0,D=!1,C=g.maxChunkSize;for await(let g of u)for(S.append(g),R+=g.length;R>=C;)if(yield S.slice(0,C),D=!0,C===S.length)S=new ri,R=0;else{let u=new ri;u.append(S.shallowSlice(C)),S=u,R-=C}(!D||R)&&(yield S.slice(0,R))}let rl=fixedSizeChunker,ru=from({prefix:"\x00",name:"identity",encode:u=>bytes_toString(u),decode:u=>fromString(u)}),rc=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),rd=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),rf=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),rh=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rp=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rm=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ry=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rb=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rg=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),r_=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rS=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rw=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),rv=rw.reduce((u,g,S)=>(u[S]=g,u),[]),rR=rw.reduce((u,g,S)=>(u[g.codePointAt(0)]=S,u),[]);function base256emoji_encode(u){return u.reduce((u,g)=>u+=rv[g],"")}function base256emoji_decode(u){let g=[];for(let S of u){let u=rR[S.codePointAt(0)];if(void 0===u)throw Error(`Non-base256emoji character: ${S}`);g.push(u)}return new Uint8Array(g)}let rD=from({prefix:"\uD83D\uDE80",name:"base256emoji",encode:base256emoji_encode,decode:base256emoji_decode}),rC=0,rE="identity",rx=coerce,digest=u=>create(rC,rx(u)),rT={code:rC,name:rE,encode:rx,digest},rk=new TextEncoder,rA=new TextDecoder,rB="json",rI=512,json_encode=u=>rk.encode(JSON.stringify(u)),json_decode=u=>JSON.parse(rA.decode(u)),rP={...A,...B,...I,...P,...W,...D,...L,...R,...U,...M};function as_uint8array_asUint8Array(u){return null!=globalThis.Buffer?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):u}function allocUnsafe(u=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?as_uint8array_asUint8Array(globalThis.Buffer.allocUnsafe(u)):new Uint8Array(u)}function createCodec(u,g,S,R){return{name:u,prefix:g,encoder:{name:u,prefix:g,encode:S},decoder:{decode:R}}}({...C,...$});let rW=createCodec("utf8","u",u=>{let g=new TextDecoder("utf8");return"u"+g.decode(u)},u=>{let g=new TextEncoder;return g.encode(u.substring(1))}),rO=createCodec("ascii","a",u=>{let g="a";for(let S=0;S<u.length;S++)g+=String.fromCharCode(u[S]);return g},u=>{u=u.substring(1);let g=allocUnsafe(u.length);for(let S=0;S<u.length;S++)g[S]=u.charCodeAt(S);return g}),rj={utf8:rW,"utf-8":rW,hex:rP.base16,latin1:rO,ascii:rO,binary:rO,...rP},rF=rj;function from_string_fromString(u,g="utf8"){let S=rF[g];if(!S)throw Error(`Unsupported encoding "${g}"`);return("utf8"===g||"utf-8"===g)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?as_uint8array_asUint8Array(globalThis.Buffer.from(u,"utf-8")):S.decoder.decode(`${S.prefix}${u}`)}async function*validateChunks(u){for await(let g of u){if(void 0===g.length)throw tW(Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"==typeof g||g instanceof String)yield from_string_fromString(g.toString());else if(Array.isArray(g))yield Uint8Array.from(g);else if(g instanceof Uint8Array)yield g;else throw tW(Error("Content was invalid"),"ERR_INVALID_CONTENT")}}let rL=validateChunks;function isIterable(u){return Symbol.iterator in u}function isAsyncIterable(u){return Symbol.asyncIterator in u}function contentAsAsyncIterable(u){try{if(u instanceof Uint8Array)return async function*(){yield u}();if(isIterable(u))return async function*(){yield*u}();if(isAsyncIterable(u))return u}catch{throw tW(Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw tW(Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(u,g,S){for await(let R of u)if(R.path&&("./"===R.path.substring(0,2)&&(S.wrapWithDirectory=!0),R.path=R.path.split("/").filter(u=>u&&"."!==u).join("/")),R.content){let u,D;u="function"==typeof S.chunker?S.chunker:"rabin"===S.chunker?rs:rl,D="function"==typeof S.chunkValidator?S.chunkValidator:rL;let C={path:R.path,mtime:R.mtime,mode:R.mode,content:u(D(contentAsAsyncIterable(R.content),S),S)};yield()=>ro(C,g,S)}else if(R.path){let u={path:R.path,mtime:R.mtime,mode:R.mode};yield()=>t8(u,g,S)}else throw Error("Import candidate must have content or path or both")}let rz=dagBuilder;let Dir=class Dir{constructor(u,g){this.options=g||{},this.root=u.root,this.dir=u.dir,this.path=u.path,this.dirty=u.dirty,this.flat=u.flat,this.parent=u.parent,this.parentKey=u.parentKey,this.unixfs=u.unixfs,this.mode=u.mode,this.mtime=u.mtime,this.cid=void 0,this.size=void 0}async put(u,g){}get(u){return Promise.resolve(this)}async *eachChildSeries(){}async *flush(u){}};let rU=Dir;let DirFlat=class DirFlat extends rU{constructor(u,g){super(u,g),this._children={}}async put(u,g){this.cid=void 0,this.size=void 0,this._children[u]=g}get(u){return Promise.resolve(this._children[u])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async *eachChildSeries(){let u=Object.keys(this._children);for(let g=0;g<u.length;g++){let S=u[g];yield{key:S,child:this._children[S]}}}async *flush(u){let g=Object.keys(this._children),S=[];for(let R=0;R<g.length;R++){let D=this._children[g[R]];if(D instanceof rU)for await(let g of D.flush(u))D=g,yield D;null!=D.size&&D.cid&&S.push({Name:g[R],Tsize:D.size,Hash:D.cid})}let R=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode}),D={Data:R.marshal(),Links:S},C=src_encode(prepare(D)),E=await t2(C,u,this.options),T=C.length+D.Links.reduce((u,g)=>u+(null==g.Tsize?0:g.Tsize),0);this.cid=E,this.size=T,yield{cid:E,unixfs:R,path:this.path,size:T}}};let rN=DirFlat;var rM=S(12103);let DirSharded=class DirSharded extends rU{constructor(u,g){super(u,g),this._bucket=(0,rM.createHAMT)({hashFn:g.hamtHashFn,bits:g.hamtBucketBits})}async put(u,g){await this._bucket.put(u,g)}get(u){return this._bucket.get(u)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async *eachChildSeries(){for await(let{key:u,value:g}of this._bucket.eachLeafSeries())yield{key:u,child:g}}async *flush(u){for await(let g of flush(this._bucket,u,this,this.options))yield{...g,path:this.path}}};let rq=DirSharded;async function*flush(u,g,S,R){let D=u._children,C=[],E=0;for(let u=0;u<D.length;u++){let S=D.get(u);if(!S)continue;let T=u.toString(16).toUpperCase().padStart(2,"0");if(S instanceof rM.Bucket){let u;for await(let D of(await flush(S,g,null,R)))u=D;if(!u)throw Error("Could not flush sharded directory, no subshard found");C.push({Name:T,Tsize:u.size,Hash:u.cid}),E+=u.size}else if("function"==typeof S.value.flush){let u;let R=S.value;for await(let S of R.flush(g))u=S,yield u;let D=T+S.key;C.push({Name:D,Tsize:u.size,Hash:u.cid}),E+=u.size}else{let u=S.value;if(!u.cid)continue;let g=T+S.key,R=u.size;C.push({Name:g,Tsize:R,Hash:u.cid}),E+=R}}let T=Uint8Array.from(D.bitField().reverse()),A=new UnixFS({type:"hamt-sharded-directory",data:T,fanout:u.tableSize(),hashType:R.hamtHashCode,mtime:S&&S.mtime,mode:S&&S.mode}),B={Data:A.marshal(),Links:C},I=src_encode(prepare(B)),P=await t2(I,g,R),W=I.length+E;yield{cid:P,unixfs:A,size:W}}async function flatToShard(u,g,S,R){let D=g;g instanceof rN&&g.directChildrenCount()>=S&&(D=await convertToShard(g,R));let C=D.parent;if(C){if(D!==g){if(u&&(u.parent=D),!D.parentKey)throw Error("No parent key found");await C.put(D.parentKey,D)}return flatToShard(D,C,S,R)}return D}async function convertToShard(u,g){let S=new rq({root:u.root,dir:!0,parent:u.parent,parentKey:u.parentKey,path:u.path,dirty:u.dirty,flat:!1,mtime:u.mtime,mode:u.mode},g);for await(let{key:g,child:R}of u.eachChildSeries())await S.put(g,R);return S}let r$=flatToShard,toPathComponents=(u="")=>(u.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean),rH=toPathComponents;async function addToTree(u,g,S){let R=rH(u.path||""),D=R.length-1,C=g,E="";for(let T=0;T<R.length;T++){let A=R[T];E+=`${E?"/":""}${A}`;let B=T===D;if(C.dirty=!0,C.cid=void 0,C.size=void 0,B)await C.put(A,u),g=await r$(null,C,S.shardSplitThreshold,S);else{let u=await C.get(A);u&&u instanceof rU||(u=new rN({root:!1,dir:!0,parent:C,parentKey:A,path:E,dirty:!0,flat:!0,mtime:u&&u.unixfs&&u.unixfs.mtime,mode:u&&u.unixfs&&u.unixfs.mode},S)),await C.put(A,u),C=u}}return g}async function*flushAndYield(u,g){if(!(u instanceof rU)){u&&u.unixfs&&u.unixfs.isDirectory()&&(yield u);return}yield*u.flush(g)}async function*treeBuilder(u,g,S){let R=new rN({root:!0,dir:!0,path:"",dirty:!0,flat:!0},S);for await(let g of u)g&&(R=await addToTree(g,R,S),g.unixfs&&g.unixfs.isDirectory()||(yield g));if(S.wrapWithDirectory)yield*flushAndYield(R,g);else for await(let u of R.eachChildSeries())u&&(yield*flushAndYield(u.child,g))}let rV=treeBuilder;async function*importer(u,g,S={}){let R,D;let C=src_options(S);for await(let E of(R="function"==typeof S.dagBuilder?S.dagBuilder:rz,("function"==typeof S.treeBuilder?S.treeBuilder:rV)(tC(R(D=Symbol.asyncIterator in u||Symbol.iterator in u?u:[u],g,C),C.fileImportConcurrency),g,C)))yield{cid:E.cid,path:E.path,unixfs:E.unixfs,size:E.size}}var rQ=S(94459),rG=S(85146),rY=S(60127),rX=S(55594);function isBytes(u){return ArrayBuffer.isView(u)||u instanceof ArrayBuffer}function isBlob(u){return u.constructor&&("Blob"===u.constructor.name||"File"===u.constructor.name)&&"function"==typeof u.stream}function isFileObject(u){return"object"==typeof u&&(u.path||u.content)}let isReadableStream=u=>u&&"function"==typeof u.getReader;async function*toAsyncIterable(u){yield u}async function normaliseContent(u){if(isBytes(u))return toAsyncIterable(normalise_content_toBytes(u));if("string"==typeof u||u instanceof String)return toAsyncIterable(normalise_content_toBytes(u.toString()));if(isBlob(u))return rG(u);if(isReadableStream(u)&&(u=rQ(u)),Symbol.iterator in u||Symbol.asyncIterator in u){let g=rY(u),{value:S,done:R}=await g.peek();if(R)return toAsyncIterable(new Uint8Array(0));if(g.push(S),Number.isInteger(S))return toAsyncIterable(Uint8Array.from(await t4(g)));if(isBytes(S)||"string"==typeof S||S instanceof String)return rX(g,normalise_content_toBytes)}throw tW(Error(`Unexpected input: ${u}`),"ERR_UNEXPECTED_INPUT")}function normalise_content_toBytes(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):u instanceof ArrayBuffer?new Uint8Array(u):Array.isArray(u)?Uint8Array.from(u):from_string_fromString(u.toString())}async function*normaliseCandidateSingle(u,g){if(null==u)throw tW(Error(`Unexpected input: ${u}`),"ERR_UNEXPECTED_INPUT");if("string"==typeof u||u instanceof String){yield toFileObject(u.toString(),g);return}if(isBytes(u)||isBlob(u)){yield toFileObject(u,g);return}if(isReadableStream(u)&&(u=rQ(u)),Symbol.iterator in u||Symbol.asyncIterator in u){let S=rY(u),{value:R,done:D}=await S.peek();if(D){yield{content:[]};return}if(S.push(R),Number.isInteger(R)||isBytes(R)||"string"==typeof R||R instanceof String){yield toFileObject(S,g);return}throw tW(Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(u)){yield toFileObject(u,g);return}throw tW(Error('Unexpected input: cannot convert "'+typeof u+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(u,g){let{path:S,mode:R,mtime:D,content:C}=u,E={path:S||"",mode:parseMode(R),mtime:parseMtime(D)};return C?E.content=await g(C):S||(E.content=await g(u)),E}function normaliseInput(u){return normaliseCandidateSingle(u,normaliseContent)}async function*normaliseCandidateMultiple(u,g){if("string"==typeof u||u instanceof String||isBytes(u)||isBlob(u)||u._readableState)throw tW(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(u)&&(u=rQ(u)),Symbol.iterator in u||Symbol.asyncIterator in u){let S=rY(u),{value:R,done:D}=await S.peek();if(D){yield*[];return}if(S.push(R),Number.isInteger(R))throw tW(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(R._readableState){yield*rX(S,u=>normalise_candidate_multiple_toFileObject({content:u},g));return}if(isBytes(R)){yield normalise_candidate_multiple_toFileObject({content:S},g);return}if(isFileObject(R)||R[Symbol.iterator]||R[Symbol.asyncIterator]||isReadableStream(R)||isBlob(R)){yield*rX(S,u=>normalise_candidate_multiple_toFileObject(u,g));return}}if(isFileObject(u))throw tW(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw tW(Error("Unexpected input: "+typeof u),"ERR_UNEXPECTED_INPUT")}async function normalise_candidate_multiple_toFileObject(u,g){let{path:S,mode:R,mtime:D,content:C}=u,E={path:S||"",mode:parseMode(R),mtime:parseMtime(D)};return C?E.content=await g(C):S||(E.content=await g(u)),E}function normalise_input_multiple_normaliseInput(u){return normaliseCandidateMultiple(u,normaliseContent)}function normalise_input_isBytes(u){return ArrayBuffer.isView(u)||u instanceof ArrayBuffer}function normalise_input_isBlob(u){return!!u.constructor&&("Blob"===u.constructor.name||"File"===u.constructor.name)&&"function"==typeof u.stream}function isSingle(u){return"string"==typeof u||u instanceof String||normalise_input_isBytes(u)||normalise_input_isBlob(u)||"_readableState"in u}function getNormaliser(u){return isSingle(u)?normaliseInput(u):normalise_input_multiple_normaliseInput(u)}function notFoundError(u){return tW(u=u||Error("Not Found"),"ERR_NOT_FOUND")}function abortedError(u){return tW(u=u||Error("Aborted"),"ERR_ABORTED")}var rK=S(98259),rJ=S(55863),rZ=S(61955);let sortAll=(u,g)=>(async function*(){let S=await t4(u);yield*S.sort(g)})();let base_BaseBlockstore=class base_BaseBlockstore{open(){return Promise.reject(Error(".open is not implemented"))}close(){return Promise.reject(Error(".close is not implemented"))}put(u,g,S){return Promise.reject(Error(".put is not implemented"))}get(u,g){return Promise.reject(Error(".get is not implemented"))}has(u,g){return Promise.reject(Error(".has is not implemented"))}delete(u,g){return Promise.reject(Error(".delete is not implemented"))}async *putMany(u,g={}){for await(let{key:S,value:R}of u)await this.put(S,R,g),yield{key:S,value:R}}async *getMany(u,g={}){for await(let S of u)yield this.get(S,g)}async *deleteMany(u,g={}){for await(let S of u)await this.delete(S,g),yield S}batch(){let u=[],g=[];return{put(g,S){u.push({key:g,value:S})},delete(u){g.push(u)},commit:async S=>{await rK(this.putMany(u,S)),u=[],await rK(this.deleteMany(g,S)),g=[]}}}async *_all(u,g){throw Error("._all is not implemented")}async *_allKeys(u,g){throw Error("._allKeys is not implemented")}query(u,g){let S=this._all(u,g);if(null!=u.prefix&&(S=rJ(S,g=>g.key.toString().startsWith(u.prefix||""))),Array.isArray(u.filters)&&(S=u.filters.reduce((u,g)=>rJ(u,g),S)),Array.isArray(u.orders)&&(S=u.orders.reduce((u,g)=>sortAll(u,g),S)),null!=u.offset){let g=0;S=rJ(S,()=>g++>=(u.offset||0))}return null!=u.limit&&(S=rZ(S,u.limit)),S}queryKeys(u,g){let S=this._allKeys(u,g);if(null!=u.prefix&&(S=rJ(S,g=>g.toString().startsWith(u.prefix||""))),Array.isArray(u.filters)&&(S=u.filters.reduce((u,g)=>rJ(u,g),S)),Array.isArray(u.orders)&&(S=u.orders.reduce((u,g)=>sortAll(u,g),S)),null!=u.offset){let g=0;S=rJ(S,()=>g++>=u.offset)}return null!=u.limit&&(S=rZ(S,u.limit)),S}};({...Q});let MemoryBlockStore=class MemoryBlockStore extends base_BaseBlockstore{constructor(){super(),this.store=new Map}async *blocks(){for(let[u,g]of this.store.entries())yield{cid:cid_CID.parse(u),bytes:g}}put(u,g){return this.store.set(u.toString(),g),Promise.resolve()}get(u){let g=this.store.get(u.toString());if(!g)throw Error(`block with cid ${u.toString()} no found`);return Promise.resolve(g)}has(u){return Promise.resolve(this.store.has(u.toString()))}close(){return this.store.clear(),Promise.resolve()}};let r0={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:tk,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function pack({input:u,blockstore:g,hasher:S,maxChunkSize:R,maxChildrenPerNode:D,wrapWithDirectory:C,rawLeaves:E}){let T;if(!u||Array.isArray(u)&&!u.length)throw Error("missing input file(s)");let A=g||new MemoryBlockStore,B=await K(J(getNormaliser(u),u=>importer(u,A,{...r0,hasher:S||r0.hasher,maxChunkSize:R||r0.maxChunkSize,maxChildrenPerNode:D||r0.maxChildrenPerNode,wrapWithDirectory:!1!==C&&r0.wrapWithDirectory,rawLeaves:null==E?r0.rawLeaves:E})));if(!B||!B.cid)throw Error("given input could not be parsed correctly");let I=B.cid,{writer:P,out:W}=await writer_CarWriter.create([I]),L=W[Symbol.asyncIterator](),writeAll=async()=>{for await(let u of A.blocks())await P.put(u);await P.close(),g||await A.close()},U={[Symbol.asyncIterator](){if(null!=T)throw Error("Multiple iterator not supported");return T=writeAll(),{async next(){let u=await L.next();return u.done&&await T,u}}}};return{root:I,out:U}}let r1=2e3,r2=!1;function hasRel(u){return u&&u.rel}function intoRels(u,g){function splitRel(S){u[S]=Object.assign({},g,{rel:S})}return g.rel.split(/\s+/).forEach(splitRel),u}function createObjects(u,g){let S=g.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return S&&(u[S[1]]=S[2]),u}function parseLink(u){try{let g=u.match(/<?([^>]*)>(.*)/),S=g[1],R=g[2].split(";"),D={},C=new URL(S,"https://example.com");for(let[u,g]of C.searchParams)D[u]=g;R.shift();let E=R.reduce(createObjects,{});return(E=Object.assign({},D,E)).url=S,E}catch{return null}}function checkHeader(u,g){if(!u)return!1;g=g||{};let S=g.maxHeaderLength||r1,R=g.throwOnMaxHeaderLengthExceeded||r2;if(u.length>S){if(!R)return!1;throw Error("Input string too long, it should be under "+S+" characters.")}return!0}function parseLinkHeader(u,g){return checkHeader(u,g)?u.split(/,\s*</).map(parseLink).filter(hasRel).reduce(intoRels,{}):null}let hashFn=async function(u){return(await tI.encode(u)).slice(0,8).reverse()},addLinksToHamtBucket=(u,g,S)=>Promise.all(u.map(u=>{if(null==u.Name)throw Error("Unexpected Link without a Name");if(2===u.Name.length){let R=parseInt(u.Name,16);return g._putObjectAt(R,new rM.Bucket({hash:S._options.hash,bits:S._options.bits},g,R))}return S.put(u.Name.substring(2),!0)})),toPrefix=u=>u.toString(16).toUpperCase().padStart(2,"0").substring(0,2),toBucketPath=u=>{let g=u.bucket,S=[];for(;g._parent;)S.push(g),g=g._parent;return S.push(g),S.reverse()},findShardCid=async(u,g,S,R,D)=>{if(!R){let u=(0,rM.createHAMT)({hashFn});R={rootBucket:u,hamtDepth:1,lastBucket:u}}await addLinksToHamtBucket(u.Links,R.lastBucket,R.rootBucket);let C=await R.rootBucket._findNewBucketAndPos(g),E=toPrefix(C.pos),T=toBucketPath(C);T.length>R.hamtDepth&&(R.lastBucket=T[R.hamtDepth],E=toPrefix(R.lastBucket._posAtParent));let A=u.Links.find(u=>{if(null==u.Name)return!1;let S=u.Name.substring(0,2),R=u.Name.substring(2);return S===E&&(!R||R===g)});if(!A)return null;if(null!=A.Name&&A.Name.substring(2)===g)return A.Hash;R.hamtDepth++;let B=await S.get(A.Hash,D);return findShardCid(u=src_decode(B),g,S,R,D)},r8=findShardCid;function extractDataFromBlock(u,g,S,R){let D=u.length,C=g+D;return S>=C||R<g?new Uint8Array(0):(R>=g&&R<C&&(u=u.slice(0,R-g)),S>=g&&S<C&&(u=u.slice(S-g)),u)}let r3=extractDataFromBlock,validateOffsetAndLength=(u,g,S)=>{if(g||(g=0),g<0)throw tW(Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(g>u)throw tW(Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(S||0===S||(S=u-g),S<0)throw tW(Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return g+S>u&&(S=u-g),{offset:g,length:S}},r6=validateOffsetAndLength;async function*emitBytes(u,g,S,R,D=0,C){let E;if(g instanceof Uint8Array){let u=r3(g,D,S,R);return u.length&&(yield u),D+=u.length}if(null==g.Data)throw tW(Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{E=UnixFS.unmarshal(g.Data)}catch(u){throw tW(u,"ERR_NOT_UNIXFS")}if(E.data&&E.data.length){let u=r3(E.data,D,S,R);u.length&&(yield u),D+=E.data.length}let T=D;for(let A=0;A<g.Links.length;A++){let B=g.Links[A],I=D+E.blockSizes[A];if(S>=T&&S<I||R>T&&R<=I||S<T&&R>I){let g;let E=await u.get(B.Hash,{signal:C.signal});switch(B.Hash.code){case t1:g=await src_decode(E);break;case t6:g=E;break;case t_:g=await esm_decode(E);break;default:throw Error(`Unsupported codec: ${B.Hash.code}`)}for await(let E of emitBytes(u,g,S,R,D,C))D+=E.length,yield E}D=I,T=I+1}}let fileContent=(u,g,S,R,D,C,E)=>function(u={}){let R=S.fileSize();if(void 0===R)throw Error("File was a directory");let{offset:D,length:C}=r6(R,u.offset,u.length),T=D,A=D+C;return emitBytes(E,g,T,A,0,u)},r4=fileContent,directoryContent=(u,g,S,R,D,C,E)=>async function*(u={}){let S=u.offset||0,T=u.length||g.Links.length,A=g.Links.slice(S,T);for(let g of A){let S=await D(g.Hash,g.Name||"",`${R}/${g.Name||""}`,[],C+1,E,u);S.entry&&(yield S.entry)}},r5=directoryContent,hamtShardedDirectoryContent=(u,g,S,R,D,C,E)=>function(u={}){return listDirectory(g,R,D,C,E,u)};async function*listDirectory(u,g,S,R,D,C){let E=u.Links;for(let T of E){let E=null!=T.Name?T.Name.substring(2):null;if(E){let u=await S(T.Hash,E,`${g}/${E}`,[],R+1,D,C);yield u.entry}else{let E=await D.get(T.Hash);for await(let T of listDirectory(u=src_decode(E),g,S,R,D,C))yield T}}}let r7=hamtShardedDirectoryContent,findLinkCid=(u,g)=>{let S=u.Links.find(u=>u.Name===g);return S&&S.Hash},r9={raw:r4,file:r4,directory:r5,"hamt-sharded-directory":r7,metadata:(u,g,S,R,D,C,E)=>()=>[],symlink:(u,g,S,R,D,C,E)=>()=>[]},unixFsResolver=async(u,g,S,R,D,C,E,T)=>{let A,B;let I=await E.get(u,T),P=src_decode(I);if(g||(g=u.toString()),null==P.Data)throw tW(Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{A=UnixFS.unmarshal(P.Data)}catch(u){throw tW(u,"ERR_NOT_UNIXFS")}if(S||(S=g),R.length){let u;if(!(u=A&&"hamt-sharded-directory"===A.type?await r8(P,R[0],E):findLinkCid(P,R[0])))throw tW(Error("file does not exist"),"ERR_NOT_FOUND");let g=R.shift(),D=`${S}/${g}`;B={cid:u,toResolve:R,name:g||"",path:D}}return{entry:{type:A.isDirectory()?"directory":"file",name:g,path:S,cid:u,content:r9[A.type](u,P,A,S,D,C,E),unixfs:A,depth:C,node:P,size:A.fileSize()},next:B}},ne=unixFsResolver,rawContent=u=>async function*(g={}){let{offset:S,length:R}=r6(u.length,g.offset,g.length);yield r3(u,0,S,S+R)},resolve=async(u,g,S,R,D,C,E,T)=>{if(R.length)throw tW(Error(`No link named ${S} found in raw node ${u}`),"ERR_NOT_FOUND");let A=await E.get(u,T);return{entry:{type:"raw",name:g,path:S,cid:u,content:rawContent(A),depth:C,size:A.length,node:A}}},nt=resolve,dag_cbor_resolve=async(u,g,S,R,D,C,E,T)=>{let A=await E.get(u),B=esm_decode(A),I=B,P=S;for(;R.length;){let D=R[0];if(D in I){R.shift(),P=`${P}/${D}`;let E=cid_CID.asCID(I[D]);if(E)return{entry:{type:"object",name:g,path:S,cid:u,node:A,depth:C,size:A.length,content:async function*(){yield B}},next:{cid:E,name:D,path:P,toResolve:R}};I=I[D]}else throw tW(Error(`No property named ${D} found in cbor node ${u}`),"ERR_NO_PROP")}return{entry:{type:"object",name:g,path:S,cid:u,node:A,depth:C,size:A.length,content:async function*(){yield B}}}},nr=dag_cbor_resolve,identity_rawContent=u=>async function*(g={}){let{offset:S,length:R}=r6(u.length,g.offset,g.length);yield r3(u,0,S,S+R)},identity_resolve=async(u,g,S,R,D,C,E,T)=>{if(R.length)throw tW(Error(`No link named ${S} found in raw node ${u}`),"ERR_NOT_FOUND");let A=await digest_decode(u.multihash.bytes);return{entry:{type:"identity",name:g,path:S,cid:u,content:identity_rawContent(A.digest),depth:C,size:A.digest.length,node:A.digest}}},nn=identity_resolve,no={[t1]:ne,[t6]:nt,[t_]:nr,[rT.code]:nn};function resolvers_resolve(u,g,S,R,D,C,E){let T=no[u.code];if(!T)throw tW(Error(`No resolver for code ${u.code}`),"ERR_NO_RESOLVER");return T(u,g,S,R,resolvers_resolve,D,C,E)}let ni=resolvers_resolve,src_toPathComponents=(u="")=>(u.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),cidAndRest=u=>{if(u instanceof Uint8Array)return{cid:cid_CID.decode(u),toResolve:[]};let g=cid_CID.asCID(u);if(g)return{cid:g,toResolve:[]};if("string"==typeof u){0===u.indexOf("/ipfs/")&&(u=u.substring(6));let g=src_toPathComponents(u);return{cid:cid_CID.parse(g[0]),toResolve:g.slice(1)}}throw tW(Error(`Unknown path type ${u}`),"ERR_BAD_PATH")};async function*walkPath(u,g,S={}){let{cid:R,toResolve:D}=cidAndRest(u),C=R.toString(),E=C,T=D.length;for(;;){let A=await ni(R,C,E,D,T,g,S);if(!A.entry&&!A.next)throw tW(Error(`Could not resolve ${u}`),"ERR_NOT_FOUND");if(A.entry&&(yield A.entry),!A.next)return;D=A.next.toResolve,R=A.next.cid,C=A.next.name,E=A.next.path}}async function exporter(u,g,S={}){let R=await K(walkPath(u,g,S));if(!R)throw tW(Error(`Could not resolve ${u}`),"ERR_NOT_FOUND");return R}async function*recursive(u,g,S={}){let R=await exporter(u,g,S);if(R&&(yield R,"directory"===R.type))for await(let u of recurse(R,S))yield u;async function*recurse(u,g){for await(let S of u.content(g))yield S,S instanceof Uint8Array||"directory"!==S.type||(yield*recurse(S,g))}}function equals_equals(u,g){if(u===g)return!0;if(u.byteLength!==g.byteLength)return!1;for(let S=0;S<u.byteLength;S++)if(u[S]!==g[S])return!1;return!0}let verifying_get_only_blockstore_VerifyingGetOnlyBlockStore=class verifying_get_only_blockstore_VerifyingGetOnlyBlockStore extends base_BaseBlockstore{constructor(u){super(),this.store=u}async get(u){let g=await this.store.get(u);if(!g)throw Error(`Incomplete CAR. Block missing for CID ${u}`);if(!isValid({cid:u,bytes:g}))throw Error(`Invalid CAR. Hash of block data does not match CID ${u}`);return g}static fromBlockstore(u){return new verifying_get_only_blockstore_VerifyingGetOnlyBlockStore(u)}static fromCarReader(u){return new verifying_get_only_blockstore_VerifyingGetOnlyBlockStore({get:async g=>{let S=await u.get(g);return null==S?void 0:S.bytes}})}};async function isValid({cid:u,bytes:g}){let S=await tk.digest(g);return equals_equals(S.digest,u.multihash.digest)}async function*unpackStream(u,{roots:g,blockstore:S}={}){let R=await CarBlockIterator.fromIterable(asAsyncIterable(u)),D=S||new MemoryBlockStore;for await(let u of R)await D.put(u.cid,u.bytes);let C=verifying_get_only_blockstore_VerifyingGetOnlyBlockStore.fromBlockstore(D);for(let u of(g&&0!==g.length||(g=await R.getRoots()),g))yield*recursive(u,C)}function asAsyncIterable(u){return Symbol.asyncIterator in u?u:rQ(u)}let block_readonly=({enumerable:u=!0,configurable:g=!1}={})=>({enumerable:u,configurable:g,writable:!1}),links=function*(u,g){if(null!=u&&!(u instanceof Uint8Array))for(let[S,R]of Object.entries(u)){let u=[...g,S];if(null!=R&&"object"==typeof R){if(Array.isArray(R))for(let[g,S]of R.entries()){let R=[...u,g],D=cid_CID.asCID(S);D?yield[R.join("/"),D]:"object"==typeof S&&(yield*links(S,R))}else{let g=cid_CID.asCID(R);g?yield[u.join("/"),g]:yield*links(R,u)}}}},tree=function*(u,g){if(null!=u)for(let[S,R]of Object.entries(u)){let u=[...g,S];if(yield u.join("/"),null!=R&&!(R instanceof Uint8Array)&&"object"==typeof R&&!cid_CID.asCID(R)){if(Array.isArray(R))for(let[g,S]of R.entries()){let R=[...u,g];yield R.join("/"),"object"!=typeof S||cid_CID.asCID(S)||(yield*tree(S,R))}else yield*tree(R,u)}}},get=(u,g)=>{let S=u;for(let[u,R]of g.entries()){if(null==(S=S[R]))throw Error(`Object has no property at ${g.slice(0,u+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);let D=cid_CID.asCID(S);if(D)return{value:D,remaining:g.slice(u+1).join("/")}}return{value:S}};let Block=class Block{constructor({cid:u,bytes:g,value:S}){if(!u||!g||void 0===S)throw Error("Missing required argument");this.cid=u,this.bytes=g,this.value=S,this.asBlock=this,Object.defineProperties(this,{cid:block_readonly(),bytes:block_readonly(),value:block_readonly(),asBlock:block_readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(u="/"){return get(this.value,u.split("/").filter(Boolean))}};let na=42;function esm_cidEncoder(u){if(u.asCID!==u)return null;let g=cid_CID.asCID(u);if(!g)return null;let S=new Uint8Array(g.bytes.byteLength+1);return S.set(g.bytes,1),[new Token(Type.tag,na),new Token(Type.bytes,S)]}function esm_undefinedEncoder(){throw Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function esm_numberEncoder(u){if(Number.isNaN(u))throw Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(u===1/0||u===-1/0)throw Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}let ns={float64:!0,typeEncoders:{Object:esm_cidEncoder,undefined:esm_undefinedEncoder,number:esm_numberEncoder}};function esm_cidDecoder(u){if(0!==u[0])throw Error("Invalid CID for CBOR tag 42; expected leading 0x00");return cid_CID.decode(u.subarray(1))}let nu={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};nu.tags[na]=esm_cidDecoder;let nc="dag-cbor",nd=113,dag_cbor_esm_encode=u=>encode_encode(u,ns),dag_cbor_esm_decode=u=>decode_decode(u,nu);let TreewalkCarSplitter=class TreewalkCarSplitter{constructor(u,g,S={}){if("number"!=typeof g||g<=0)throw Error("invalid target chunk size");this._reader=u,this._targetSize=g,this._decoders=[E,T,G,...S.decoders||[]]}async *cars(){let u;let g=await this._reader.getRoots();if(1!==g.length)throw Error(`unexpected number of roots: ${g.length}`);for await(let S of this._cars(g[0]))u=S.channel,S.out&&(yield S.out);if(!u)throw Error("missing CAR writer channel");u.writer.close(),yield u.out}async _get(u){let g=await this._reader.get(u);if(!g)throw Error(`missing block for ${u}`);let{bytes:S}=g,R=this._decoders.find(g=>g.code===u.code);if(!R)throw Error(`missing decoder for ${u.code}`);return new Block({cid:u,bytes:S,value:R.decode(S)})}async *_cars(u,g=[],S){let R=await this._get(u);if((S=S||Object.assign(writer_CarWriter.create(u),{size:0})).size>0&&S.size+R.bytes.byteLength>=this._targetSize){S.writer.close();let{out:u}=S;S=newCar(g),yield{channel:S,out:u}}for(let[,u]of(g=g.concat(R),S.size+=R.bytes.byteLength,S.writer.put(R),R.links()))for await(let R of this._cars(u,g,S))S=R.channel,yield R;if(!S)throw Error("missing CAR writer channel");yield{channel:S}}static async fromIterable(u,g,S){let R=await CarReader.fromIterable(u);return new TreewalkCarSplitter(R,g,S)}static async fromBlob(u,g,S){let R=await u.arrayBuffer(),D=await CarReader.fromBytes(new Uint8Array(R));return new TreewalkCarSplitter(D,g,S)}};function newCar(u){let g=Object.assign(writer_CarWriter.create(u[0].cid),{size:u.reduce((u,g)=>u+g.bytes.byteLength,0)});for(let S of u)g.writer.put(S);return g}S(71017);var nf=S(61055);S(31882);let nh=(0,ee.promisify)(nf.stat),toPosix=u=>u.replace(/\\/g,"/");var np=S(10275),nm=S(13685),ny=S(95687),nb=S(59796);let ng={ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",dwd:"application/atsc-dwd+xml",held:"application/atsc-held+xml",rsat:"application/atsc-rsat+xml",bdoc:"application/bdoc",xcs:"application/calendar+xml",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",es:"application/ecmascript",ecma:"application/ecmascript",emma:"application/emma+xml",emotionml:"application/emotionml+xml",epub:"application/epub+zip",exi:"application/exi",fdt:"application/fdt+xml",pfr:"application/font-tdpfr",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",its:"application/its+xml",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lgr:"application/lgr+xml",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",maei:"application/mmt-aei+xml",musd:"application/mmt-usd+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",nq:"application/n-quads",nt:"application/n-triples",cjs:"application/node",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/octet-stream",dll:"application/octet-stream",deb:"application/octet-stream",dmg:"application/octet-stream",iso:"application/octet-stream",img:"application/octet-stream",msi:"application/octet-stream",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",relo:"application/p2p-overlay+xml",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",provx:"application/provenance+xml",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",owl:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rapd:"application/route-apd+xml",sls:"application/route-s-tsid+xml",rusd:"application/route-usd+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",siv:"application/sieve",sieve:"application/sieve",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",swidtag:"application/swid+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",toml:"application/toml",trig:"application/trig",ttml:"application/ttml+xml",ubj:"application/ubjson",rsheet:"application/urc-ressheet+xml",td:"application/urc-targetdesc+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xdf:"application/xcap-diff+xml",xel:"application/xcap-el+xml",xns:"application/xcap-ns+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xlf:"application/xliff+xml",xml:"application/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip","3gpp":"video/3gpp",adp:"audio/adpcm",amr:"audio/amr",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mxmf:"audio/mobile-xmf",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",opus:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",wav:"audio/wav",weba:"audio/webm",xm:"audio/xm",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",exr:"image/aces",apng:"image/apng",avif:"image/avif",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",ktx2:"image/ktx2",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",webp:"image/webp",wmf:"image/wmf","disposition-notification":"message/disposition-notification",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",obj:"model/obj",stpz:"model/step+zip",stpxz:"model/step-xml+zip",stl:"model/stl",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",mdx:"text/mdx",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",spdx:"text/spdx",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vtt:"text/vtt",yaml:"text/yaml",yml:"text/yaml","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",m4s:"video/iso.segment",jpgv:"video/jpeg",jpgm:"image/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",webm:"video/webm"};function lookup(u){let g=(""+u).trim().toLowerCase(),S=g.lastIndexOf(".");return ng[~S?g.substring(++S):g]}var n_=S(47255),nS=S(14300);let nw=TextEncoder,nv=TextDecoder;var nR=S(29375);let{ReadableStream:nD,ReadableStreamDefaultReader:nC,ReadableStreamBYOBReader:nE,ReadableStreamBYOBRequest:nx,ReadableByteStreamController:nT,ReadableStreamDefaultController:nk,TransformStream:nA,TransformStreamDefaultController:nB,WritableStream:nI,WritableStreamDefaultWriter:nP,WritableStreamDefaultController:nW,ByteLengthQueuingStrategy:nO,CountQueuingStrategy:nj,TextEncoderStream:nF,TextDecoderStream:nL}=nR,nz=class Blob{constructor(u=[],g={}){let S=[],R=0;for(let g of u)if("string"==typeof g){let u=new nw().encode(g);S.push(u),R+=u.byteLength}else if(g instanceof nz)R+=g.size,S.push(...g._parts);else if(g instanceof ArrayBuffer)S.push(new Uint8Array(g)),R+=g.byteLength;else if(g instanceof Uint8Array)S.push(g),R+=g.byteLength;else if(ArrayBuffer.isView(g)){let{buffer:u,byteOffset:D,byteLength:C}=g;S.push(new Uint8Array(u,D,C)),R+=C}else{let u=new nw().encode(String(g));S.push(u),R+=u.byteLength}this._size=R,this._type=readType(g.type),this._parts=S,Object.defineProperties(this,{_size:{enumerable:!1},_type:{enumerable:!1},_parts:{enumerable:!1}})}get type(){return this._type}get size(){return this._size}slice(u=0,g=this.size,S=""){let{size:R,_parts:D}=this,C=u<0?Math.max(R+u,0):Math.min(u,R),E=g<0?Math.max(R+g,0):Math.min(g,R),T=Math.max(E-C,0),A=new Blob([],{type:S});if(0===T)return A;let B=0,I=[];for(let u of D){let{byteLength:g}=u;if(C>0&&g<=C)C-=g,E-=g;else{let S=u.subarray(C,Math.min(g,E));if(I.push(S),B+=S.byteLength,C=0,B>=T)break}}return A._parts=I,A._size=B,A}async arrayBuffer(){let u=new ArrayBuffer(this.size),g=new Uint8Array(u),S=0;for(let u of this._parts)g.set(u,S),S+=u.byteLength;return u}async text(){let u=new nv,g="";for(let S of this._parts)g+=u.decode(S);return g}stream(){return new BlobStream(this._parts)}toString(){return"[object Blob]"}get[Symbol.toStringTag](){return"Blob"}},nU=nz;let BlobStream=class BlobStream extends nD{constructor(u){super(new BlobStreamController(u.values()),{type:"bytes"}),this._chunks=u}async *[Symbol.asyncIterator](u){let g=this.getReader();yield*this._chunks,g.releaseLock()}};let BlobStreamController=class BlobStreamController{constructor(u){this.chunks=u}start(u){this.work(u),this.isWorking=!1,this.isCancelled=!1}async work(u){let{chunks:g}=this;for(this.isWorking=!0;!this.isCancelled&&(u.desiredSize||0)>0;){let S=null;try{S=g.next()}catch(g){u.error(g);break}S&&(S.done||this.isCancelled?u.close():u.enqueue(S.value))}this.isWorking=!1}pull(u){this.isWorking||this.work(u)}cancel(){this.isCancelled=!0}};let readType=(u="")=>{let g=String(u).toLowerCase();return/[^\u0020-\u007E]/.test(g)?"":g},nN=globalThis.Blob||nU;let FetchBaseError=class FetchBaseError extends Error{constructor(u,g){super(u),Error.captureStackTrace(this,this.constructor),this.type=g}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};let FetchError=class FetchError extends FetchBaseError{constructor(u,g,S){super(u,g),S&&(this.code=this.errno=S.code,this.erroredSysCall=S.syscall)}};function stringToArray(u){let g=unescape(encodeURIComponent(u));return Uint8Array.from(g,(u,S)=>g.charCodeAt(S))}function utils_arrayToString(u){let g=String.fromCharCode.apply(null,u);return decodeURIComponent(escape(g))}function utils_mergeArrays(...u){let g=new Uint8Array(u.reduce((u,g)=>u+g.length,0)),S=0;for(let R of u)g.set(R,S),S+=R.length;return g}function arraysEqual(u,g){if(u.length!==g.length)return!1;for(let S=0;S<u.length;S++)if(u[S]!==g[S])return!1;return!0}function search_coerce(u){return u instanceof Uint8Array?g=>u[g]:u}function jsmemcmp(u,g,S,R,D){let C=search_coerce(u),E=search_coerce(S);for(let u=0;u<D;++u)if(C(g+u)!==E(R+u))return!1;return!0}function createOccurenceTable(u){let g=Array(256).fill(u.length);if(u.length>1)for(let S=0;S<u.length-1;S++)g[u[S]]=u.length-1-S;return g}let nM=Symbol("Match");let StreamSearch=class StreamSearch{constructor(u){this._lookbehind=new Uint8Array,"string"==typeof u?this._needle=u=stringToArray(u):this._needle=u,this._lastChar=u[u.length-1],this._occ=createOccurenceTable(u)}feed(u){let g,S=0,R=[];for(;S!==u.length;)[S,...g]=this._feed(u,S),R.push(...g);return R}end(){let u=this._lookbehind;return this._lookbehind=new Uint8Array,u}_feed(u,g){let S=[],R=-this._lookbehind.length;if(R<0){for(;R<0&&R<=u.length-this._needle.length;){let g=this._charAt(u,R+this._needle.length-1);if(g===this._lastChar&&this._memcmp(u,R,this._needle.length-1))return R>-this._lookbehind.length&&S.push(this._lookbehind.slice(0,this._lookbehind.length+R)),S.push(nM),this._lookbehind=new Uint8Array,[R+this._needle.length,...S];R+=this._occ[g]}if(R<0)for(;R<0&&!this._memcmp(u,R,u.length-R);)R++;if(R>=0)S.push(this._lookbehind),this._lookbehind=new Uint8Array;else{let g=this._lookbehind.length+R;return g>0&&(S.push(this._lookbehind.slice(0,g)),this._lookbehind=this._lookbehind.slice(g)),this._lookbehind=Uint8Array.from(Array(this._lookbehind.length+u.length),(g,S)=>this._charAt(u,S-this._lookbehind.length)),[u.length,...S]}}for(R+=g;R<=u.length-this._needle.length;){let D=u[R+this._needle.length-1];if(D===this._lastChar&&u[R]===this._needle[0]&&jsmemcmp(this._needle,0,u,R,this._needle.length-1))return R>g&&S.push(u.slice(g,R)),S.push(nM),[R+this._needle.length,...S];R+=this._occ[D]}if(R<u.length){for(;R<u.length&&(u[R]!==this._needle[0]||!jsmemcmp(u,R,this._needle,0,u.length-R));)++R;R<u.length&&(this._lookbehind=u.slice(R))}return R>0&&S.push(u.slice(g,R<u.length?R:u.length)),[u.length,...S]}_charAt(u,g){return g<0?this._lookbehind[this._lookbehind.length+g]:u[g]}_memcmp(u,g,S){return jsmemcmp(this._charAt.bind(this,u),g,this._needle,0,S)}};let ReadableStreamSearch=class ReadableStreamSearch{constructor(u,g){this._readableStream=g,this._search=new StreamSearch(u)}async *[Symbol.asyncIterator](){let u=this._readableStream.getReader();try{for(;;){let g=await u.read();if(g.done)break;yield*this._search.feed(g.value)}let g=this._search.end();g.length&&(yield g)}finally{u.releaseLock()}}};Symbol("End of Queue");Symbol.asyncIterator;let nq=Function.prototype.apply.bind(utils_mergeArrays,void 0),n$=stringToArray("--"),nH=stringToArray("\r\n");function parseContentDisposition(u){let g=u.split(";").map(u=>u.trim());if("form-data"!==g.shift())throw Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(g)+"`");let S={};for(let R of g){let g=R.split("=",2);if(2!==g.length)throw Error("malformed content-disposition header: key-value pair not found - "+R+" in `"+u+"`");let[D,C]=g;if('"'===C[0]&&'"'===C[C.length-1])S[D]=C.slice(1,-1).replace(/\\"/g,'"');else if('"'!==C[0]&&'"'!==C[C.length-1])S[D]=C;else if('"'===C[0]&&'"'!==C[C.length-1]||'"'!==C[0]&&'"'===C[C.length-1])throw Error("malformed content-disposition header: mismatched quotations in `"+u+"`")}if(!S.name)throw Error("malformed content-disposition header: missing field name in `"+u+"`");return S}function parsePartHeaders(u){let g;let S=[],R=!1;for(;void 0!==(g=u.shift());){let u=g.indexOf(":");if(-1===u)throw Error("malformed multipart-form header: missing colon");let D=g.slice(0,u).trim().toLowerCase(),C=g.slice(u+1).trim();switch(D){case"content-disposition":R=!0,S.push(...Object.entries(parseContentDisposition(C)));break;case"content-type":S.push(["contentType",C])}}if(!R)throw Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(S)}async function readHeaderLines(u,g){let S=!0,R=!1,D=[[]],C=new StreamSearch(nH);for(;;){let E;let T=await u.next();if(T.done)throw Error("malformed multipart-form data: unexpected end of stream");if(S&&T.value!==nM&&arraysEqual(T.value.slice(0,2),n$))return[void 0,new Uint8Array];if(T.value!==nM)E=T.value;else if(R)throw Error("malformed multipart-form data: unexpected boundary");else E=g;if(!E.length)continue;S&&(S=!1);let A=C.feed(E);for(let[u,g]of A.entries()){let S=g===nM;if(S||g.length){if(R&&S)return A.push(C.end()),[D.filter(u=>u.length).map(nq).map(utils_arrayToString),utils_mergeArrays(...A.slice(u+1).map(u=>u===nM?nH:u))];(R=S)?D.push([]):D[D.length-1].push(g)}}}}async function*streamMultipart(u,g){let S=utils_mergeArrays(n$,stringToArray(g)),R=new ReadableStreamSearch(S,u)[Symbol.asyncIterator]();for(;;){let u=await R.next();if(u.done)return;if(u.value===nM)break}let D=new StreamSearch(nH);for(;;){let[u,g]=await readHeaderLines(R,S);if(!u)return;async function nextToken(){let u=await R.next();if(u.done)throw Error("malformed multipart-form data: unexpected end of stream");return u}let C=!1;function feedChunk(u){let g=[];for(let S of D.feed(u))C&&g.push(nH),(C=S===nM)||g.push(S);return utils_mergeArrays(...g)}let E=!1;async function nextChunk(){let u;let g=await nextToken();if(g.value!==nM)u=g.value;else{if(C)return E=!0,{value:D.end()};u=nH}return{value:feedChunk(u)}}let T=[{value:feedChunk(g)}];for(yield{...parsePartHeaders(u),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){let u=T.shift();if(!u)break;if(u.value.length>0)return u}for(;;){if(E)return{done:E,value:void 0};let u=await nextChunk();if(u.value.length>0)return u}}}};!E;)T.push(await nextChunk())}}async function*iterateMultipart(u,g){for await(let S of streamMultipart(u,g)){let u=[];for await(let g of S.data)u.push(g);yield{...S,data:utils_mergeArrays(...u)}}}let FormData=class FormData{constructor(u){if(this._entries=[],Object.defineProperty(this,"_entries",{enumerable:!1}),isHTMLFormElement(u))for(let g of u.elements)if(isSelectElement(g))for(let u of g.options)u.selected&&this.append(g.name,u.value);else isInputElement(g)&&(g.checked||!["radio","checkbox"].includes(g.type))&&g.name&&this.append(g.name,g.value)}get[Symbol.toStringTag](){return"FormData"}append(u,g=panic(TypeError("FormData.append: requires at least 2 arguments")),S){this._entries.push([u,toEntryValue(g,S)])}delete(u=panic(TypeError("FormData.delete: requires string argument"))){let g=this._entries,S=0;for(;S<g.length;){let[R]=g[S];R===u?g.splice(S,1):S++}}get(u=panic(TypeError("FormData.get: requires string argument"))){for(let[g,S]of this._entries)if(g===u)return S;return null}getAll(u=panic(TypeError("FormData.getAll: requires string argument"))){let g=[];for(let[S,R]of this._entries)S===u&&g.push(R);return g}has(u=panic(TypeError("FormData.has: requires string argument"))){for(let[g]of this._entries)if(g===u)return!0;return!1}set(u,g=panic(TypeError("FormData.set: requires at least 2 arguments")),S){let R=0,{_entries:D}=this,C=toEntryValue(g,S),E=!1;for(;R<D.length;){let g=D[R];g[0]===u?E?D.splice(R,1):(E=!0,g[1]=C,R++):R++}E||D.push([u,C])}entries(){return this._entries.values()}*keys(){for(let[u]of this._entries)yield u}*values(){for(let[u,g]of this._entries)yield g}[Symbol.iterator](){return this._entries.values()}forEach(u,g){for(let[S,R]of this._entries)u.call(g,R,S,this)}};let isHTMLFormElement=u=>"[object HTMLFormElement]"===Object.prototype.toString.call(u),toEntryValue=(u,g)=>{if(isFile(u))return null!=g?new nV([u],g,u):u;if(form_data_isBlob(u))return new nV([u],null!=g?g:"blob");if(null!=g&&""!=g)throw TypeError("filename is only supported when value is Blob or File");return`${u}`},isFile=u=>"[object File]"===Object.prototype.toString.call(u)&&"string"==typeof u.name,form_data_isBlob=u=>"[object Blob]"===Object.prototype.toString.call(u),nV=class{constructor([u],g,{lastModified:S=Date.now()}={}){this.blob=u,this.name=g,this.lastModified=S}get webkitRelativePath(){return""}get size(){return this.blob.size}get type(){return this.blob.type}slice(u,g,S){return this.blob.slice(u,g,S)}stream(){return this.blob.stream()}text(){return this.blob.text()}arrayBuffer(){return this.blob.arrayBuffer()}get[Symbol.toStringTag](){return"File"}},panic=u=>{throw u};function isSelectElement(u){return"SELECT"===u.tagName}function isInputElement(u){return"INPUT"===u.tagName||"TEXTAREA"===u.tagName}let nQ="function"==typeof globalThis.FormData?globalThis.FormData:FormData;let File=class File extends nN{constructor(u,g=file_panic(TypeError("File constructor requires name argument")),S={}){super(u,S),this._name=g,this._lastModified=S.lastModified||Date.now()}get name(){return this._name}get webkitRelativePath(){return""}get lastModified(){return this._lastModified}get[Symbol.toStringTag](){return"File"}};let file_panic=u=>{throw u},nG="function"==typeof globalThis.File?globalThis.File:File,nY=Symbol.toStringTag,isURLSearchParameters=u=>"object"==typeof u&&"function"==typeof u.append&&"function"==typeof u.delete&&"function"==typeof u.get&&"function"==typeof u.getAll&&"function"==typeof u.has&&"function"==typeof u.set&&"function"==typeof u.sort&&"URLSearchParams"===u[nY],is_isBlob=u=>"object"==typeof u&&"function"==typeof u.arrayBuffer&&"string"==typeof u.type&&"function"==typeof u.stream&&"function"==typeof u.constructor&&/^(Blob|File)$/.test(u[nY]);function isFormData(u){return"object"==typeof u&&"function"==typeof u.append&&"function"==typeof u.set&&"function"==typeof u.get&&"function"==typeof u.getAll&&"function"==typeof u.delete&&"function"==typeof u.keys&&"function"==typeof u.values&&"function"==typeof u.entries&&"function"==typeof u.constructor&&"FormData"===u[nY]}let isMultipartFormDataStream=u=>u instanceof tD==!0&&"function"==typeof u.getBoundary&&"function"==typeof u.hasKnownLength&&"function"==typeof u.getLengthSync,isAbortSignal=u=>"object"==typeof u&&("AbortSignal"===u[nY]||"EventTarget"===u[nY]),is_isReadableStream=u=>"object"==typeof u&&"function"==typeof u.getReader&&"function"==typeof u.cancel&&"function"==typeof u.tee,is_isIterable=u=>u&&Symbol.iterator in u,nX="\r\n",nK="-".repeat(2),nJ=Buffer.byteLength(nX),getFooter=u=>`${nK}${u}${nK}${nX.repeat(2)}`;function getHeader(u,g,S){let R="";if(R+=`${nK}${u}${nX}Content-Disposition: form-data; name="${g}"`,is_isBlob(S)){let{name:u="blob",type:g}=S;R+=`; filename="${u}"${nX}Content-Type: ${g||"application/octet-stream"}`}return`${R}${nX.repeat(2)}`}let getBoundary=()=>(0,tT.randomBytes)(8).toString("hex");async function*formDataIterator(u,g){let S=new TextEncoder;for(let[R,D]of u)yield S.encode(getHeader(g,R,D)),is_isBlob(D)?yield*D.stream():yield S.encode(D),yield S.encode(nX);yield S.encode(getFooter(g))}function getFormDataLength(u,g){let S=0;for(let[R,D]of u)S+=Buffer.byteLength(getHeader(g,R,D)),is_isBlob(D)?S+=D.size:S+=Buffer.byteLength(String(D)),S+=nJ;return S+Buffer.byteLength(getFooter(g))}let toFormData=async u=>{let{body:g,headers:S}=u,R=S?.get("Content-Type")||"";if(R.startsWith("application/x-www-form-urlencoded")&&null!=g){let g=new nQ,S=await u.text();return new URLSearchParams(S).forEach((u,S)=>g.append(S,u)),g}let[D,C]=R.split(/\s*;\s*boundary=/);if("multipart/form-data"===D&&null!=C&&null!=g){let u=new nQ,S=iterateMultipart(g,C);for await(let{name:g,data:R,filename:D,contentType:C}of S)"string"==typeof D?u.append(g,new nG([R],D,{type:C})):void 0!==D?u.append(g,new nG([],"",{type:C})):u.append(g,new TextDecoder().decode(R),D);return u}throw TypeError("Could not parse content as FormData.")},nZ=new ee.TextEncoder,n0=new ee.TextDecoder,utf8_encode=u=>nZ.encode(u),utf8_decode=u=>n0.decode(u),{readableHighWaterMark:n1}=new tD.Readable,n2=Symbol("Body internals");let Body=class Body{constructor(u,{size:g=0}={}){let S={body:null,type:null,size:null,boundary:null,disturbed:!1,error:null};if(this[n2]=S,null===u)S.body=null,S.size=0;else if(isURLSearchParameters(u)){let g=utf8_encode(u.toString());S.body=body_fromBytes(g),S.size=g.byteLength,S.type="application/x-www-form-urlencoded;charset=UTF-8"}else if(is_isBlob(u))S.size=u.size,S.type=u.type||null,S.body=u.stream();else if(u instanceof Uint8Array)S.body=body_fromBytes(u),S.size=u.byteLength;else if(ee.types.isAnyArrayBuffer(u)){let g=new Uint8Array(u);S.body=body_fromBytes(g),S.size=g.byteLength}else if(ArrayBuffer.isView(u)){let g=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);S.body=body_fromBytes(g),S.size=g.byteLength}else if(is_isReadableStream(u))S.body=u;else if(isFormData(u)){let g=`NodeFetchFormDataBoundary${getBoundary()}`;S.type=`multipart/form-data; boundary=${g}`,S.size=getFormDataLength(u,g),S.body=fromAsyncIterable(formDataIterator(u,g))}else if(isMultipartFormDataStream(u))S.type=`multipart/form-data; boundary=${u.getBoundary()}`,S.size=u.hasKnownLength()?u.getLengthSync():null,S.body=body_fromStream(u);else if(u instanceof tD)S.body=body_fromStream(u);else{let g=utf8_encode(String(u));S.type="text/plain;charset=UTF-8",S.size=g.byteLength,S.body=body_fromBytes(g)}this.size=g}get headers(){throw TypeError("'get headers' called on an object that does not implements interface.")}get body(){return this[n2].body}get bodyUsed(){return this[n2].disturbed}async arrayBuffer(){let{buffer:u,byteOffset:g,byteLength:S}=await consumeBody(this);return u.slice(g,g+S)}async blob(){let u=this.headers&&this.headers.get("content-type")||this[n2].body&&this[n2].type||"",g=await consumeBody(this);return new nN([g],{type:u})}async json(){return JSON.parse(await this.text())}async text(){let u=await consumeBody(this);return utf8_decode(u)}async formData(){return toFormData(this)}};async function consumeBody(u){let g=u[n2];if(g.disturbed)throw TypeError(`body used already for: ${u.url}`);if(g.disturbed=!0,g.error)throw g.error;let{body:S}=g;if(null===S)return new Uint8Array(0);let[R,D,C]=u.size>0?[new Uint8Array(u.size),[],u.size]:[null,[],1/0],E=0,T=streamIterator(S);try{for await(let g of T){let S=g instanceof Uint8Array?g:Buffer.from(g);if(E+S.byteLength>C){let g=new FetchError(`content size at ${u.url} over limit: ${C}`,"max-size");throw T.throw(g),g}R?R.set(S,E):D.push(S),E+=S.byteLength}if(!R)return writeBytes(new Uint8Array(E),D);if(!(E<R.byteLength))return R;throw new FetchError(`Premature close of server response while trying to fetch ${u.url}`,"premature-close")}catch(g){if(g instanceof FetchBaseError||g&&"AbortError"===g.name)throw g;{let S=g;throw new FetchError(`Invalid response body while trying to fetch ${u.url}: ${S.message}`,"system",S)}}}Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},formData:{enumerable:!0}});let clone=u=>{let{body:g}=u;if(u.bodyUsed)throw Error("cannot clone body after it is used");if(!g)return null;let[S,R]=g.tee();return u[n2].body=S,R},extractContentType=u=>u[n2].type,getTotalBytes=u=>u[n2].size,body_writeToStream=(u,{body:g})=>{null===g?u.end():tD.Readable.from(streamIterator(g)).pipe(u)};let StreamIterableIterator=class StreamIterableIterator{constructor(u){this.stream=u,this.reader=null}[Symbol.asyncIterator](){return this}getReader(){if(this.reader)return this.reader;let u=this.stream.getReader();return this.reader=u,u}next(){return this.getReader().read()}async return(){return this.reader&&await this.reader.cancel(),{done:!0,value:void 0}}async throw(u){return await this.getReader().cancel(u),{done:!0,value:void 0}}};let streamIterator=u=>new StreamIterableIterator(u),writeBytes=(u,g)=>{let S=0;for(let R of g)u.set(R,S),S+=R.byteLength;return u},body_fromBytes=u=>new nD({start(g){g.enqueue(u),g.close()}}),fromAsyncIterable=u=>new nD(new AsyncIterablePump(u));let AsyncIterablePump=class AsyncIterablePump{constructor(u){this.source=u[Symbol.asyncIterator]()}async pull(u){try{for(;u.desiredSize;){let g=await this.source.next();if(g.done){u.close();break}u.enqueue(g.value)}}catch(g){u.error(g)}}cancel(u){u&&"function"==typeof this.source.throw?this.source.throw(u):"function"==typeof this.source.return&&this.source.return()}};let body_fromStream=u=>{let g=new StreamPump(u),S=new nD(g,g);return S};let StreamPump=class StreamPump{constructor(u){this.highWaterMark=u.readableHighWaterMark||n1,this.accumalatedSize=0,this.stream=u,this.enqueue=this.enqueue.bind(this),this.error=this.error.bind(this),this.close=this.close.bind(this)}size(u){return u?.byteLength||0}start(u){this.controller=u,this.stream.on("data",this.enqueue),this.stream.once("error",this.error),this.stream.once("end",this.close),this.stream.once("close",this.close)}pull(){this.resume()}cancel(u){this.stream.destroy&&this.stream.destroy(u),this.stream.off("data",this.enqueue),this.stream.off("error",this.error),this.stream.off("end",this.close),this.stream.off("close",this.close)}enqueue(u){if(this.controller)try{let g=u instanceof Uint8Array?u:Buffer.from(u),S=(this.controller.desiredSize||0)-g.byteLength;this.controller.enqueue(g),S<=0&&this.pause()}catch{this.controller.error(Error("Could not create Buffer, chunk must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object")),this.cancel()}}pause(){this.stream.pause&&this.stream.pause()}resume(){this.stream.readable&&this.stream.resume&&this.stream.resume()}close(){this.controller&&(this.controller.close(),delete this.controller)}error(u){this.controller&&(this.controller.error(u),delete this.controller)}};let n8=nm,n3="function"==typeof n8.validateHeaderName?n8.validateHeaderName:u=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(u)){let g=TypeError(`Header name must be a valid HTTP token [${u}]`);throw Object.defineProperty(g,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),g}},n6="function"==typeof n8.validateHeaderValue?n8.validateHeaderValue:(u,g)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(g)){let g=TypeError(`Invalid character in header content ["${u}"]`);throw Object.defineProperty(g,"code",{value:"ERR_INVALID_CHAR"}),g}};let Headers=class Headers extends URLSearchParams{constructor(u){let g=[];if(u instanceof Headers){let S=u.raw();for(let[u,R]of Object.entries(S))g.push(...R.map(g=>[u,g]))}else if(null==u);else if(is_isIterable(u))g=[...u].map(u=>{if("object"!=typeof u||ee.types.isBoxedPrimitive(u))throw TypeError("Each header pair must be an iterable object");return[...u]}).map(u=>{if(2!==u.length)throw TypeError("Each header pair must be a name/value tuple");return[...u]});else if("object"==typeof u&&null!==u)g.push(...Object.entries(u));else throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return super(g=g.length>0?g.map(([u,g])=>(n3(u),n6(u,String(g)),[String(u).toLowerCase(),String(g)])):[]),new Proxy(this,{get(u,g,S){switch(g){case"append":case"set":return(u,R)=>(n3(u),n6(u,String(R)),URLSearchParams.prototype[g].call(S,String(u).toLowerCase(),String(R)));case"delete":case"has":case"getAll":return u=>(n3(u),URLSearchParams.prototype[g].call(S,String(u).toLowerCase()));case"keys":return()=>(u.sort(),new Set(URLSearchParams.prototype.keys.call(u)).keys());default:return Reflect.get(u,g,S)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(u){let g=this.getAll(u);if(0===g.length)return null;let S=g.join(", ");return/^content-encoding$/i.test(u)&&(S=S.toLowerCase()),S}forEach(u,g){for(let S of this.keys())if("set-cookie"===S.toLowerCase()){let R=this.getAll(S);for(;R.length>0;)Reflect.apply(u,g,[R.shift(),S,this])}else Reflect.apply(u,g,[this.get(S),S,this])}*values(){for(let u of this.keys())if("set-cookie"===u.toLowerCase()){let g=this.getAll(u);for(;g.length>0;)yield g.shift()}else yield this.get(u)}*entries(){for(let u of this.keys())if("set-cookie"===u.toLowerCase()){let g=this.getAll(u);for(;g.length>0;)yield[u,g.shift()]}else yield[u,this.get(u)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((u,g)=>(u[g]=this.getAll(g),u),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((u,g)=>{let S=this.getAll(g);return"host"===g?u[g]=S[0]:u[g]=S.length>1?S:S[0],u},{})}};function fromRawHeaders(u=[]){return new Headers(u.reduce((u,g,S,R)=>(S%2==0&&u.push(R.slice(S,S+2)),u),[]).filter(([u,g])=>{try{return n3(u),n6(u,String(g)),!0}catch{return!1}}))}Object.defineProperties(Headers.prototype,["get","entries","forEach","values"].reduce((u,g)=>(u[g]={enumerable:!0},u),{}));let n4=new Set([301,302,303,307,308]),isRedirect=u=>n4.has(u),n5=Symbol("Response internals");let Response=class Response extends Body{constructor(u=null,g={}){super(u,g);let S=g.status||200,R=new Headers(g.headers);if(null!==u&&!R.has("Content-Type")){let u=extractContentType(this);u&&R.append("Content-Type",u)}this[n5]={url:g.url,status:S,statusText:g.statusText||"",headers:R,counter:g.counter||0,highWaterMark:g.highWaterMark}}get type(){return"default"}get url(){return this[n5].url||""}get status(){return this[n5].status}get ok(){return this[n5].status>=200&&this[n5].status<300}get redirected(){return this[n5].counter>0}get statusText(){return this[n5].statusText}get headers(){return this[n5].headers}get highWaterMark(){return this[n5].highWaterMark}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,size:this.size})}static redirect(u,g=302){if(!isRedirect(g))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Response(null,{headers:{location:new URL(u).toString()},status:g})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Response.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var n7=S(57310),n9=S(8541);let getSearch=u=>{if(u.search)return u.search;let g=u.href.length-1,S=u.hash||("#"===u.href[g]?"#":"");return"?"===u.href[g-S.length]?"?":""},oe=Symbol("Request internals"),ot=new Set(["CONNECT","TRACE","TRACK"]),on=new Set(["DELETE","GET","HEAD","OPTIONS","POST","PUT"]),isRequest=u=>"object"==typeof u&&"object"==typeof u[oe];let Request=class Request extends Body{constructor(u,g={}){let S,R;isRequest(u)?(S=new URL(u.url),R=u):(S=new URL(u),R={});let D=g.method||R.method||"GET";if(ot.has(D.toUpperCase()))throw TypeError(`Failed to construct 'Request': '${D}' HTTP method is unsupported.`);on.has(D.toUpperCase())&&(D=D.toUpperCase());let C=null!=g.body?g.body:isRequest(u)&&null!==u.body?clone(u):null;if(null!=C&&("GET"===D||"HEAD"===D))throw TypeError("Request with GET/HEAD method cannot have body");super(C,{size:g.size||R.size||0});let E=R,T=new Headers(g.headers||E.headers||{});if(null!==C&&!T.has("Content-Type")){let u=extractContentType(this);u&&T.append("Content-Type",u)}let A="signal"in g?g.signal:isRequest(E)?E.signal:null;if(null!=A&&!isAbortSignal(A))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");A||(A=new("undefined"!=typeof AbortController?AbortController:n9.AbortController)().signal),this[oe]={method:D,redirect:g.redirect||E.redirect||"follow",headers:T,credentials:g.credentials||"same-origin",parsedURL:S,signal:A||null},this.keepalive,this.follow=void 0===g.follow?void 0===E.follow?20:E.follow:g.follow,this.compress=void 0===g.compress?void 0===E.compress||E.compress:g.compress,this.counter=g.counter||E.counter||0,this.agent=g.agent||E.agent,this.highWaterMark=g.highWaterMark||E.highWaterMark||16384,this.insecureHTTPParser=g.insecureHTTPParser||E.insecureHTTPParser||!1}get cache(){return"default"}get credentials(){return this[oe].credentials}get destination(){return""}get integrity(){return""}get mode(){return"cors"}get referrer(){return""}get referrerPolicy(){return""}get method(){return this[oe].method}get url(){return(0,n7.format)(this[oe].parsedURL)}get headers(){return this[oe].headers}get redirect(){return this[oe].redirect}get signal(){return this[oe].signal}clone(){return new Request(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});let getNodeRequestOptions=u=>{let{parsedURL:g}=u[oe],S=new Headers(u[oe].headers);S.has("Accept")||S.set("Accept","*/*");let R=null;if(null===u.body&&/^(post|put)$/i.test(u.method)&&(R="0"),null!==u.body){let g=getTotalBytes(u);"number"!=typeof g||Number.isNaN(g)||(R=String(g))}R&&S.set("Content-Length",R),S.has("User-Agent")||S.set("User-Agent","node-fetch"),u.compress&&!S.has("Accept-Encoding")&&S.set("Accept-Encoding","gzip,deflate,br");let{agent:D}=u;"function"==typeof D&&(D=D(g)),S.has("Connection")||D||S.set("Connection","close");let C=getSearch(g),E={path:g.pathname+C,pathname:g.pathname,hostname:g.hostname,protocol:g.protocol,port:g.port,hash:g.hash,search:g.search,query:g.query,href:g.href,method:u.method,headers:S[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:u.insecureHTTPParser,agent:D};return E};let AbortError=class AbortError extends FetchBaseError{constructor(u,g="aborted"){super(u,g)}};let oo=new Set(["data:","http:","https:","file:"]);async function fetch(u,g={}){return new Promise((S,R)=>{let D=new Request(u,g),C=getNodeRequestOptions(D);if(!oo.has(C.protocol))throw TypeError(`node-fetch cannot load ${u}. URL scheme "${C.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===C.protocol){let u=n_(D.url.toString()),g=new Response(u,{headers:{"Content-Type":u.typeFull}});S(g);return}if("file:"===C.protocol){let u=Z.createReadStream(new URL(D.url)),g=lookup(D.url)||"application/octet-stream",R=new Response(u,{headers:{"Content-Type":g}});S(R);return}let E=("https:"===C.protocol?ny:nm).request,{signal:T}=D,A=null,B=null,abort=()=>{let u=new AbortError("The operation was aborted.");R(u),D.body&&D.body.cancel(u),B&&B.emit("error",u)};if(T&&T.aborted){abort();return}let abortAndFinalize=()=>{abort(),finalize()},I=E(C);T&&T.addEventListener("abort",abortAndFinalize);let finalize=()=>{I.abort(),T&&T.removeEventListener("abort",abortAndFinalize)};I.on("error",u=>{R(new FetchError(`request to ${D.url} failed, reason: ${u.message}`,"system",u)),finalize()}),fixResponseChunkedTransferBadEnding(I,u=>{T&&T.aborted||B?.emit("error",u)}),14>parseInt(process.version.substring(1))&&I.on("socket",u=>{u.prependListener("close",g=>{let S=u.listenerCount("data")>0;if(A&&S&&!g&&!(T&&T.aborted)){let u=Object.assign(Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});B?.emit("error",u)}})}),I.on("response",u=>{B=u,I.setTimeout(0);let C=fromRawHeaders(B.rawHeaders);if(isRedirect(Number(B.statusCode))){let u=C.get("Location"),E=null===u?null:new URL(u,D.url);switch(D.redirect){case"error":R(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${D.url}`,"no-redirect")),finalize();return;case"manual":null!==E&&C.set("Location",E.toString());break;case"follow":{if(null===E)break;if(D.counter>=D.follow){R(new FetchError(`maximum redirect reached at: ${D.url}`,"max-redirect")),finalize();return}let u={headers:new Headers(D.headers),follow:D.follow,counter:D.counter+1,agent:D.agent,compress:D.compress,method:D.method,body:g.body,signal:T,size:D.size},C=u.body instanceof nD||u.body instanceof tD.Readable;if(303!==B.statusCode&&C){R(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),finalize();return}(303===B.statusCode||(301===B.statusCode||302===B.statusCode)&&"POST"===D.method)&&(u.method="GET",u.body=void 0,u.headers.delete("content-length")),fetch(new Request(E.href,u)).then(S,R),finalize();return}default:return R(TypeError(`Redirect option '${D.redirect}' is not a valid value of RequestRedirect`))}}T&&B.once("end",()=>{T.removeEventListener("abort",abortAndFinalize)});let E=(0,tD.pipeline)(B,new tD.PassThrough,R);process.version<"v12.10"&&B.on("aborted",abortAndFinalize);let P={url:D.url,status:B.statusCode,statusText:B.statusMessage,headers:C,size:D.size,counter:D.counter,highWaterMark:D.highWaterMark},W=C.get("Content-Encoding");if(!D.compress||"HEAD"===D.method||null===W||204===B.statusCode||304===B.statusCode){S(A=new Response(E,P));return}let L={flush:nb.Z_SYNC_FLUSH,finishFlush:nb.Z_SYNC_FLUSH};if("gzip"===W||"x-gzip"===W){E=(0,tD.pipeline)(E,nb.createGunzip(L),R),S(A=new Response(fromAsyncIterable(E),P));return}if("deflate"===W||"x-deflate"===W){let u=(0,tD.pipeline)(B,new tD.PassThrough,R);u.once("data",u=>{E=(15&u[0])==8?(0,tD.pipeline)(E,nb.createInflate(),R):(0,tD.pipeline)(E,nb.createInflateRaw(),R),S(A=new Response(fromAsyncIterable(E),P))});return}if("br"===W){E=(0,tD.pipeline)(E,nb.createBrotliDecompress(),R),S(A=new Response(fromAsyncIterable(E),P));return}S(A=new Response(fromAsyncIterable(E),P))}),body_writeToStream(I,D)})}function fixResponseChunkedTransferBadEnding(u,g){let S;let R=nS.Buffer.from("0\r\n\r\n"),D=!1,C=!1;u.on("response",u=>{let{headers:g}=u;D="chunked"===g["transfer-encoding"]&&!g["content-length"]}),u.on("socket",E=>{let onSocketClose=()=>{if(D&&!C){let u=Object.assign(Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});g(u)}},onData=u=>{(C=0===nS.Buffer.compare(u.slice(-5),R))||!S||(C=0===nS.Buffer.compare(S.slice(-3),R.slice(0,3))&&0===nS.Buffer.compare(u.slice(-2),R.slice(3))),S=u};E.prependListener("close",onSocketClose),E.on("data",onData);let removeSocketListeners=()=>{E.removeListener("close",onSocketClose),E.removeListener("data",onData)};u.on("close",removeSocketListeners),u.on("abort",removeSocketListeners)})}let oi="function"==typeof globalThis.fetch?globalThis.fetch.bind(globalThis):fetch;globalThis.Headers,globalThis.Request,globalThis.Response;let oa=oi;var os=S(22037);let FsBlockStore=class FsBlockStore extends base_BaseBlockstore{constructor(){super(),this.path=`${os.tmpdir()}/${parseInt(String(1e9*Math.random()),10).toString()+Date.now()}`,this._opened=!1}async _open(){this._opening?await this._opening:(this._opening=Z.promises.mkdir(this.path),await this._opening,this._opened=!0)}async put(u,g){this._opened||await this._open();let S=u.toString(),R=`${this.path}/${S}`;await Z.promises.writeFile(R,g)}async get(u){this._opened||await this._open();let g=u.toString(),S=`${this.path}/${g}`,R=await Z.promises.readFile(S);return R}async has(u){this._opened||await this._open();let g=u.toString(),S=`${this.path}/${g}`;try{return await Z.promises.access(S),!0}catch(u){return!1}}async *blocks(){this._opened||await this._open();let u=await Z.promises.readdir(this.path);for(let g of u){let u=`${this.path}/${g}`,S=await Z.promises.readFile(u);yield{cid:cid_CID.parse(g),bytes:S}}}async close(){this._opened&&await Z.promises.rm(this.path,{recursive:!0}),this._opened=!1}};let ol=5,ou=3,oc=52428800,od=1048576,of=104857600,oh=30,om=1e4;function createRateLimiter(){let u=np(oh,om);return()=>u(()=>{})}let oy=createRateLimiter();let Web3Storage=class Web3Storage{constructor({token:u,endpoint:g=new URL("https://api.web3.storage"),rateLimiter:S,fetch:R=oa}){this.token=u,this.endpoint=g,this.rateLimiter=S||createRateLimiter(),this.fetch=R}static headers(u){if(!u)throw Error("missing token");return{Authorization:`Bearer ${u}`,"X-Client":"web3.storage/js"}}static async put({endpoint:u,token:g,rateLimiter:S=oy,fetch:R=oa},D,{onRootCidReady:C,onStoredChunk:E,maxRetries:T=ol,maxChunkSize:A=oc,wrapWithDirectory:B=!0,name:I,signal:P}={}){if(A>=of||A<od)throw Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");let W=new FsBlockStore;try{let{out:L,root:U}=await pack({input:Array.from(D).map(toImportCandidate),blockstore:W,wrapWithDirectory:B,maxChunkSize:od,maxChildrenPerNode:1024});C&&C(U.toString());let M=await CarReader.fromIterable(L);return await Web3Storage.putCar({endpoint:u,token:g,rateLimiter:S,fetch:R},M,{onStoredChunk:E,maxRetries:T,maxChunkSize:A,name:I,signal:P})}finally{await W.close()}}static async putCar({endpoint:u,token:g,rateLimiter:S=oy,fetch:R=oa},D,{name:C,onStoredChunk:E,maxRetries:T=ol,maxChunkSize:A=oc,decoders:B,signal:I}={}){if(A>=of||A<od)throw Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");let P=A,W=new URL("car",u),L={...Web3Storage.headers(g),"Content-Type":"application/vnd.ipld.car",...C?{"X-Name":encodeURIComponent(C)}:{}},U=await D.getRoots();if(null==U[0])throw Error("missing root CID");if(U.length>1)throw Error("too many roots");let M=U[0].toString(),$=new TreewalkCarSplitter(D,P,{decoders:B}),onCarChunk=async u=>{let g=[];for await(let S of u)g.push(S);let D=new nN(g,{type:"application/vnd.ipld.car"}),C=D;parseInt(globalThis.process?.versions?.node)>18&&(C=await C.arrayBuffer());let A=await X(async()=>{let u;await S();try{u=await R(W.toString(),{method:"POST",headers:L,body:C,signal:I})}catch(u){throw I&&I.aborted?new X.AbortError(u):u}if(429===u.status)throw Error("rate limited");let g=await u.json();if(!u.ok)throw Error(g.message);if(g.cid!==M)throw Error(`root CID mismatch, expected: ${M}, received: ${g.cid}`);return g.cid},{retries:T});return E&&E(D.size),A},H=transform(ou,onCarChunk);for await(let u of H($.cars()));return M}static async get({endpoint:u,token:g,rateLimiter:S=oy,fetch:R=oa},D,C={}){let E=new URL(`car/${D}`,u);await S();let T=await R(E.toString(),{method:"GET",headers:Web3Storage.headers(g),signal:C.signal});if(429===T.status)throw Error("rate limited");return toWeb3Response(T)}static async delete({endpoint:u,token:g,rateLimiter:S=oy},R,D={}){throw console.log("Not deleting",R,u,g,S,D),Error(".delete not implemented yet")}static async status({endpoint:u,token:g,rateLimiter:S=oy,fetch:R=oa},D,C={}){let E=new URL(`status/${D}`,u);await S();let T=await R(E.toString(),{method:"GET",headers:Web3Storage.headers(g),signal:C.signal});if(429===T.status)throw Error("rate limited");if(404!==T.status){if(!T.ok)throw Error(T.statusText);return T.json()}}static async *list(u,{before:g=new Date().toISOString(),maxResults:S=1/0,signal:R}={}){async function listPage({endpoint:u,token:g,rateLimiter:S=oy,fetch:D=oa},{before:C,size:E}){let T=new URLSearchParams({before:C,size:E.toString()}),A=new URL(`user/uploads?${T}`,u);return await S(),D(A.toString(),{method:"GET",headers:{...Web3Storage.headers(g),"Access-Control-Request-Headers":"Link"},signal:R})}let D=0,C=S>100?100:S;for await(let R of paginator(listPage,u,{before:g,size:C})){if(!R.ok){if(429===R.status)throw Error("rate limited");let u=await R.json();throw Error(`${R.status} ${R.statusText} ${u?"- "+u.message:""}`)}let u=await R.json();for(let g of u){if(++D>S)return;yield g}}}put(u,g){return Web3Storage.put(this,u,g)}putCar(u,g){return Web3Storage.putCar(this,u,g)}get(u,g){return Web3Storage.get(this,u,g)}delete(u,g){return Web3Storage.delete(this,u,g)}status(u,g){return Web3Storage.status(this,u,g)}list(u){return Web3Storage.list(this,u)}};async function toWeb3File({content:u,path:g,cid:S}){let R=[];for await(let g of u())R.push(g);let D=new nG(R,toFilenameWithPath(g));return Object.assign(D,{cid:S.toString()})}function toFilenameWithPath(u){let g=u.indexOf("/");return -1===g?u:u.substring(g+1)}function toWeb3Response(u){let g=Object.assign(u,{unixFsIterator:async function*(){if(!u.ok)throw Error(`Response was not ok: ${u.status} ${u.statusText} - Check for { "ok": false } on the Response object before calling .unixFsIterator`);if(!u.body)throw Error("No body on response");let g=new FsBlockStore;try{for await(let S of unpackStream(u.body,{blockstore:g}))yield S}finally{await g.close()}},files:async()=>{if(!u.ok)throw Error(`Response was not ok: ${u.status} ${u.statusText} - Check for { "ok": false } on the Response object before calling .files`);let S=[];for await(let u of g.unixFsIterator()){if("directory"===u.type)continue;let g=await toWeb3File(u);S.push(g)}return S}});return g}function toImportCandidate(u){let g;return{path:u.name,get content(){return g=g||u.stream()}}}async function*paginator(u,g,S){let R=await u(g,S);yield R;let D=parseLinkHeader(R.headers.get("Link")||"");for(;D&&D.next;)R=await u(g,D.next),yield R,D=parseLinkHeader(R.headers.get("Link")||"")}}};